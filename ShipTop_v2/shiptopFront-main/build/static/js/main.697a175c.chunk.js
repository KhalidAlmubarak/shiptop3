(this.webpackJsonpshiptop=this.webpackJsonpshiptop||[]).push([[0],{169:function(e,t){},175:function(e,t,n){"use strict";t.a=n.p+"static/media/logo.08bb687d.svg"},180:function(e,t){},238:function(e,t){},239:function(e,t){},254:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(19),i=n.n(c),o=n(3),s=n(2),l=n(11),d=n(299),u=n(125),j=n(186),b=n(321),h=n.p+"static/media/shiptop.46b6b0db.jpg",m=n(296),p=n(9),D=n.n(p),O={API_ROOT:"http://localhost:5001"},g=n(0),f=Object(m.a)((function(e){var t;return{h2:{color:"white"},carStyle:{backgroundPosition:"center",backgroundSize:"fill",backgroundRepeat:"no-repeat",height:"55em"},logo:(t={height:"6em"},Object(l.a)(t,e.breakpoints.down("md"),{height:"5em"}),Object(l.a)(t,e.breakpoints.down("xs"),{height:"4.5em"}),t),spacing:{marginTop:"2em"}}}));function x(e){var t=e.setToken,n=e.setUserId,r=e.setUserType,c=f(),i=Object(a.useState)(""),l=Object(s.a)(i,2),m=l[0],p=l[1],x=Object(a.useState)(""),v=Object(s.a)(x,2),A=v[0],y=v[1];return Object(g.jsxs)(d.a,{container:!0,direction:"row",style:{backgroundColor:"#82c0d9"},children:[Object(g.jsxs)(d.a,{container:!0,spacing:0,direction:"column",alignItems:"center",justify:"center",style:{minHeight:"100vh"},lg:4,xl:3,children:[Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)("img",{src:"data:image/png;base64,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",className:c.logo,alt:"shiptop logo"})}),Object(g.jsx)(d.a,{item:!0,className:c.h2,children:Object(g.jsx)(u.a,{variant:"h2",children:"Login"})}),Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(b.a,{label:"Username",id:"username",onChange:function(e){return p(e.target.value)}})}),Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(b.a,{type:"password",label:"Password",id:"pafssword",onChange:function(e){return y(e.target.value)}})}),Object(g.jsx)(d.a,{item:!0,className:c.h2,children:Object(g.jsx)(j.a,{variant:"contained",color:"primary",className:c.spacing,onClick:function(){var e={email:m,password:A};console.log(e),D.a.post("".concat(O.API_ROOT,"/api/user/signIn"),Object(o.a)({},e)).then((function(e){console.log(e),"ACC DOESN't EXIST"!==e.data.status&&(t("12312"),n(e.data.employeeID),r(e.data.role))})).catch((function(e){console.log(e)}))},children:"Log in"})})]}),Object(g.jsx)(d.a,{container:!0,className:c.carStyle,lg:8,xl:9,children:Object(g.jsx)("img",{src:h,className:c.carStyle,alt:"shiptop pack"})})]})}var v=n(315),A=n(36),y=n(56),w=n(182),S=Object(w.a)({palette:{common:{mahmoolBlue:"#29467f"},primary:{main:"#82c0d9"},secondary:{main:"#29467f"},typography:{h5:{color:"white"},tab:{fontFamily:"Raleway",textTransform:"none",fontWeight:"700",fontSize:"1rem"}}}}),C=n(54),N=n(10),k=n(8),I=n(5),B=n.n(I),P=n(6),_=n(33),E=n(311),T=n(312),F=n(309),R=n(310),H=n(307),L=n(325),V=n(308),q=n(323),M=n(264),W=n(185),U=n(319),z=n(187),Y=n(324),K=n(313),X=n(314),Z=n(23),Q=n.n(Z),J=n(20),G=n.n(J),$=n(29),ee=n.n($),te=n(320),ne=n(37),ae=n.n(ne),re=n(318);function ce(e){return Object(g.jsx)(re.a,Object(o.a)({elevation:6,variant:"filled"},e))}var ie=n(31),oe=n.n(ie);n(124);Object(m.a)({Button:{position:"absolute",top:"1rem",right:"1rem",background:"none",border:"none",zIndex:"10"},img:{width:"30px",cursor:"pointer"}});var se=n(317),le=n(306),de=n(189),ue=n(302),je=n(12),be=n(322),he=Object(je.a)((function(e){return{root:{"label + &":{marginTop:e.spacing(3)}},input:{borderRadius:4,position:"relative",backgroundColor:e.palette.background.paper,border:"1px solid #ced4da",fontSize:16,padding:"10px 26px 10px 12px",transition:e.transitions.create(["border-color","box-shadow"]),fontFamily:["-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(","),"&:focus":{borderRadius:4,borderColor:"#80bdff",boxShadow:"0 0 0 0.2rem rgba(0,123,255,.25)"}}}}))(de.a);function me(e){var t=e.setShips,n=Object(a.useState)(!0),r=Object(s.a)(n,2),c=r[0],i=(r[1],Object(a.useState)({shipmentName:"",category:"",isBreakable:"true",height:"",weight:"",width:"",length:"",description:""})),l=Object(s.a)(i,2),u=l[0],h=(l[1],Object(a.useState)([u])),m=Object(s.a)(h,2),p=m[0],D=m[1];return Object(a.useEffect)((function(){t(Object(N.a)(p))}),[p]),Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)(d.a,{container:!0,direction:"column",children:[p.length>0?p.map((function(e,t){return Object(g.jsxs)(d.a,{container:!0,direction:"row",style:{minWidth:"62vw"},spacing:2,children:[Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(b.a,{required:!0,color:"primary",error:!c,id:"margin-dense",label:"Name",style:{maxWidth:"8vw"},onChange:function(e){return D((function(n){return n.map((function(n,a){return t===a?Object(o.a)(Object(o.a)({},n),{},{shipmentName:e.target.value}):n}))}))},defaultValue:e.shipmentName})}),Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(b.a,{required:!0,color:"primary",error:!c,id:"margin-dense",label:"category",onChange:function(e){return D((function(n){return n.map((function(n,a){return t===a?Object(o.a)(Object(o.a)({},n),{},{category:e.target.value}):n}))}))},value:e.category})}),Object(g.jsx)(d.a,{item:!0,children:Object(g.jsxs)(ue.a,{children:[Object(g.jsx)(be.a,{id:"demo-customized-select-label",children:"Breakable?"}),Object(g.jsxs)(se.a,{labelId:"demo-customized-select-label",id:"demo-customized-select",value:e.isBreakable,onChange:function(e){return D((function(n){return n.map((function(n,a){return t===a?Object(o.a)(Object(o.a)({},n),{},{isBreakable:e.target.value}):n}))}))},input:Object(g.jsx)(he,{}),children:[Object(g.jsx)(le.a,{value:"true",children:"true "}),Object(g.jsx)(le.a,{value:"false",children:"false"})]})]})}),Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(b.a,{style:{maxWidth:"5vw"},inputProps:{inputMode:"numeric",pattern:"[0-9]*"},required:!0,color:"primary",error:!c,id:"margin-dense",label:"height",onChange:function(e){return D((function(n){return n.map((function(n,a){return t===a?Object(o.a)(Object(o.a)({},n),{},{height:e.target.value}):n}))}))},value:e.height})}),Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(b.a,{style:{maxWidth:"5vw"},inputProps:{inputMode:"numeric",pattern:"[0-9]*"},required:!0,color:"primary",error:!c,id:"margin-dense",label:"width",onChange:function(e){return D((function(n){return n.map((function(n,a){return t===a?Object(o.a)(Object(o.a)({},n),{},{width:e.target.value}):n}))}))},value:e.width})}),Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(b.a,{style:{maxWidth:"5vw"},inputProps:{inputMode:"numeric",pattern:"[0-9]*"},required:!0,color:"primary",error:!c,id:"margin-dense",label:"weight",onChange:function(e){return D((function(n){return n.map((function(n,a){return t===a?Object(o.a)(Object(o.a)({},n),{},{weight:e.target.value}):n}))}))},value:e.weight})}),Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(b.a,{style:{maxWidth:"5vw"},inputProps:{inputMode:"numeric",pattern:"[0-9]*"},required:!0,color:"primary",error:!c,id:"margin-dense",label:"length",onChange:function(e){return D((function(n){return n.map((function(n,a){return t===a?Object(o.a)(Object(o.a)({},n),{},{length:e.target.value}):n}))}))},value:e.length})}),Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(b.a,{required:!0,color:"primary",error:!c,id:"margin-dense",label:"description",onChange:function(e){return D((function(n){return n.map((function(n,a){return t===a?Object(o.a)(Object(o.a)({},n),{},{description:e.target.value}):n}))}))},value:e.desription})}),Object(g.jsx)(z.a,{"aria-label":"delete",onClick:function(){return function(e){var t=Object(N.a)(p);t.splice(e,1),D(t)}(t)},children:Object(g.jsx)(ae.a,{})})]})})):Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(j.a,{variant:"contained",color:"secondary",onClick:function(){D((function(e){return[].concat(Object(N.a)(e),[u])}))},children:"New Shipment"})}),p.length>0?Object(g.jsx)(d.a,{item:!0,style:{minHeight:"10vh"},children:Object(g.jsx)(j.a,{variant:"contained",color:"secondary",onClick:function(){D((function(e){return[].concat(Object(N.a)(e),[u])}))},children:"New Shipment"})}):Object(g.jsx)(g.Fragment,{})]})})}var pe=n(140),De={position:"absolute",top:"70%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"#ffffff",padding:"40px",zIndex:1e3,width:"50%",height:"40%",borderRadius:"1em",display:"inline-table"},Oe={position:"fixed",display:"flex",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, .7)",zIndex:1e3,height:"100%",width:"100%",overflowY:"auto"},ge=Object(m.a)({h5:{color:"white"}});function fe(e){var t=e.open,n=e.children,r=e.onClose,c=Object(a.useState)(!0),o=Object(s.a)(c,2),l=o[0],h=(o[1],Object(a.useState)("")),m=Object(s.a)(h,2),p=m[0],f=m[1],x=Object(a.useState)(""),v=Object(s.a)(x,2),A=v[0],y=v[1],w=Object(a.useState)("None"),S=Object(s.a)(w,2),C=S[0],I=(S[1],Object(a.useState)(null)),P=Object(s.a)(I,2),_=(P[0],P[1],Object(a.useState)([])),E=Object(s.a)(_,2),T=E[0],F=E[1],R=ge(),H=function(){var e=Object(k.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=JSON.stringify({employeeID:sessionStorage.getItem("userId"),location:A,phoneNumber:p,address:C,shipments:Object(N.a)(T)}),console.log(t),D.a.post("".concat(O.API_ROOT,"/api/consignor/createOrder"),t,{headers:{Authorization:"Bearer token","Content-Type":"application/json"}}).then((function(e){console.log(e),"SUCCESS"===e.data.status&&r()})).catch((function(e){Object(pe.a)(!1)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return t?i.a.createPortal(Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("div",{style:Oe}),Object(g.jsxs)("div",{style:De,children:[Object(g.jsxs)(d.a,{container:!0,spacing:1,style:{minWidth:"0vw",minHeight:"100vh"},direction:"column",children:[Object(g.jsx)(d.a,{container:!0,direction:"row",style:{minHeight:"30vh",minWidth:"62vw"},id:"DeliveryDetails",children:Object(g.jsxs)(d.a,{container:!0,spacing:3,direction:"column",alignItems:"left",justify:"top",style:{minHeight:"30vh",minWidth:"62vw"},lg:4,xl:3,children:[Object(g.jsx)(d.a,{style:{minHeight:"10vh"},item:!0,id:"CreateOrder",children:Object(g.jsx)(u.a,{color:"secondary",variant:"h3",children:"Create Order"})}),Object(g.jsx)(d.a,{item:!0,id:"deliveryLabel",children:Object(g.jsx)(u.a,{color:"primary",variant:"h5",children:"Delivery Details:"})}),Object(g.jsx)(d.a,{item:!0,id:"deliveryinfo",children:Object(g.jsx)(d.a,{direction:"column",spacing:4,children:Object(g.jsxs)(d.a,{container:!0,direction:"row",spacing:2,id:"ContactInfo",children:[Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(b.a,{required:!0,color:"primary",error:!l,id:"PhoneNumber",label:"Phone Number",onChange:function(e){return f(e.target.value)},value:p})}),Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(b.a,{required:!0,color:"primary",error:!l,id:"margin-dense",label:"City",onChange:function(e){return y(e.target.value)},value:A})})]})})})]})}),Object(g.jsx)(d.a,{container:!0,style:{minWidth:"70vw"},direction:"row",id:"Shipment Details",children:Object(g.jsxs)(d.a,{container:!0,spacing:3,direction:"column",alignItems:"left",justify:"top",style:{minHeight:"30vh",minWidth:"62vw"},lg:4,xl:3,children:[Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(u.a,{color:"primary",variant:"h5",children:"Shipment Details:"})}),Object(g.jsx)(d.a,{style:{minWidth:"70vw"},item:!0,children:Object(g.jsx)(me,{setShips:F})})]})}),Object(g.jsxs)(d.a,{container:!0,spacing:2,direction:"row",id:"Buttons",children:[Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(j.a,{variant:"contained",color:"secondary",className:R.spacing,onClick:r,sx:{p:2},children:"Cancel"})}),Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(j.a,{variant:"contained",color:"secondary",className:R.spacing,onClick:H,children:"Create Order"})})]})]}),n]})]}),document.getElementById("portal")):null}function xe(e,t,n){return t[n]<e[n]?-1:t[n]>e[n]?1:0}function ve(e,t){return"desc"===e?function(e,n){return xe(e,n,t)}:function(e,n){return-xe(e,n,t)}}function Ae(e,t){var n=e.map((function(e,t){return[e,t]}));return n.sort((function(e,n){var a=t(e[0],n[0]);return 0!==a?a:e[1]-n[1]})),n.map((function(e){return e[0]}))}function ye(e,t){var n=".".concat(e),a=new Date,r="routifics_".concat(a.getDate()).concat(a.getMonth()).concat(a.getFullYear(),"_").concat(a.getTime()),c={Sheets:{data:G.a.utils.json_to_sheet(t)},SheetNames:["data"]},i=G.a.write(c,{bookType:"".concat(e),type:"array"}),o=new Blob([i],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});ee.a.saveAs(o,r+n)}var we=[{id:"reference_number",numeric:!0,disablePadding:!1,label:"Order ID"},{id:"coord",numeric:!1,disablePadding:!1,label:"Total shipments"},{id:"isPaid",numeric:!0,disablePadding:!1,label:"Paid?"}];function Se(e){var t=e.classes,n=e.onSelectAllClick,a=e.order,r=e.orderBy,c=e.numSelected,i=e.rowCount,o=e.onRequestSort;return Object(g.jsx)(H.a,{children:Object(g.jsxs)(V.a,{children:[Object(g.jsx)(F.a,{padding:"checkbox",children:Object(g.jsx)(U.a,{indeterminate:c>0&&c<i,checked:i>0&&c===i,onChange:n,inputProps:{"aria-label":"select all shipments"}})}),Object(g.jsx)(F.a,{align:"center",className:t.tableCell,children:"Details"},"action"),Object(g.jsx)(F.a,{align:"center",className:t.tableCell,children:"Cancel Order"},"action"),we.map((function(e){return Object(g.jsx)(F.a,{align:"center",padding:e.disablePadding?"none":"default",sortDirection:r===e.id&&a,children:Object(g.jsxs)(q.a,{active:r===e.id,direction:r===e.id?a:"asc",onClick:(n=e.id,function(e){o(e,n)}),children:[e.label,r===e.id?Object(g.jsx)("span",{className:t.visuallyHidden,children:"desc"===a?"sorted descending":"sorted ascending"}):null]})},e.id);var n}))]})})}var Ce=Object(m.a)((function(e){return{root:{paddingLeft:e.spacing(2),paddingRight:e.spacing(1)},highlight:"light"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(_.f)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},marginL1:{marginLeft:"1rem"},title:{flex:"1 1 100%"}}})),Ne=function(e){var t=[];return Array.isArray(e)&&(t=e.map((function(e){return{reference_number:e.reference_number,coord:e.locations&&e.locations.length>0?e.locations[0].coord:null,from:e.routifics&&e.routifics.length>0?e.routifics[0].from:null,to:e.routifics&&e.routifics.length>0?e.routifics[0].to:null,aging:"7",load:null,destination_phone:e.destination_phone,email:null,service_type:e.service_type,priority:"yes",destination_name:e.destination_name,cod_amount:e.cod_amount,customer_reference_number:e.customer_reference_number,whatsapp_link:"http://wa.me/"+e.destination_phone,whatsapp_location:"http://wa.me/"+e.destination_phone+"?text=%D9%85%D8%B1%D8%AD%D8%A8%D8%A7%20"+e.destination_name.split(" ").slice(0,2).join("%20")+"%20%D9%85%D8%B9%D8%A7%D9%83%20%D9%85%D9%86%D8%AF%D9%88%D8%A8%20%D8%B4%D8%B1%D9%83%D8%A9%20%D9%85%D8%AD%D9%85%D9%88%D9%84%D8%8C%20%D8%A7%D8%B1%D8%AC%D9%88%20%D8%A5%D8%B1%D8%B3%D8%A7%D9%84%20%D8%A7%D9%84%D9%84%D9%88%D9%83%D9%8A%D8%B4%D9%86%20%D9%84%D9%8A%D8%AA%D9%85%20%D8%AA%D9%88%D8%B5%D9%8A%D9%84%20%D8%B4%D8%AD%D9%86%D8%AA%D9%83%20%D8%A8%D8%B1%D9%82%D9%85%20"+e.reference_number,whatsapp_no_answer:"http://wa.me/"+e.destination_phone+"?text=%D9%85%D8%B1%D8%AD%D8%A8%D8%A7%20"+e.destination_name.split(" ").slice(0,2).join("%20")+"%20%D9%85%D8%B9%D8%A7%D9%83%20%D9%85%D9%86%D8%AF%D9%88%D8%A8%20%D8%B4%D8%B1%D9%83%D8%A9%20%D9%85%D8%AD%D9%85%D9%88%D9%84%D8%8C%20%D8%A7%D9%86%D8%A7%20%D9%82%D8%B1%D9%8A%D8%A8%20%D9%85%D9%86%20%D8%A7%D9%84%D9%85%D9%88%D9%82%D8%B9%20%D9%88%D8%AA%D9%85%D8%AA%20%D9%85%D8%AD%D8%A7%D9%88%D9%84%D8%A9%20%D8%A7%D9%84%D8%A7%D8%AA%D8%B5%D8%A7%D9%84%D8%8C%20%D9%86%D8%B1%D8%AC%D9%88%20%D8%A7%D9%84%D8%B1%D8%AF%20%D8%B3%D8%B1%D9%8A%D8%B9%D8%A7%20%D9%84%D9%8A%D8%AA%D9%85%20%D8%AA%D9%88%D8%B5%D9%8A%D9%84%20%D8%B4%D8%AD%D9%86%D8%AA%D9%83%20"+e.reference_number+"%20%D9%81%D9%8A%20%D8%AD%D8%A7%D9%84%20%D9%84%D9%85%20%D9%8A%D8%AA%D9%85%20%D8%A7%D9%84%D8%B1%D8%AF%20%D8%B3%D8%B1%D9%8A%D8%B9%D8%A7%D8%8C%20%D8%B3%D8%AA%D8%AA%D9%85%20%D8%A5%D8%B9%D8%A7%D8%AF%D8%A9%20%D8%A7%D9%84%D8%AC%D8%AF%D9%88%D9%84%D8%A9%20%D9%84%D9%8A%D9%88%D9%85%20%D8%A7%D9%84%D8%B9%D9%85%D9%84%20%D8%A7%D9%84%D9%82%D8%A7%D8%AF%D9%85%D8%8C%20%D9%88%D8%B4%D9%83%D8%B1%D8%A7%D8%8C%0A"}}))),t},ke=function(e){var t=Ce(),n=e.numSelected,r=e.selectedRows,c=(e.data,Object(a.useState)(!1)),i=Object(s.a)(c,2);i[0],i[1];function o(e){return b.apply(this,arguments)}function b(){return b=Object(k.a)(B.a.mark((function e(t){var n,a,c;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.a.post("".concat(O.API_ROOT,"/rfdexport"),{reference_number:Object(N.a)(r)});case 2:n=e.sent,a=n.data,c=Ne(a),ye(t,c);case 6:case"end":return e.stop()}}),e)}))),b.apply(this,arguments)}return Object(g.jsxs)(M.a,{className:Object(P.a)(t.root,Object(l.a)({},t.highlight,n>0)),children:[n>0?Object(g.jsxs)(u.a,{className:t.title,color:"inherit",variant:"subtitle1",component:"div",children:[n," selected"]}):Object(g.jsx)(u.a,{className:t.title,variant:"h6",id:"tableTitle",component:"div",children:"Orders"}),n>0?Object(g.jsx)(Y.a,{title:"",children:Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(d.a,{container:!0,children:Object(g.jsx)(j.a,{onClick:Object(k.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o("csv");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),className:t.marginL1,variant:"contained",children:"Export CSV"})})})}):Object(g.jsx)(Y.a,{title:"Filter list",children:Object(g.jsx)(z.a,{"aria-label":"filter list",children:Object(g.jsx)(Q.a,{})})})]})},Ie=Object(m.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:750},ml1:{marginLeft:"1rem"},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}}));function Be(){var e=Object(a.useState)([]),t=Object(s.a)(e,2),n=t[0],c=t[1],i=Ie(),l=r.a.useState("asc"),d=Object(s.a)(l,2),u=d[0],b=d[1],h=r.a.useState("reference_number"),m=Object(s.a)(h,2),p=m[0],f=m[1],x=r.a.useState([]),v=Object(s.a)(x,2),A=v[0],y=v[1],w=r.a.useState(0),S=Object(s.a)(w,2),C=S[0],I=S[1],P=r.a.useState(!1),_=Object(s.a)(P,2),H=_[0],q=_[1],M=r.a.useState(200),Y=Object(s.a)(M,2),Z=Y[0],Q=Y[1],J=Object(a.useState)(!1),G=Object(s.a)(J,2),$=G[0],ee=G[1],ne=Z-Math.min(Z,n.length-C*Z),re=function(){var e=Object(k.a)(B.a.mark((function e(t,n){var a,r,i;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=sessionStorage.getItem("token"),r=oe.a.stringify({employeeID:sessionStorage.getItem("userId")},{skipEmptyString:!0,skipNull:!0}),i=[],D.a.get("".concat(O.API_ROOT,"/api/consignor/viewOrders").concat(r?"?".concat(r):""),{headers:{Authorization:"Bearer ".concat(a)}}).then((function(e){console.log(e.data),i=e.data;var t=[];console.log("is Array"),Array.isArray(i)&&(t=i.map((function(e,t){return Object(o.a)(Object(o.a)({},e),{},{id:e.ID,isEditMode:!1})}))),console.log(t),c(Object(N.a)(t))})),console.log(i);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){re(),console.log(n)}),[]);var ie=r.a.useState({open:!1,message:""}),se=Object(s.a)(ie,2),le=se[0],de=se[1],ue=function(e,t){"clickaway"!==t&&de({open:!1,message:""})},je=r.a.useState({}),be=Object(s.a)(je,2),he=(be[0],be[1]),me=function(){var e=Object(k.a)(B.a.mark((function e(t){var n,a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.a.post("".concat(O.API_ROOT,"/newlocation"),{reference_number:t.reference_number,coord:t.coord});case 2:n=e.sent,200!==(a=n.data).statusCode&&de({open:!0,message:a.message});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){}),[]),Object(g.jsxs)("div",{className:i.root,children:[Object(g.jsx)(j.a,{variant:"contained",color:"secondary",className:i.spacing,onClick:function(){return ee(!0)},children:"add Order"}),Object(g.jsx)(fe,{open:$,onClose:function(){return ee(!1)}}),Object(g.jsxs)(W.a,{className:i.paper,children:[Object(g.jsx)(ke,{numSelected:A.length,data:n,selectedRows:Object(N.a)(A)}),Object(g.jsx)(R.a,{children:Object(g.jsxs)(E.a,{className:i.table,"aria-labelledby":"tableTitle",size:H?"small":"medium","aria-label":"enhanced table",children:[Object(g.jsx)(Se,{classes:i,numSelected:A.length,order:u,orderBy:p,onSelectAllClick:function(e){if(e.target.checked){var t=n.map((function(e){return e.ID}));y(t)}else y([])},onRequestSort:function(e,t){b(p===t&&"asc"===u?"desc":"asc"),f(t)},rowCount:n.length}),Object(g.jsxs)(T.a,{children:[Ae(n,ve(u,p)).slice(C*Z,C*Z+Z).map((function(e,t){var a,r=(a=e.reference_number,-1!==A.indexOf(a)),s="enhanced-table-checkbox-".concat(t);return Object(g.jsxs)(V.a,{hover:!0,role:"checkbox","aria-checked":r,tabIndex:-1,selected:r,children:[Object(g.jsx)(F.a,{padding:"checkbox",children:Object(g.jsx)(U.a,{onChange:function(t){return function(e,t){var n=A.indexOf(t),a=[];-1===n?a=a.concat(A,t):0===n?a=a.concat(A.slice(1)):n===A.length-1?a=a.concat(A.slice(0,-1)):n>0&&(a=a.concat(A.slice(0,n),A.slice(n+1))),y(a)}(0,e.ID)},checked:r,inputProps:{"aria-labelledby":s}})}),Object(g.jsx)(F.a,{align:"center",children:Object(g.jsx)(j.a,{variant:"contained",color:"secondary",className:i.spacing,onClick:function(){},children:"View"})},"action"),Object(g.jsx)(F.a,{align:"center",children:Object(g.jsx)(z.a,{"aria-label":"delete",onClick:function(){return function(e,t){var a=n.filter((function(t){return t.id==e}))[0];"Save"!=t||a.coord?(c((function(t){return n.map((function(t){return t.id===e?Object(o.a)(Object(o.a)({},t),{},{isEditMode:!t.isEditMode}):t}))})),"Save"==t&&(me(Object(o.a)({},a)),he([]))):de({open:!0,message:"Coord is not allowed to be empty"})}(e.id,"Edit")},children:Object(g.jsx)(ae.a,{})})},"action"),Object(g.jsx)(F.a,{component:"th",id:s,scope:"row",padding:"none",align:"center",children:e.ID||"-"}),Object(g.jsx)(F.a,{align:"center",children:e.Total_shipment||"-"})," ",Object(g.jsx)(F.a,{align:"center",children:0===e.isPaid?"no":"yes"})," "]},e.ID)})),ne>0&&Object(g.jsx)(V.a,{style:{height:(H?33:53)*ne},children:Object(g.jsx)(F.a,{colSpan:6})})]})]})}),Object(g.jsx)(L.a,{rowsPerPageOptions:[100,200,300],component:"div",count:n.length,rowsPerPage:Z,page:C,onChangePage:function(e,t){I(t)},onChangeRowsPerPage:function(e){Q(parseInt(e.target.value,10)),I(0)}})]}),Object(g.jsx)(te.a,{open:le.open,autoHideDuration:3e3,onClose:ue,children:Object(g.jsx)(ce,{onClose:ue,severity:"error",children:le.message})}),Object(g.jsx)(K.a,{control:Object(g.jsx)(X.a,{checked:H,onChange:function(e){q(e.target.checked)}}),label:"Dense padding"})]})}var Pe=function(){return Object(g.jsx)(v.a,{theme:S,children:Object(g.jsxs)(A.a,{children:[Object(g.jsx)(C.a,{routes:[{name:"Orders",link:"/",activeIndex:0}]}),Object(g.jsx)(y.c,{children:Object(g.jsxs)(y.a,{exact:!0,path:"/",children:[" ",Object(g.jsx)(Be,{})," "]})})]})})},_e=n.p+"static/media/car.ea1e80e2.png",Ee=Object(m.a)((function(e){var t;return{h2:{color:"white"},carStyle:{backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat",height:"55em"},logo:(t={height:"6em"},Object(l.a)(t,e.breakpoints.down("md"),{height:"5em"}),Object(l.a)(t,e.breakpoints.down("xs"),{height:"4.5em"}),t),spacing:{marginTop:"2em"}}}));function Te(){var e=Ee(),t=Object(a.useState)(""),n=Object(s.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)(""),o=Object(s.a)(i,2),l=o[0],h=o[1],m=Object(a.useState)(""),p=Object(s.a)(m,2),f=p[0],x=p[1],v=Object(a.useState)(""),A=Object(s.a)(v,2),y=A[0],w=A[1];return Object(g.jsxs)(d.a,{container:!0,direction:"row",style:{backgroundColor:"#29467f"},children:[Object(g.jsx)(d.a,{container:!0,spacing:0,direction:"column",alignItems:"center",justify:"center",style:{minHeight:"100vh"},lg:4,xl:3,children:Object(g.jsx)(d.a,{item:!0,children:Object(g.jsxs)(d.a,{container:!0,direction:"column",children:[Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)("img",{src:"data:image/png;base64,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",className:e.logo,alt:"shiptop logo"})}),Object(g.jsxs)(d.a,{item:!0,className:e.h2,children:[Object(g.jsx)(u.a,{variant:"h2",children:"Sign up"}),0==localStorage.isAuthenticated?Object(g.jsx)(u.a,{variant:"h5",children:y}):1==localStorage.isAuthenticated?Object(g.jsx)(u.a,{variant:"h5",children:"Success!"}):""]}),Object(g.jsx)(d.a,{item:!0,className:e.h2,children:Object(g.jsx)(b.a,{label:"Username",id:"username",onChange:function(e){return c(e.target.value)}})}),Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(b.a,{label:"Email",id:"email",onChange:function(e){return x(e.target.value)}})}),Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(b.a,{color:"white",type:"password",label:"Password",id:"password",onChange:function(e){return h(e.target.value)}})}),Object(g.jsxs)(d.a,{item:!0,className:e.h2,children:[Object(g.jsx)(j.a,{variant:"contained",color:"white",className:e.spacing,onClick:function(){var e={username:r,email:f,password:l};D.a.post("".concat(O.API_ROOT,"/signup"),{payload:e}).then((function(e){!0===e.data.success?(localStorage.token=e.data.token,localStorage.isAuthenticated=1,window.location.href="/"):(w(e.data.message),localStorage.isAuthenticated=0)})).catch((function(e){console.log(e)}))},children:"Signup"}),Object(g.jsxs)("p",{children:["Do you have an account? ",Object(g.jsx)("br",{}),Object(g.jsx)("a",{style:{color:"#82c0d9"},href:"/",children:"Sign in here"})]})]})]})})}),Object(g.jsx)(d.a,{container:!0,className:e.carStyle,lg:2,children:Object(g.jsx)("img",{src:_e,className:e.carStyle,alt:"shiptop car"})})]})}n(87),n(72);var Fe={position:"absolute",top:"60%",left:"50%",alignItems:"center",transform:"translate(-50%, -50%)",backgroundColor:"#ffffff",padding:"40px",zIndex:1e3,width:"37%",height:"70%",borderRadius:"1em",display:"inline-table"},Re={position:"fixed",display:"flex",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, .7)",zIndex:1e3,height:"100%",width:"100%",overflowY:"auto"},He=Object(m.a)({h5:{color:"white"}});function Le(e){var t=e.open,n=e.children,r=e.onClose,c=Object(a.useState)(!0),l=Object(s.a)(c,2),h=l[0],m=(l[1],Object(a.useState)({firstName:"",lastName:"",email:"",phoneNumber:"",password:"",telephone:"",roomNumber:""})),p=Object(s.a)(m,2),O=p[0],f=p[1],x=He(),v=function(){var e=Object(k.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=JSON.stringify({employeeID:sessionStorage.getItem("userId"),firstName:O.firstName,lastName:O.lastName,email:O.email,phoneNumber:O.phoneNumber,office:{telephone:O.telephone,roomNumber:O.roomNumber}}),console.log(t),D.a.post("http://localhost:5001/api/logisticManager/addDispatcher",t,{headers:{Authorization:"Bearer token","Content-Type":"application/json"}}).then((function(e){console.log(e),"SUCCESS"===e.data.status&&r()})).catch((function(e){Object(pe.a)(!1)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return t?i.a.createPortal(Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("div",{style:Re}),Object(g.jsxs)("div",{style:Fe,children:[Object(g.jsxs)(d.a,{container:!0,spacing:1,style:{minWidth:"30vw",minHeight:"70vh"},direction:"column",children:[Object(g.jsx)(d.a,{container:!0,direction:"row",style:{minHeight:"70vh",minWidth:"35vw"},id:"DispatcherDetails",children:Object(g.jsxs)(d.a,{container:!0,spacing:3,direction:"column",alignItems:"left",justify:"top",lg:4,xl:3,style:{minHeight:"20vh",minWidth:"40vw"},children:[Object(g.jsx)(d.a,{style:{minHeight:"13vh"},item:!0,id:"AddDispatcher",children:Object(g.jsx)(u.a,{color:"secondary",variant:"h3",children:"Add Dispatcher"})}),Object(g.jsx)(d.a,{item:!0,id:"personalLabel",children:Object(g.jsx)(u.a,{color:"primary",variant:"h5",children:"personal Details:"})}),Object(g.jsx)(d.a,{item:!0,id:"personalDetails",children:Object(g.jsxs)(d.a,{direction:"column",spacing:4,children:[Object(g.jsxs)(d.a,{container:!0,direction:"row",spacing:2,id:"ContactInfo",children:[Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(b.a,{required:!0,color:"primary",error:!h,id:"firstName",label:"First Name",onChange:function(e){return f((function(t){return Object(o.a)(Object(o.a)({},t),{},{firstName:e.target.value})}))},value:O.firstName})}),Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(b.a,{required:!0,color:"primary",error:!h,id:"lastName",label:"Last Name",onChange:function(e){return f((function(t){return Object(o.a)(Object(o.a)({},t),{},{lastName:e.target.value})}))},value:O.lastName})}),Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(b.a,{required:!0,color:"primary",error:!h,id:"phoneNumber",label:"Phone Number",onChange:function(e){f((function(t){return Object(o.a)(Object(o.a)({},t),{},{phoneNumber:e.target.value})}))},value:O.phoneNumber})})]}),Object(g.jsxs)(d.a,{container:!0,direction:"row",spacing:2,id:"credentials",children:[Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(b.a,{required:!0,color:"primary",error:!h,id:"email",label:"Email",onChange:function(e){return f((function(t){return Object(o.a)(Object(o.a)({},t),{},{email:e.target.value})}))},value:O.email})}),Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(b.a,{required:!0,color:"primary",error:!h,id:"password",label:"Password",onChange:function(e){return f((function(t){return Object(o.a)(Object(o.a)({},t),{},{password:e.target.value})}))},value:O.password})})]})]})}),Object(g.jsx)(d.a,{item:!0,id:"addressLabel",children:Object(g.jsx)(u.a,{color:"primary",variant:"h5",children:"Address:"})}),Object(g.jsxs)(d.a,{item:!0,container:!0,direction:"row",id:"",spacing:3,style:{minWidth:"35vw"},children:[Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(b.a,{required:!0,color:"primary",error:!h,id:"firstName",label:"landline",onChange:function(e){return f((function(t){return Object(o.a)(Object(o.a)({},t),{},{telephone:e.target.value})}))},value:O.telephone})}),Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(b.a,{required:!0,color:"primary",error:!h,id:"roomNumber",label:"Room Number",onChange:function(e){return f((function(t){return Object(o.a)(Object(o.a)({},t),{},{roomNumber:e.target.value})}))},value:O.roomNumber})})]}),Object(g.jsx)(d.a,{item:!0})]})}),Object(g.jsxs)(d.a,{container:!0,spacing:2,direction:"row",id:"Buttons",children:[Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(j.a,{variant:"contained",color:"secondary",className:x.spacing,onClick:r,sx:{p:2},children:"Cancel"})}),Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(j.a,{variant:"contained",color:"secondary",className:x.spacing,onClick:v,children:"add Dispatcher"})})]})]}),n]})]}),document.getElementById("portal")):null}function Ve(e,t,n){return t[n]<e[n]?-1:t[n]>e[n]?1:0}function qe(e,t){return"desc"===e?function(e,n){return Ve(e,n,t)}:function(e,n){return-Ve(e,n,t)}}function Me(e,t){var n=e.map((function(e,t){return[e,t]}));return n.sort((function(e,n){var a=t(e[0],n[0]);return 0!==a?a:e[1]-n[1]})),n.map((function(e){return e[0]}))}function We(e,t){var n=".".concat(e),a=new Date,r="routifics_".concat(a.getDate()).concat(a.getMonth()).concat(a.getFullYear(),"_").concat(a.getTime()),c={Sheets:{data:G.a.utils.json_to_sheet(t)},SheetNames:["data"]},i=G.a.write(c,{bookType:"".concat(e),type:"array"}),o=new Blob([i],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});ee.a.saveAs(o,r+n)}var Ue=[{id:"employeeID",numeric:!0,disablePadding:!1,label:"ID"},{id:"firstName",numeric:!1,disablePadding:!1,label:"First Name"},{id:"lastName",numeric:!1,disablePadding:!1,label:"Last Name"},{id:"phoneNumber",numeric:!0,disablePadding:!1,label:"phone Number"},{id:"telephone",numeric:!0,disablePadding:!1,label:"telephone"},{id:"assignedShipments",numeric:!0,disablePadding:!1,label:"assigned Shipments"}];function ze(e){var t=e.classes,n=(e.onSelectAllClick,e.order),a=e.orderBy,r=(e.numSelected,e.rowCount,e.onRequestSort),c=e.Display;return Object(g.jsx)(H.a,{children:Object(g.jsxs)(V.a,{children:["View"===c?Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(F.a,{align:"center",className:t.tableCell,children:"Details"},"view"),Object(g.jsx)(F.a,{align:"center",className:t.tableCell,children:"Delete"},"action")]}):Object(g.jsxs)(F.a,{align:"center",className:t.tableCell,children:["Action"," "]},"action"),Ue.map((function(e){return Object(g.jsx)(F.a,{align:"center",padding:e.disablePadding?"none":"default",sortDirection:a===e.id&&n,children:Object(g.jsxs)(q.a,{active:a===e.id,direction:a===e.id?n:"asc",onClick:(c=e.id,function(e){r(e,c)}),children:[e.label,a===e.id?Object(g.jsx)("span",{className:t.visuallyHidden,children:"desc"===n?"sorted descending":"sorted ascending"}):null]})},e.id);var c}))]})})}var Ye=Object(m.a)((function(e){return{root:{paddingLeft:e.spacing(2),paddingRight:e.spacing(1)},highlight:"light"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(_.f)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},marginL1:{marginLeft:"1rem"},title:{flex:"1 1 100%"}}})),Ke=function(e){var t=[];return Array.isArray(e)&&(t=e.map((function(e){return{reference_number:e.reference_number,coord:e.locations&&e.locations.length>0?e.locations[0].coord:null,from:e.routifics&&e.routifics.length>0?e.routifics[0].from:null,to:e.routifics&&e.routifics.length>0?e.routifics[0].to:null,aging:"7",load:null,destination_phone:e.destination_phone,email:null,service_type:e.service_type,priority:"yes",destination_name:e.destination_name,cod_amount:e.cod_amount,customer_reference_number:e.customer_reference_number,whatsapp_link:"http://wa.me/"+e.destination_phone,whatsapp_location:"http://wa.me/"+e.destination_phone+"?text=%D9%85%D8%B1%D8%AD%D8%A8%D8%A7%20"+e.destination_name.split(" ").slice(0,2).join("%20")+"%20%D9%85%D8%B9%D8%A7%D9%83%20%D9%85%D9%86%D8%AF%D9%88%D8%A8%20%D8%B4%D8%B1%D9%83%D8%A9%20%D9%85%D8%AD%D9%85%D9%88%D9%84%D8%8C%20%D8%A7%D8%B1%D8%AC%D9%88%20%D8%A5%D8%B1%D8%B3%D8%A7%D9%84%20%D8%A7%D9%84%D9%84%D9%88%D9%83%D9%8A%D8%B4%D9%86%20%D9%84%D9%8A%D8%AA%D9%85%20%D8%AA%D9%88%D8%B5%D9%8A%D9%84%20%D8%B4%D8%AD%D9%86%D8%AA%D9%83%20%D8%A8%D8%B1%D9%82%D9%85%20"+e.reference_number,whatsapp_no_answer:"http://wa.me/"+e.destination_phone+"?text=%D9%85%D8%B1%D8%AD%D8%A8%D8%A7%20"+e.destination_name.split(" ").slice(0,2).join("%20")+"%20%D9%85%D8%B9%D8%A7%D9%83%20%D9%85%D9%86%D8%AF%D9%88%D8%A8%20%D8%B4%D8%B1%D9%83%D8%A9%20%D9%85%D8%AD%D9%85%D9%88%D9%84%D8%8C%20%D8%A7%D9%86%D8%A7%20%D9%82%D8%B1%D9%8A%D8%A8%20%D9%85%D9%86%20%D8%A7%D9%84%D9%85%D9%88%D9%82%D8%B9%20%D9%88%D8%AA%D9%85%D8%AA%20%D9%85%D8%AD%D8%A7%D9%88%D9%84%D8%A9%20%D8%A7%D9%84%D8%A7%D8%AA%D8%B5%D8%A7%D9%84%D8%8C%20%D9%86%D8%B1%D8%AC%D9%88%20%D8%A7%D9%84%D8%B1%D8%AF%20%D8%B3%D8%B1%D9%8A%D8%B9%D8%A7%20%D9%84%D9%8A%D8%AA%D9%85%20%D8%AA%D9%88%D8%B5%D9%8A%D9%84%20%D8%B4%D8%AD%D9%86%D8%AA%D9%83%20"+e.reference_number+"%20%D9%81%D9%8A%20%D8%AD%D8%A7%D9%84%20%D9%84%D9%85%20%D9%8A%D8%AA%D9%85%20%D8%A7%D9%84%D8%B1%D8%AF%20%D8%B3%D8%B1%D9%8A%D8%B9%D8%A7%D8%8C%20%D8%B3%D8%AA%D8%AA%D9%85%20%D8%A5%D8%B9%D8%A7%D8%AF%D8%A9%20%D8%A7%D9%84%D8%AC%D8%AF%D9%88%D9%84%D8%A9%20%D9%84%D9%8A%D9%88%D9%85%20%D8%A7%D9%84%D8%B9%D9%85%D9%84%20%D8%A7%D9%84%D9%82%D8%A7%D8%AF%D9%85%D8%8C%20%D9%88%D8%B4%D9%83%D8%B1%D8%A7%D8%8C%0A"}}))),t},Xe=function(e){var t=Ye(),n=e.numSelected,r=e.selectedRows,c=(e.data,Object(a.useState)(!1)),i=Object(s.a)(c,2);i[0],i[1];function o(e){return b.apply(this,arguments)}function b(){return b=Object(k.a)(B.a.mark((function e(t){var n,a,c;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.a.post("".concat(O.API_ROOT,"/rfdexport"),{reference_number:Object(N.a)(r)});case 2:n=e.sent,a=n.data,c=Ke(a),We(t,c);case 6:case"end":return e.stop()}}),e)}))),b.apply(this,arguments)}return Object(g.jsxs)(M.a,{className:Object(P.a)(t.root,Object(l.a)({},t.highlight,n>0)),children:[n>0?Object(g.jsxs)(u.a,{className:t.title,color:"inherit",variant:"subtitle1",component:"div",children:[n," selected"]}):Object(g.jsx)(u.a,{className:t.title,variant:"h6",id:"tableTitle",component:"div",children:"Dispatchers"}),n>0?Object(g.jsx)(Y.a,{title:"",children:Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(d.a,{container:!0,children:Object(g.jsx)(j.a,{onClick:Object(k.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o("csv");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),className:t.marginL1,variant:"contained",children:"Export CSV"})})})}):Object(g.jsx)(Y.a,{title:"Filter list",children:Object(g.jsx)(z.a,{"aria-label":"filter list",children:Object(g.jsx)(Q.a,{})})})]})},Ze=Object(m.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:750},ml1:{marginLeft:"1rem"},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}}));function Qe(e){var t=e.Display,n=e.setDispatcher,c=Object(a.useState)([]),i=Object(s.a)(c,2),l=i[0],d=i[1],u=Ze(),b=r.a.useState("asc"),h=Object(s.a)(b,2),m=h[0],p=h[1],f=r.a.useState("employeeID"),x=Object(s.a)(f,2),v=x[0],A=x[1],y=r.a.useState([]),w=Object(s.a)(y,2),S=w[0],C=w[1],I=r.a.useState(0),P=Object(s.a)(I,2),_=P[0],H=P[1],q=r.a.useState(!1),M=Object(s.a)(q,2),U=M[0],Y=M[1],Z=r.a.useState(200),Q=Object(s.a)(Z,2),J=Q[0],G=Q[1],$=Object(a.useState)(!1),ee=Object(s.a)($,2),ne=ee[0],re=ee[1],ie=J-Math.min(J,l.length-_*J),se=function(){var e=Object(k.a)(B.a.mark((function e(t,n){var a,r,c;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=sessionStorage.getItem("token"),r=oe.a.stringify({employeeID:sessionStorage.getItem("userId")},{skipEmptyString:!0,skipNull:!0}),c=[],D.a.get("".concat(O.API_ROOT,"/api/logisticManager/viewDispatchers").concat(r?"?".concat(r):""),{headers:{Authorization:"Bearer ".concat(a)}}).then((function(e){console.log(e.data),c=e.data;var t=[];console.log("is Array"),Array.isArray(c)&&(t=c.map((function(e,t){return Object(o.a)(Object(o.a)({},e),{},{employeeID:e.employeeID,isEditMode:!1})}))),console.log(t),d(Object(N.a)(t))})),console.log(c);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){se(),console.log(l)}),[]);le=l[0];var le,de,ue,je,be,he,me,pe,De,Oe=r.a.useState({open:!1,message:""}),ge=Object(s.a)(Oe,2),fe=ge[0],xe=ge[1],ve=function(e,t){"clickaway"!==t&&xe({open:!1,message:""})},Ae=r.a.useState({}),ye=Object(s.a)(Ae,2),we=(ye[0],ye[1]),Se=function(){var e=Object(k.a)(B.a.mark((function e(t){var n,a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.a.post("".concat(O.API_ROOT,"/newlocation"),{reference_number:t.reference_number,coord:t.coord});case 2:n=e.sent,200!==(a=n.data).statusCode&&xe({open:!0,message:a.message});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(g.jsxs)("div",{className:u.root,children:["Assign"!==t?Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(j.a,{variant:"contained",color:"secondary",className:u.spacing,onClick:function(){return re(!0)},children:"add Dispatcher"})}):Object(g.jsx)(g.Fragment,{}),Object(g.jsx)(Le,{open:ne,onClose:function(){return re(!1)}}),Object(g.jsxs)(W.a,{className:u.paper,children:[Object(g.jsx)(Xe,{numSelected:S.length,data:l,selectedRows:Object(N.a)(S)}),Object(g.jsx)(R.a,{children:Object(g.jsxs)(E.a,{className:u.table,"aria-labelledby":"tableTitle",size:U?"small":"medium","aria-label":"enhanced table",children:[Object(g.jsx)(ze,{classes:u,numSelected:S.length,order:m,orderBy:v,onSelectAllClick:function(e){if(e.target.checked){var t=l.map((function(e){return e.ID}));C(t)}else C([])},onRequestSort:function(e,t){p(v===t&&"asc"===m?"desc":"asc"),A(t)},rowCount:l.length,Display:t}),Object(g.jsxs)(T.a,{children:[Me(l,qe(m,v)).slice(_*J,_*J+J).map((function(e,a){var r=function(e){return-1!==S.indexOf(e)}(e.employeeID),c="enhanced-table-checkbox-".concat(a);return Object(g.jsxs)(V.a,{hover:!0,role:"checkbox","aria-checked":r,tabIndex:-1,selected:r,children:["View"===t?Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(F.a,{align:"center",children:Object(g.jsx)(j.a,{variant:"contained",color:"secondary",className:u.spacing,onClick:function(){},children:"View"})},"action"),Object(g.jsx)(F.a,{align:"center",children:Object(g.jsx)(z.a,{"aria-label":"delete",onClick:function(){return function(e,t){var n=l.filter((function(t){return t.id==e}))[0];"Save"!=t||n.coord?(d((function(t){return l.map((function(t){return t.id===e?Object(o.a)(Object(o.a)({},t),{},{isEditMode:!t.isEditMode}):t}))})),"Save"==t&&(Se(Object(o.a)({},n)),we([]))):xe({open:!0,message:"Coord is not allowed to be empty"})}(e.employeeID,"Edit")},children:Object(g.jsx)(ae.a,{})})},"action")]}):Object(g.jsx)(F.a,{align:"center",children:Object(g.jsx)(j.a,{variant:"contained",color:"secondary",className:u.spacing,onClick:function(){n(e.employeeID)},children:"Assign"})},"action"),Object(g.jsx)(F.a,{component:"th",id:c,scope:"row",padding:"none",align:"center",children:e.employeeID||"-"}),Object(g.jsx)(F.a,{align:"center",children:e.firstName||"-"})," ",Object(g.jsx)(F.a,{align:"center",children:e.lastName||"-"})," ",Object(g.jsx)(F.a,{align:"center",children:e.phoneNumber||"-"})," ",Object(g.jsx)(F.a,{align:"center",children:e.telephone||"-"})," ",Object(g.jsx)(F.a,{align:"center",children:e.assignedShipments||"-"})," "]},e.employeeID)})),ie>0&&Object(g.jsx)(V.a,{style:{height:(U?33:53)*ie},children:Object(g.jsx)(F.a,{colSpan:6})})]})]})}),Object(g.jsx)(L.a,{rowsPerPageOptions:[100,200,300],component:"div",count:l.length,rowsPerPage:J,page:_,onChangePage:function(e,t){H(t)},onChangeRowsPerPage:function(e){G(parseInt(e.target.value,10)),H(0)}})]}),Object(g.jsx)(te.a,{open:fe.open,autoHideDuration:3e3,onClose:ve,children:Object(g.jsx)(ce,{onClose:ve,severity:"error",children:fe.message})}),Object(g.jsx)(K.a,{control:Object(g.jsx)(X.a,{checked:U,onChange:function(e){Y(e.target.checked)}}),label:"Dense padding"})]})}var Je=n(139),Ge=Object(je.a)((function(e){return{root:{"label + &":{marginTop:e.spacing(3)}},input:{borderRadius:4,position:"relative",backgroundColor:e.palette.background.paper,border:"1px solid #ced4da",fontSize:16,padding:"10px 26px 10px 12px",transition:e.transitions.create(["border-color","box-shadow"]),fontFamily:["-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(","),"&:focus":{borderRadius:4,borderColor:"#80bdff",boxShadow:"0 0 0 0.2rem rgba(0,123,255,.25)"}}}}))(de.a),$e=Object(m.a)((function(e){return{margin:{margin:e.spacing(1)}}}));function et(e){var t=e.handleFilters,n=$e(),c=r.a.useState("DMM"),i=Object(s.a)(c,2),o=i[0],l=i[1],d=r.a.useState(null),u=Object(s.a)(d,2),j=u[0],b=u[1];Object(a.useEffect)((function(){h(j,o)}),[]);var h=Object(a.useCallback)(Object(Je.debounce)((function(e,n){return t(e,n)}),599),[]);return Object(g.jsxs)("div",{children:[Object(g.jsxs)(ue.a,{className:n.margin,children:[Object(g.jsx)(be.a,{htmlFor:"textbox",children:"Shipment Search"}),Object(g.jsx)(Ge,{value:j,placeholder:"Search here...",onChange:function(e){b(e.target.value),h(e.target.value,o)},id:"textbox"})]}),Object(g.jsxs)(ue.a,{className:n.margin,children:[Object(g.jsx)(be.a,{id:"demo-customized-select-label",children:"Filter"}),Object(g.jsxs)(se.a,{labelId:"demo-customized-select-label",id:"demo-customized-select",placeholder:"Select Hub code",value:o,onChange:function(e){l(e.target.value),h(j,e.target.value)},input:Object(g.jsx)(Ge,{}),children:[Object(g.jsx)(le.a,{value:"ALL",children:Object(g.jsx)("em",{children:"All"})}),Object(g.jsx)(le.a,{value:"DMM",children:"DMM "}),Object(g.jsx)(le.a,{value:"RUH",children:"RUH"})]})]})]})}var tt={position:"absolute",top:"70%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"#ffffff",padding:"40px",zIndex:1e3,width:"50%",height:"70%",borderRadius:"1em",display:"inline-table"},nt={position:"fixed",display:"flex",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, .7)",zIndex:1e3,height:"100%",width:"100%",overflowY:"auto"},at=Object(m.a)({h5:{color:"white"}});function rt(e){var t=e.open,n=e.children,r=e.onClose,c=Object(a.useState)(!0),l=Object(s.a)(c,2),h=l[0],m=(l[1],Object(a.useState)({firstName:"",lastName:"",email:"",phoneNumber:"",password:"",telephone:"",roomNumber:""})),p=Object(s.a)(m,2),O=p[0],f=p[1],x=at(),v=function(){var e=Object(k.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=JSON.stringify({employeeID:sessionStorage.getItem("userId"),firstName:O.firstName,lastName:O.lastName,email:O.email,phoneNumber:O.phoneNumber,office:{telephone:O.telephone,roomNumber:O.roomNumber}}),console.log(t),D.a.post("http://localhost:5001/api/logisticManager/addWarehouseManager",t,{headers:{Authorization:"Bearer token","Content-Type":"application/json"}}).then((function(e){console.log(e),"SUCCESS"===e.data.status&&r()})).catch((function(e){Object(pe.a)(!1)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return t?i.a.createPortal(Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("div",{style:nt}),Object(g.jsxs)("div",{style:tt,children:[Object(g.jsxs)(d.a,{container:!0,spacing:1,style:{minWidth:"70vw",minHeight:"100vh"},direction:"column",children:[Object(g.jsx)(d.a,{container:!0,direction:"row",style:{minHeight:"70vh",minWidth:"62vw"},id:"DispatcherDetails",children:Object(g.jsxs)(d.a,{container:!0,spacing:3,direction:"column",alignItems:"left",justify:"top",lg:4,xl:3,style:{minHeight:"20vh"},children:[Object(g.jsx)(d.a,{style:{minHeight:"13vh"},item:!0,id:"AddDispatcher",children:Object(g.jsx)(u.a,{color:"secondary",variant:"h3",children:"Add Warehouse Manager"})}),Object(g.jsx)(d.a,{item:!0,id:"personalLabel",children:Object(g.jsx)(u.a,{color:"primary",variant:"h5",children:"personal Details:"})}),Object(g.jsx)(d.a,{item:!0,id:"personalDetails",children:Object(g.jsxs)(d.a,{direction:"column",spacing:4,children:[Object(g.jsxs)(d.a,{container:!0,direction:"row",spacing:2,id:"ContactInfo",children:[Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(b.a,{required:!0,color:"primary",error:!h,id:"firstName",label:"First Name",onChange:function(e){return f((function(t){return Object(o.a)(Object(o.a)({},t),{},{firstName:e.target.value})}))},value:O.firstName})}),Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(b.a,{required:!0,color:"primary",error:!h,id:"lastName",label:"Last Name",onChange:function(e){return f((function(t){return Object(o.a)(Object(o.a)({},t),{},{lastName:e.target.value})}))},value:O.lastName})}),Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(b.a,{required:!0,color:"primary",error:!h,id:"phoneNumber",label:"Phone Number",onChange:function(e){f((function(t){return Object(o.a)(Object(o.a)({},t),{},{phoneNumber:e.target.value})}))},value:O.phoneNumber})})]}),Object(g.jsxs)(d.a,{container:!0,direction:"row",spacing:2,id:"credentials",children:[Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(b.a,{required:!0,color:"primary",error:!h,id:"email",label:"Email",onChange:function(e){return f((function(t){return Object(o.a)(Object(o.a)({},t),{},{email:e.target.value})}))},value:O.email})}),Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(b.a,{required:!0,color:"primary",error:!h,id:"password",label:"Password",onChange:function(e){return f((function(t){return Object(o.a)(Object(o.a)({},t),{},{password:e.target.value})}))},value:O.password})})]})]})}),Object(g.jsx)(d.a,{item:!0,id:"addressLabel",children:Object(g.jsx)(u.a,{color:"primary",variant:"h5",children:"Address:"})}),Object(g.jsx)(d.a,{item:!0,id:"",children:Object(g.jsx)(b.a,{required:!0,color:"primary",error:!h,id:"firstName",label:"landline",onChange:function(e){return f((function(t){return Object(o.a)(Object(o.a)({},t),{},{telephone:e.target.value})}))},value:O.telephone})}),Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(b.a,{required:!0,color:"primary",error:!h,id:"roomNumber",label:"Room Number",onChange:function(e){return f((function(t){return Object(o.a)(Object(o.a)({},t),{},{roomNumber:e.target.value})}))},value:O.roomNumber})})]})}),Object(g.jsxs)(d.a,{container:!0,spacing:2,direction:"row",id:"Buttons",children:[Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(j.a,{variant:"contained",color:"secondary",className:x.spacing,onClick:r,sx:{p:2},children:"Cancel"})}),Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(j.a,{variant:"contained",color:"secondary",className:x.spacing,onClick:v,children:"add warehouse Manager"})})]})]}),n]})]}),document.getElementById("portal")):null}function ct(e,t,n){return t[n]<e[n]?-1:t[n]>e[n]?1:0}function it(e,t){return"desc"===e?function(e,n){return ct(e,n,t)}:function(e,n){return-ct(e,n,t)}}function ot(e,t){var n=e.map((function(e,t){return[e,t]}));return n.sort((function(e,n){var a=t(e[0],n[0]);return 0!==a?a:e[1]-n[1]})),n.map((function(e){return e[0]}))}function st(e,t){var n=".".concat(e),a=new Date,r="routifics_".concat(a.getDate()).concat(a.getMonth()).concat(a.getFullYear(),"_").concat(a.getTime()),c={Sheets:{data:G.a.utils.json_to_sheet(t)},SheetNames:["data"]},i=G.a.write(c,{bookType:"".concat(e),type:"array"}),o=new Blob([i],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});ee.a.saveAs(o,r+n)}var lt=[{id:"employeeID",numeric:!0,disablePadding:!1,label:"ID"},{id:"firstName",numeric:!1,disablePadding:!1,label:"First Name"},{id:"lastName",numeric:!1,disablePadding:!1,label:"Last Name"},{id:"phoneNumber",numeric:!0,disablePadding:!1,label:"phone Number"},{id:"telephone",numeric:!0,disablePadding:!1,label:"telephone"},{id:"roomNumber",numeric:!0,disablePadding:!1,label:"Room #"}];function dt(e){var t=e.classes,n=(e.onSelectAllClick,e.order),a=e.orderBy,r=(e.numSelected,e.rowCount,e.onRequestSort);return Object(g.jsx)(H.a,{children:Object(g.jsxs)(V.a,{children:[Object(g.jsx)(F.a,{align:"center",className:t.tableCell,children:"Details"},"view"),Object(g.jsx)(F.a,{align:"center",className:t.tableCell,children:"Delete"},"action"),lt.map((function(e){return Object(g.jsx)(F.a,{align:"center",padding:e.disablePadding?"none":"default",sortDirection:a===e.id&&n,children:Object(g.jsxs)(q.a,{active:a===e.id,direction:a===e.id?n:"asc",onClick:(c=e.id,function(e){r(e,c)}),children:[e.label,a===e.id?Object(g.jsx)("span",{className:t.visuallyHidden,children:"desc"===n?"sorted descending":"sorted ascending"}):null]})},e.id);var c}))]})})}var ut=Object(m.a)((function(e){return{root:{paddingLeft:e.spacing(2),paddingRight:e.spacing(1)},highlight:"light"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(_.f)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},marginL1:{marginLeft:"1rem"},title:{flex:"1 1 100%"}}})),jt=function(e){var t=[];return Array.isArray(e)&&(t=e.map((function(e){return{reference_number:e.reference_number,coord:e.locations&&e.locations.length>0?e.locations[0].coord:null,from:e.routifics&&e.routifics.length>0?e.routifics[0].from:null,to:e.routifics&&e.routifics.length>0?e.routifics[0].to:null,aging:"7",load:null,destination_phone:e.destination_phone,email:null,service_type:e.service_type,priority:"yes",destination_name:e.destination_name,cod_amount:e.cod_amount,customer_reference_number:e.customer_reference_number,whatsapp_link:"http://wa.me/"+e.destination_phone,whatsapp_location:"http://wa.me/"+e.destination_phone+"?text=%D9%85%D8%B1%D8%AD%D8%A8%D8%A7%20"+e.destination_name.split(" ").slice(0,2).join("%20")+"%20%D9%85%D8%B9%D8%A7%D9%83%20%D9%85%D9%86%D8%AF%D9%88%D8%A8%20%D8%B4%D8%B1%D9%83%D8%A9%20%D9%85%D8%AD%D9%85%D9%88%D9%84%D8%8C%20%D8%A7%D8%B1%D8%AC%D9%88%20%D8%A5%D8%B1%D8%B3%D8%A7%D9%84%20%D8%A7%D9%84%D9%84%D9%88%D9%83%D9%8A%D8%B4%D9%86%20%D9%84%D9%8A%D8%AA%D9%85%20%D8%AA%D9%88%D8%B5%D9%8A%D9%84%20%D8%B4%D8%AD%D9%86%D8%AA%D9%83%20%D8%A8%D8%B1%D9%82%D9%85%20"+e.reference_number,whatsapp_no_answer:"http://wa.me/"+e.destination_phone+"?text=%D9%85%D8%B1%D8%AD%D8%A8%D8%A7%20"+e.destination_name.split(" ").slice(0,2).join("%20")+"%20%D9%85%D8%B9%D8%A7%D9%83%20%D9%85%D9%86%D8%AF%D9%88%D8%A8%20%D8%B4%D8%B1%D9%83%D8%A9%20%D9%85%D8%AD%D9%85%D9%88%D9%84%D8%8C%20%D8%A7%D9%86%D8%A7%20%D9%82%D8%B1%D9%8A%D8%A8%20%D9%85%D9%86%20%D8%A7%D9%84%D9%85%D9%88%D9%82%D8%B9%20%D9%88%D8%AA%D9%85%D8%AA%20%D9%85%D8%AD%D8%A7%D9%88%D9%84%D8%A9%20%D8%A7%D9%84%D8%A7%D8%AA%D8%B5%D8%A7%D9%84%D8%8C%20%D9%86%D8%B1%D8%AC%D9%88%20%D8%A7%D9%84%D8%B1%D8%AF%20%D8%B3%D8%B1%D9%8A%D8%B9%D8%A7%20%D9%84%D9%8A%D8%AA%D9%85%20%D8%AA%D9%88%D8%B5%D9%8A%D9%84%20%D8%B4%D8%AD%D9%86%D8%AA%D9%83%20"+e.reference_number+"%20%D9%81%D9%8A%20%D8%AD%D8%A7%D9%84%20%D9%84%D9%85%20%D9%8A%D8%AA%D9%85%20%D8%A7%D9%84%D8%B1%D8%AF%20%D8%B3%D8%B1%D9%8A%D8%B9%D8%A7%D8%8C%20%D8%B3%D8%AA%D8%AA%D9%85%20%D8%A5%D8%B9%D8%A7%D8%AF%D8%A9%20%D8%A7%D9%84%D8%AC%D8%AF%D9%88%D9%84%D8%A9%20%D9%84%D9%8A%D9%88%D9%85%20%D8%A7%D9%84%D8%B9%D9%85%D9%84%20%D8%A7%D9%84%D9%82%D8%A7%D8%AF%D9%85%D8%8C%20%D9%88%D8%B4%D9%83%D8%B1%D8%A7%D8%8C%0A"}}))),t},bt=function(e){var t=ut(),n=e.numSelected,r=e.selectedRows,c=(e.data,Object(a.useState)(!1)),i=Object(s.a)(c,2);i[0],i[1];function o(e){return b.apply(this,arguments)}function b(){return b=Object(k.a)(B.a.mark((function e(t){var n,a,c;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.a.post("".concat(O.API_ROOT,"/rfdexport"),{reference_number:Object(N.a)(r)});case 2:n=e.sent,a=n.data,c=jt(a),st(t,c);case 6:case"end":return e.stop()}}),e)}))),b.apply(this,arguments)}return Object(g.jsxs)(M.a,{className:Object(P.a)(t.root,Object(l.a)({},t.highlight,n>0)),children:[n>0?Object(g.jsxs)(u.a,{className:t.title,color:"inherit",variant:"subtitle1",component:"div",children:[n," selected"]}):Object(g.jsx)(u.a,{className:t.title,variant:"h6",id:"tableTitle",component:"div",children:"Warehouse Managers"}),n>0?Object(g.jsx)(Y.a,{title:"",children:Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(d.a,{container:!0,children:Object(g.jsx)(j.a,{onClick:Object(k.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o("csv");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),className:t.marginL1,variant:"contained",children:"Export CSV"})})})}):Object(g.jsx)(Y.a,{title:"Filter list",children:Object(g.jsx)(z.a,{"aria-label":"filter list",children:Object(g.jsx)(Q.a,{})})})]})},ht=Object(m.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:750},ml1:{marginLeft:"1rem"},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}}));function mt(){var e=Object(a.useState)([]),t=Object(s.a)(e,2),n=t[0],c=t[1],i=ht(),l=r.a.useState("asc"),d=Object(s.a)(l,2),u=d[0],b=d[1],h=r.a.useState("employeeID"),m=Object(s.a)(h,2),p=m[0],f=m[1],x=r.a.useState([]),v=Object(s.a)(x,2),A=v[0],y=v[1],w=r.a.useState(0),S=Object(s.a)(w,2),C=S[0],I=S[1],P=r.a.useState(!1),_=Object(s.a)(P,2),H=_[0],q=_[1],M=r.a.useState(200),U=Object(s.a)(M,2),Y=U[0],Z=U[1],Q=Object(a.useState)(!1),J=Object(s.a)(Q,2),G=J[0],$=J[1],ee=Y-Math.min(Y,n.length-C*Y),ne=function(){var e=Object(k.a)(B.a.mark((function e(t,n){var a,r,i;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=sessionStorage.getItem("token"),r=oe.a.stringify({employeeID:sessionStorage.getItem("userId")},{skipEmptyString:!0,skipNull:!0}),i=[],D.a.get("".concat(O.API_ROOT,"/api/logisticManager/viewWarehouseManagers").concat(r?"?".concat(r):""),{headers:{Authorization:"Bearer ".concat(a)}}).then((function(e){console.log(e.data),i=e.data;var t=[];console.log("is Array"),Array.isArray(i)&&(t=i.map((function(e,t){return Object(o.a)(Object(o.a)({},e),{},{employeeID:e.employeeID,isEditMode:!1})}))),console.log(t),c(Object(N.a)(t))})),console.log(i);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){ne(),console.log(n)}),[]);re=n[0];var re,ie,se,le,de,ue,je,be,he,me=r.a.useState({open:!1,message:""}),pe=Object(s.a)(me,2),De=pe[0],Oe=pe[1],ge=function(e,t){"clickaway"!==t&&Oe({open:!1,message:""})},fe=r.a.useState({}),xe=Object(s.a)(fe,2),ve=(xe[0],xe[1]),Ae=function(){var e=Object(k.a)(B.a.mark((function e(t){var n,a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.a.post("".concat(O.API_ROOT,"/newlocation"),{reference_number:t.reference_number,coord:t.coord});case 2:n=e.sent,200!==(a=n.data).statusCode&&Oe({open:!0,message:a.message});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(g.jsxs)("div",{className:i.root,children:[Object(g.jsx)(j.a,{variant:"contained",color:"secondary",className:i.spacing,onClick:function(){return $(!0)},children:"add Warehouse Manager"}),Object(g.jsx)(rt,{open:G,onClose:function(){return $(!1)}}),Object(g.jsxs)(W.a,{className:i.paper,children:[Object(g.jsx)(bt,{numSelected:A.length,data:n,selectedRows:Object(N.a)(A)}),Object(g.jsx)(R.a,{children:Object(g.jsxs)(E.a,{className:i.table,"aria-labelledby":"tableTitle",size:H?"small":"medium","aria-label":"enhanced table",children:[Object(g.jsx)(dt,{classes:i,numSelected:A.length,order:u,orderBy:p,onSelectAllClick:function(e){if(e.target.checked){var t=n.map((function(e){return e.ID}));y(t)}else y([])},onRequestSort:function(e,t){b(p===t&&"asc"===u?"desc":"asc"),f(t)},rowCount:n.length}),Object(g.jsxs)(T.a,{children:[ot(n,it(u,p)).slice(C*Y,C*Y+Y).map((function(e,t){var a=function(e){return-1!==A.indexOf(e)}(e.employeeID),r="enhanced-table-checkbox-".concat(t);return Object(g.jsxs)(V.a,{hover:!0,role:"checkbox","aria-checked":a,tabIndex:-1,selected:a,children:[Object(g.jsx)(F.a,{align:"center",children:Object(g.jsx)(j.a,{variant:"contained",color:"secondary",className:i.spacing,onClick:function(){},children:"View"})},"action"),Object(g.jsx)(F.a,{align:"center",children:Object(g.jsx)(z.a,{"aria-label":"delete",onClick:function(){return function(e,t){var a=n.filter((function(t){return t.id==e}))[0];"Save"!=t||a.coord?(c((function(t){return n.map((function(t){return t.id===e?Object(o.a)(Object(o.a)({},t),{},{isEditMode:!t.isEditMode}):t}))})),"Save"==t&&(Ae(Object(o.a)({},a)),ve([]))):Oe({open:!0,message:"Coord is not allowed to be empty"})}(e.employeeID,"Edit")},children:Object(g.jsx)(ae.a,{})})},"action"),Object(g.jsx)(F.a,{component:"th",id:r,scope:"row",padding:"none",align:"center",children:e.employeeID||"-"}),Object(g.jsx)(F.a,{align:"center",children:e.firstName||"-"})," ",Object(g.jsx)(F.a,{align:"center",children:e.lastName||"-"})," ",Object(g.jsx)(F.a,{align:"center",children:e.phoneNumber||"-"})," ",Object(g.jsx)(F.a,{align:"center",children:e.telephone||"-"})," ",Object(g.jsx)(F.a,{align:"center",children:e.roomNumber||"-"})," "]},e.employeeID)})),ee>0&&Object(g.jsx)(V.a,{style:{height:(H?33:53)*ee},children:Object(g.jsx)(F.a,{colSpan:6})})]})]})}),Object(g.jsx)(L.a,{rowsPerPageOptions:[100,200,300],component:"div",count:n.length,rowsPerPage:Y,page:C,onChangePage:function(e,t){I(t)},onChangeRowsPerPage:function(e){Z(parseInt(e.target.value,10)),I(0)}})]}),Object(g.jsx)(te.a,{open:De.open,autoHideDuration:3e3,onClose:ge,children:Object(g.jsx)(ce,{onClose:ge,severity:"error",children:De.message})}),Object(g.jsx)(K.a,{control:Object(g.jsx)(X.a,{checked:H,onChange:function(e){q(e.target.checked)}}),label:"Dense padding"})]})}var pt=Object(je.a)((function(e){return{root:{"label + &":{marginTop:e.spacing(3)}},input:{borderRadius:4,position:"relative",backgroundColor:e.palette.background.paper,border:"1px solid #ced4da",fontSize:16,padding:"10px 26px 10px 12px",transition:e.transitions.create(["border-color","box-shadow"]),fontFamily:["-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(","),"&:focus":{borderRadius:4,borderColor:"#80bdff",boxShadow:"0 0 0 0.2rem rgba(0,123,255,.25)"}}}}))(de.a),Dt=Object(m.a)((function(e){return{margin:{margin:e.spacing(1)}}}));function Ot(e){var t=e.Filter,n=e.handleFilters,c=e.routes;null===c&&(c=[{name:"in Filter",link:"/",activeIndex:0}]);var i=Dt(),o=r.a.useState(t.filters[0]),l=Object(s.a)(o,2),d=l[0],u=l[1];Object(a.useEffect)((function(){j(d)}),[]);var j=Object(a.useCallback)(Object(Je.debounce)((function(e){return n(e)}),599),[]);return Object(g.jsx)("div",{children:Object(g.jsxs)(ue.a,{className:i.margin,children:[Object(g.jsx)(be.a,{id:"demo-customized-select-label",children:t.name}),Object(g.jsx)(se.a,{labelId:"demo-customized-select-label",id:"demo-customized-select",placeholder:"Select Hub code",value:d,onChange:function(e){u(e.target.value),j(e.target.value)},input:Object(g.jsx)(pt,{}),children:t.filters.map((function(e,t){return Object(g.jsxs)(le.a,{value:e,children:[e," "]},t)}))})]})})}function gt(e,t,n){return t[n]<e[n]?-1:t[n]>e[n]?1:0}function ft(e,t){return"desc"===e?function(e,n){return gt(e,n,t)}:function(e,n){return-gt(e,n,t)}}function xt(e,t){var n=e.map((function(e,t){return[e,t]}));return n.sort((function(e,n){var a=t(e[0],n[0]);return 0!==a?a:e[1]-n[1]})),n.map((function(e){return e[0]}))}var vt=[{id:"shipmentID",numeric:!0,disablePadding:!1,label:"ID"},{id:"shipmentName",numeric:!1,disablePadding:!1,label:"Name"},{id:"currentCity",numeric:!1,disablePadding:!1,label:"Current City"},{id:"location",numeric:!0,disablePadding:!1,label:"Deliver To"},{id:"status",numeric:!0,disablePadding:!1,label:"Status"},{id:"assignedEmployee",numeric:!0,disablePadding:!1,label:"assigned Emp"}];function At(e){var t=e.classes,n=e.onSelectAllClick,a=e.order,r=e.orderBy,c=e.numSelected,i=e.rowCount,o=e.onRequestSort;return Object(g.jsx)(H.a,{children:Object(g.jsxs)(V.a,{children:[Object(g.jsx)(F.a,{align:"center",className:t.tableCell,children:"Details"},"view"),Object(g.jsx)(F.a,{padding:"checkbox",children:Object(g.jsx)(U.a,{indeterminate:c>0&&c<i,checked:i>0&&c===i,onChange:n,inputProps:{"aria-label":"select all desserts"}})}),vt.map((function(e){return Object(g.jsx)(F.a,{align:"center",padding:e.disablePadding?"none":"default",sortDirection:r===e.id&&a,children:Object(g.jsxs)(q.a,{active:r===e.id,direction:r===e.id?a:"asc",onClick:(n=e.id,function(e){o(e,n)}),children:[e.label,r===e.id?Object(g.jsx)("span",{className:t.visuallyHidden,children:"desc"===a?"sorted descending":"sorted ascending"}):null]})},e.id);var n}))]})})}var yt=Object(m.a)((function(e){return{root:{paddingLeft:e.spacing(2),paddingRight:e.spacing(1)},highlight:"light"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(_.f)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},marginL1:{marginLeft:"1rem"},title:{flex:"1 1 100%"}}})),wt=function(e){var t=yt(),n=e.numSelected,r=e.selectedRows,c=(e.data,e.setShipments),i=e.filter,o=Object(a.useState)(!1),b=Object(s.a)(o,2);b[0],b[1];return Object(g.jsxs)(M.a,{className:Object(P.a)(t.root,Object(l.a)({},t.highlight,n>0)),children:[n>0?Object(g.jsxs)(u.a,{className:t.title,color:"inherit",variant:"subtitle1",component:"div",children:[n," selected"]}):Object(g.jsx)(u.a,{className:t.title,variant:"h6",id:"tableTitle",component:"div",children:"Shipments"}),n>0?Object(g.jsx)(Y.a,{title:"",children:Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(d.a,{container:!0,direction:"row",spacing:2,children:Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(j.a,{color:"secondary",onClick:function(){console.log("selected rows: ".concat(r)),c({filter:i,shipment:Object(N.a)(r)})},className:t.marginL1,variant:"contained",children:"Assign"})})})})}):Object(g.jsx)(Y.a,{title:"Filter list",children:Object(g.jsx)(z.a,{"aria-label":"filter list",children:Object(g.jsx)(Q.a,{})})})," "]})},St=Object(m.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:750},ml1:{marginLeft:"1rem"},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}}));function Ct(e){var t=Object(a.useState)([]),n=Object(s.a)(t,2),c=n[0],i=n[1],l=St(),d=r.a.useState("asc"),u=Object(s.a)(d,2),b=u[0],h=u[1],m=r.a.useState("shipmentID"),p=Object(s.a)(m,2),f=p[0],x=p[1],v=r.a.useState([]),A=Object(s.a)(v,2),y=A[0],w=A[1],S=r.a.useState(0),C=Object(s.a)(S,2),I=C[0],P=C[1],_=r.a.useState(!1),H=Object(s.a)(_,2),q=H[0],M=H[1],z=r.a.useState(200),Y=Object(s.a)(z,2),Z=Y[0],Q=Y[1],J=Object(a.useState)(!1),G=Object(s.a)(J,2),$=G[0],ee=G[1],ne=Object(a.useState)("NEW"),ae=Object(s.a)(ne,2),re=ae[0],ie=ae[1],oe=(e.shipments,e.setShipments),se=Z-Math.min(Z,c.length-I*Z),le=function(){var t=Object(k.a)(B.a.mark((function t(n){var a,r,c,s;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=sessionStorage.getItem("token"),ie(n),r=n,c=JSON.stringify({employeeID:sessionStorage.getItem("userId"),filteredBy:{delivery:{deliveryStatus:r}}},{skipEmptyString:!0,skipNull:!0}),s=[],D.a.post("".concat(O.API_ROOT,"/api/logisticManager/viewShipments"),c,{headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"}}).then((function(t){console.log(t.data),s=t.data;var n=[];Array.isArray(s)&&(n=s.map((function(e,t){return Object(o.a)(Object(o.a)({},e),{},{employeeID:e.employeeID,isEditMode:!1})})),1===e.filters.length&&(n=n.filter((function(e){return e.currentCity.toUpperCase()===e.shipmentLocation.toUpperCase()})))),i(Object(N.a)(n))}));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();Object(a.useEffect)((function(){le()}),[]);var de=r.a.useState({open:!1,message:""}),ue=Object(s.a)(de,2),je=ue[0],be=ue[1],he=function(e,t){"clickaway"!==t&&be({open:!1,message:""})},me=r.a.useState({}),pe=Object(s.a)(me,2);pe[0],pe[1];return Object(a.useEffect)((function(){}),[]),Object(g.jsxs)("div",{className:l.root,children:[Object(g.jsx)(Ot,{Filter:{name:"Status",filters:Object(N.a)(e.filters)},handleFilters:function(e){return le(e)}}),Object(g.jsx)(Le,{open:$,onClose:function(){return ee(!1)}}),Object(g.jsxs)(W.a,{className:l.paper,children:[Object(g.jsx)(wt,{numSelected:y.length,data:c,selectedRows:Object(N.a)(y),setShipments:oe,filter:re}),Object(g.jsx)(R.a,{children:Object(g.jsxs)(E.a,{className:l.table,"aria-labelledby":"tableTitle",size:q?"small":"medium","aria-label":"enhanced table",children:[Object(g.jsx)(At,{classes:l,numSelected:y.length,order:b,orderBy:f,onSelectAllClick:function(e){if(e.target.checked){var t=c.map((function(e){return e.shipmentID}));w(t)}else w([])},onRequestSort:function(e,t){h(f===t&&"asc"===b?"desc":"asc"),x(t)},rowCount:c.length}),Object(g.jsxs)(T.a,{children:[xt(c,ft(b,f)).slice(I*Z,I*Z+Z).map((function(e,t){var n,a=(n=e.shipmentID,-1!==y.indexOf(n)),r="enhanced-table-checkbox-".concat(t);return Object(g.jsxs)(V.a,{hover:!0,role:"checkbox","aria-checked":a,tabIndex:-1,selected:a,children:[Object(g.jsx)(F.a,{align:"center",children:Object(g.jsx)(j.a,{variant:"contained",color:"secondary",className:l.spacing,onClick:function(){},children:"View"})},"view"),Object(g.jsx)(F.a,{padding:"checkbox",children:Object(g.jsx)(U.a,{onChange:function(t){return function(e,t){var n=y.indexOf(t),a=[];-1===n?a=a.concat(y,t):0===n?a=a.concat(y.slice(1)):n===y.length-1?a=a.concat(y.slice(0,-1)):n>0&&(a=a.concat(y.slice(0,n),y.slice(n+1))),w(a)}(0,e.shipmentID)},checked:a,inputProps:{"aria-labelledby":r}})}),Object(g.jsx)(F.a,{component:"th",id:r,scope:"row",padding:"none",align:"center",children:e.shipmentID||"-"}),Object(g.jsx)(F.a,{align:"center",children:e.shipmentName||"-"})," ",Object(g.jsx)(F.a,{align:"center",children:e.currentCity||"-"})," ",Object(g.jsx)(F.a,{align:"center",children:e.shipmentLocation||"-"})," ",Object(g.jsx)(F.a,{align:"center",children:e.deliveryStatus||"-"})," ",Object(g.jsx)(F.a,{align:"center",children:e.assignedEmployee||"-"})," "]},e.shipmentID)})),se>0&&Object(g.jsx)(V.a,{style:{height:(q?33:53)*se},children:Object(g.jsx)(F.a,{colSpan:6})})]})]})}),Object(g.jsx)(L.a,{rowsPerPageOptions:[100,200,300],component:"div",count:c.length,rowsPerPage:Z,page:I,onChangePage:function(e,t){P(t)},onChangeRowsPerPage:function(e){Q(parseInt(e.target.value,10)),P(0)}})]}),Object(g.jsx)(te.a,{open:je.open,autoHideDuration:3e3,onClose:he,children:Object(g.jsx)(ce,{onClose:he,severity:"error",children:je.message})}),Object(g.jsx)(K.a,{control:Object(g.jsx)(X.a,{checked:q,onChange:function(e){M(e.target.checked)}}),label:"Dense padding"})]})}function Nt(e,t,n){return t[n]<e[n]?-1:t[n]>e[n]?1:0}function kt(e,t){return"desc"===e?function(e,n){return Nt(e,n,t)}:function(e,n){return-Nt(e,n,t)}}function It(e,t){var n=e.map((function(e,t){return[e,t]}));return n.sort((function(e,n){var a=t(e[0],n[0]);return 0!==a?a:e[1]-n[1]})),n.map((function(e){return e[0]}))}function Bt(e,t){var n=".".concat(e),a=new Date,r="routifics_".concat(a.getDate()).concat(a.getMonth()).concat(a.getFullYear(),"_").concat(a.getTime()),c={Sheets:{data:G.a.utils.json_to_sheet(t)},SheetNames:["data"]},i=G.a.write(c,{bookType:"".concat(e),type:"array"}),o=new Blob([i],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});ee.a.saveAs(o,r+n)}var Pt=[{id:"managerID",numeric:!0,disablePadding:!1,label:"MGR ID"},{id:"warehouseID",numeric:!1,disablePadding:!1,label:"Warehouse ID"},{id:"location",numeric:!1,disablePadding:!1,label:"location"}];function _t(e){var t=e.classes,n=(e.onSelectAllClick,e.order),a=e.orderBy,r=(e.numSelected,e.rowCount,e.onRequestSort),c=e.Display;return Object(g.jsx)(H.a,{children:Object(g.jsxs)(V.a,{children:["View"===c?Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(F.a,{align:"center",className:t.tableCell,children:"Details"},"view"),Object(g.jsx)(F.a,{align:"center",className:t.tableCell,children:"Cancel Order"},"action")]}):Object(g.jsxs)(F.a,{align:"center",className:t.tableCell,children:["Action"," "]},"action"),Pt.map((function(e){return Object(g.jsx)(F.a,{align:"center",padding:e.disablePadding?"none":"default",sortDirection:a===e.id&&n,children:Object(g.jsxs)(q.a,{active:a===e.id,direction:a===e.id?n:"asc",onClick:(c=e.id,function(e){r(e,c)}),children:[e.label,a===e.id?Object(g.jsx)("span",{className:t.visuallyHidden,children:"desc"===n?"sorted descending":"sorted ascending"}):null]})},e.id);var c}))]})})}var Et=Object(m.a)((function(e){return{root:{paddingLeft:e.spacing(2),paddingRight:e.spacing(1)},highlight:"light"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(_.f)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},marginL1:{marginLeft:"1rem"},title:{flex:"1 1 100%"}}})),Tt=function(e){var t=[];return Array.isArray(e)&&(t=e.map((function(e){return{reference_number:e.reference_number,coord:e.locations&&e.locations.length>0?e.locations[0].coord:null,from:e.routifics&&e.routifics.length>0?e.routifics[0].from:null,to:e.routifics&&e.routifics.length>0?e.routifics[0].to:null,aging:"7",load:null,destination_phone:e.destination_phone,email:null,service_type:e.service_type,priority:"yes",destination_name:e.destination_name,cod_amount:e.cod_amount,customer_reference_number:e.customer_reference_number,whatsapp_link:"http://wa.me/"+e.destination_phone,whatsapp_location:"http://wa.me/"+e.destination_phone+"?text=%D9%85%D8%B1%D8%AD%D8%A8%D8%A7%20"+e.destination_name.split(" ").slice(0,2).join("%20")+"%20%D9%85%D8%B9%D8%A7%D9%83%20%D9%85%D9%86%D8%AF%D9%88%D8%A8%20%D8%B4%D8%B1%D9%83%D8%A9%20%D9%85%D8%AD%D9%85%D9%88%D9%84%D8%8C%20%D8%A7%D8%B1%D8%AC%D9%88%20%D8%A5%D8%B1%D8%B3%D8%A7%D9%84%20%D8%A7%D9%84%D9%84%D9%88%D9%83%D9%8A%D8%B4%D9%86%20%D9%84%D9%8A%D8%AA%D9%85%20%D8%AA%D9%88%D8%B5%D9%8A%D9%84%20%D8%B4%D8%AD%D9%86%D8%AA%D9%83%20%D8%A8%D8%B1%D9%82%D9%85%20"+e.reference_number,whatsapp_no_answer:"http://wa.me/"+e.destination_phone+"?text=%D9%85%D8%B1%D8%AD%D8%A8%D8%A7%20"+e.destination_name.split(" ").slice(0,2).join("%20")+"%20%D9%85%D8%B9%D8%A7%D9%83%20%D9%85%D9%86%D8%AF%D9%88%D8%A8%20%D8%B4%D8%B1%D9%83%D8%A9%20%D9%85%D8%AD%D9%85%D9%88%D9%84%D8%8C%20%D8%A7%D9%86%D8%A7%20%D9%82%D8%B1%D9%8A%D8%A8%20%D9%85%D9%86%20%D8%A7%D9%84%D9%85%D9%88%D9%82%D8%B9%20%D9%88%D8%AA%D9%85%D8%AA%20%D9%85%D8%AD%D8%A7%D9%88%D9%84%D8%A9%20%D8%A7%D9%84%D8%A7%D8%AA%D8%B5%D8%A7%D9%84%D8%8C%20%D9%86%D8%B1%D8%AC%D9%88%20%D8%A7%D9%84%D8%B1%D8%AF%20%D8%B3%D8%B1%D9%8A%D8%B9%D8%A7%20%D9%84%D9%8A%D8%AA%D9%85%20%D8%AA%D9%88%D8%B5%D9%8A%D9%84%20%D8%B4%D8%AD%D9%86%D8%AA%D9%83%20"+e.reference_number+"%20%D9%81%D9%8A%20%D8%AD%D8%A7%D9%84%20%D9%84%D9%85%20%D9%8A%D8%AA%D9%85%20%D8%A7%D9%84%D8%B1%D8%AF%20%D8%B3%D8%B1%D9%8A%D8%B9%D8%A7%D8%8C%20%D8%B3%D8%AA%D8%AA%D9%85%20%D8%A5%D8%B9%D8%A7%D8%AF%D8%A9%20%D8%A7%D9%84%D8%AC%D8%AF%D9%88%D9%84%D8%A9%20%D9%84%D9%8A%D9%88%D9%85%20%D8%A7%D9%84%D8%B9%D9%85%D9%84%20%D8%A7%D9%84%D9%82%D8%A7%D8%AF%D9%85%D8%8C%20%D9%88%D8%B4%D9%83%D8%B1%D8%A7%D8%8C%0A"}}))),t},Ft=function(e){var t=Et(),n=e.numSelected,r=e.selectedRows,c=(e.data,Object(a.useState)(!1)),i=Object(s.a)(c,2);i[0],i[1];function o(e){return b.apply(this,arguments)}function b(){return b=Object(k.a)(B.a.mark((function e(t){var n,a,c;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.a.post("".concat(O.API_ROOT,"/rfdexport"),{reference_number:Object(N.a)(r)});case 2:n=e.sent,a=n.data,c=Tt(a),Bt(t,c);case 6:case"end":return e.stop()}}),e)}))),b.apply(this,arguments)}return Object(g.jsxs)(M.a,{className:Object(P.a)(t.root,Object(l.a)({},t.highlight,n>0)),children:[n>0?Object(g.jsxs)(u.a,{className:t.title,color:"inherit",variant:"subtitle1",component:"div",children:[n," selected"]}):Object(g.jsx)(u.a,{className:t.title,variant:"h6",id:"tableTitle",component:"div",children:"Warehouses"}),n>0?Object(g.jsx)(Y.a,{title:"",children:Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(d.a,{container:!0,children:Object(g.jsx)(j.a,{onClick:Object(k.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o("csv");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),className:t.marginL1,variant:"contained",children:"Export CSV"})})})}):Object(g.jsx)(Y.a,{title:"Filter list",children:Object(g.jsx)(z.a,{"aria-label":"filter list",children:Object(g.jsx)(Q.a,{})})})]})},Rt=Object(m.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:750},ml1:{marginLeft:"1rem"},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}}));function Ht(e){var t=e.Display,n=e.setWarehouse,c=Object(a.useState)([]),i=Object(s.a)(c,2),l=i[0],d=i[1],u=Rt(),b=r.a.useState("asc"),h=Object(s.a)(b,2),m=h[0],p=h[1],f=r.a.useState("managerID"),x=Object(s.a)(f,2),v=x[0],A=x[1],y=r.a.useState([]),w=Object(s.a)(y,2),S=w[0],C=w[1],I=r.a.useState(0),P=Object(s.a)(I,2),_=P[0],H=P[1],q=r.a.useState(!1),M=Object(s.a)(q,2),U=M[0],Y=M[1],Z=r.a.useState(200),Q=Object(s.a)(Z,2),J=Q[0],G=Q[1],$=Object(a.useState)(!1),ee=Object(s.a)($,2),ne=ee[0],re=ee[1],ie=J-Math.min(J,l.length-_*J),se=function(){var e=Object(k.a)(B.a.mark((function e(t,n){var a,r,c;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=sessionStorage.getItem("token"),r=oe.a.stringify({employeeID:sessionStorage.getItem("userId")},{skipEmptyString:!0,skipNull:!0}),c=[],D.a.get("".concat(O.API_ROOT,"/api/logisticManager/viewWarehouses").concat(r?"?".concat(r):""),{headers:{Authorization:"Bearer ".concat(a)}}).then((function(e){c=e.data;var t=[];Array.isArray(c)&&(t=c.map((function(e,t){return Object(o.a)(Object(o.a)({},e),{},{managerID:e.managerID,isEditMode:!1})}))),d(Object(N.a)(t))}));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){se()}),[]);le=l[0];var le,de,ue,je,be,he,me,pe,De,Oe=r.a.useState({open:!1,message:""}),ge=Object(s.a)(Oe,2),fe=ge[0],xe=ge[1],ve=function(e,t){"clickaway"!==t&&xe({open:!1,message:""})},Ae=r.a.useState({}),ye=Object(s.a)(Ae,2),we=(ye[0],ye[1]),Se=function(){var e=Object(k.a)(B.a.mark((function e(t){var n,a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.a.post("".concat(O.API_ROOT,"/newlocation"),{reference_number:t.reference_number,coord:t.coord});case 2:n=e.sent,200!==(a=n.data).statusCode&&xe({open:!0,message:a.message});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(g.jsxs)("div",{className:u.root,children:["View"===t?Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(j.a,{variant:"contained",color:"secondary",className:u.spacing,onClick:function(){return re(!0)},children:"add Dispatcher"})}):Object(g.jsx)(g.Fragment,{}),Object(g.jsx)(Le,{open:ne,onClose:function(){return re(!1)}}),Object(g.jsxs)(W.a,{className:u.paper,children:[Object(g.jsx)(Ft,{numSelected:S.length,data:l,selectedRows:Object(N.a)(S)}),Object(g.jsx)(R.a,{children:Object(g.jsxs)(E.a,{className:u.table,"aria-labelledby":"tableTitle",size:U?"small":"medium","aria-label":"enhanced table",children:[Object(g.jsx)(_t,{classes:u,numSelected:S.length,order:m,orderBy:v,onSelectAllClick:function(e){if(e.target.checked){var t=l.map((function(e){return e.ID}));C(t)}else C([])},onRequestSort:function(e,t){p(v===t&&"asc"===m?"desc":"asc"),A(t)},rowCount:l.length,Display:t}),Object(g.jsxs)(T.a,{children:[It(l,kt(m,v)).slice(_*J,_*J+J).map((function(e,a){var r=function(e){return-1!==S.indexOf(e)}(e.managerID),c="enhanced-table-checkbox-".concat(a);return Object(g.jsxs)(V.a,{hover:!0,role:"checkbox","aria-checked":r,tabIndex:-1,selected:r,children:["View"===t?Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(F.a,{align:"center",children:Object(g.jsx)(j.a,{variant:"contained",color:"secondary",className:u.spacing,onClick:function(){},children:"View"})},"action"),Object(g.jsx)(F.a,{align:"center",children:Object(g.jsx)(z.a,{"aria-label":"delete",onClick:function(){return function(e,t){var n=l.filter((function(t){return t.id==e}))[0];"Save"!=t||n.coord?(d((function(t){return l.map((function(t){return t.id===e?Object(o.a)(Object(o.a)({},t),{},{isEditMode:!t.isEditMode}):t}))})),"Save"==t&&(Se(Object(o.a)({},n)),we([]))):xe({open:!0,message:"Coord is not allowed to be empty"})}(e.managerID,"Edit")},children:Object(g.jsx)(ae.a,{})})},"action")]}):Object(g.jsx)(F.a,{align:"center",children:Object(g.jsx)(j.a,{variant:"contained",color:"secondary",className:u.spacing,onClick:function(){console.log("".concat(e.managerID," in assing warehouse manage")),n(e.managerID)},children:"Assign"})},"action"),Object(g.jsx)(F.a,{component:"th",id:c,scope:"row",padding:"none",align:"center",children:e.managerID||"-"}),Object(g.jsx)(F.a,{align:"center",children:e.warehouseID||"-"})," ",Object(g.jsx)(F.a,{align:"center",children:e.location||"-"})," "]},e.managerID)})),ie>0&&Object(g.jsx)(V.a,{style:{height:(U?33:53)*ie},children:Object(g.jsx)(F.a,{colSpan:6})})]})]})}),Object(g.jsx)(L.a,{rowsPerPageOptions:[100,200,300],component:"div",count:l.length,rowsPerPage:J,page:_,onChangePage:function(e,t){H(t)},onChangeRowsPerPage:function(e){G(parseInt(e.target.value,10)),H(0)}})]}),Object(g.jsx)(te.a,{open:fe.open,autoHideDuration:3e3,onClose:ve,children:Object(g.jsx)(ce,{onClose:ve,severity:"error",children:fe.message})}),Object(g.jsx)(K.a,{control:Object(g.jsx)(X.a,{checked:U,onChange:function(e){Y(e.target.checked)}}),label:"Dense padding"})]})}var Lt=function(){var e=Object(a.useState)("View Shipments"),t=Object(s.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)({filter:null,shipment:[]}),i=Object(s.a)(c,2),o=i[0],l=i[1],d=Object(a.useState)(null),u=Object(s.a)(d,2),j=u[0],b=u[1],h=Object(a.useState)(null),m=Object(s.a)(h,2),p=m[0],f=m[1],x=function(){var e=Object(k.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("in post request"),t=JSON.stringify({shipmentID:o.shipment,warehouseManagerID:j,dispatcherID:p,employeeID:sessionStorage.getItem("userId"),deliveryStatus:"NEW"===o.filter?"ONDELIVERY":"TOSTORE"}),D.a.post("".concat(O.API_ROOT,"/api/logisticManager/assignShipmentsToDispatcher"),t,{headers:{Authorization:"Bearer ".concat(sessionStorage.getItem("token")),"Content-Type":"application/json"}}).then((function(e){"SUCCESS"===e.data.status&&(console.log("assigned successfully!!"),f(null),b(null),l({filter:null,shipment:[]}))}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){console.log(j),o.shipment.length>0&&null===p?r("View Dispatchers"):null!==p&&null===j?r("View Warehouses"):0===o.shipment.length?r("View Shipments"):null!==p&&null!==j&&o.shipment.length>0&&(console.log(j),x())}),[p,j,o]),"View Dispatchers"===n?Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(Qe,{setDispatcher:f,Display:"Assign"})}):"View Warehouses"===n?Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(Ht,{setWarehouse:b})}):Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(Ct,{setShipments:l,filters:["NEW","STORED"]})})};var Vt=function(){var e=Object(a.useState)("View Shipments"),t=Object(s.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)({filter:null,shipment:[]}),i=Object(s.a)(c,2),o=i[0],l=i[1],d=Object(a.useState)(null),u=Object(s.a)(d,2),j=u[0],b=u[1],h=function(){var e=Object(k.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("in post request"),t=JSON.stringify({shipmentID:o.shipment,warehouseManagerID:null,dispatcherID:j,employeeID:sessionStorage.getItem("userId"),deliveryStatus:"TOPICKUP"}),D.a.post("".concat(O.API_ROOT,"/api/logisticManager/assignShipmentsToDispatcher"),t,{headers:{Authorization:"Bearer ".concat(sessionStorage.getItem("token")),"Content-Type":"application/json"}}).then((function(e){"SUCCESS"===e.data.status&&(console.log("assigned successfully!!"),b(null),l([]))}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){o.shipment.length>0&&null===j?r("View Dispatchers"):0===o.shipment.length?r("View Shipments"):null!==j&&o.shipment.length>0&&h()}),[j,o]),"View Dispatchers"===n?Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(Qe,{setDispatcher:b,Display:"Assign"})}):Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(Ct,{setShipments:l,filters:["STORED"]})})};var qt=function(){return Object(g.jsx)(v.a,{theme:S,children:Object(g.jsxs)(A.a,{children:[Object(g.jsx)(C.a,{routes:[{name:"To Warehouse",link:"/toWarehouse",activeIndex:0},{name:"To Consignee",link:"/toConsignee",activeIndex:1},{name:"Dispatchers",link:"/",activeIndex:2},{name:"Warehouse Managers",link:"/WM",activeIndex:3}]}),Object(g.jsxs)(y.c,{children:[Object(g.jsx)(y.a,{exact:!0,path:"/toWarehouse",children:Object(g.jsx)(Lt,{})}),Object(g.jsx)(y.a,{exact:!0,path:"/toConsignee",children:Object(g.jsx)(Vt,{})}),Object(g.jsxs)(y.a,{exact:!0,path:"/",children:[" ",Object(g.jsx)(Qe,{Display:"View"})," "]}),Object(g.jsxs)(y.a,{exact:!0,path:"/WM",children:[" ",Object(g.jsx)(mt,{})," "]})]})]})})};D.a.create({baseURL:"http://localhost:5001"}),n(115),n(73),n(74),Object(m.a)((function(e){return{tableCell:{width:130,height:40},input:{width:130,height:40},inputLarge:{width:140,height:40}}}));Object(m.a)((function(e){return{root:{paddingLeft:e.spacing(2),paddingRight:e.spacing(1)},highlight:"light"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(_.f)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},title:{flex:"1 1 100%"}}})),Object(m.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:750},tableCell:{width:130,height:40},input:{width:130,height:40},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}}));Object(m.a)((function(e){return{root:{paddingLeft:e.spacing(2),paddingRight:e.spacing(1)},highlight:"light"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(_.f)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},title:{flex:"1 1 100%"}}})),Object(m.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:750},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}}));Object(m.a)((function(e){return{root:{paddingLeft:e.spacing(2),paddingRight:e.spacing(1)},highlight:"light"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(_.f)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},title:{flex:"1 1 100%"}}})),Object(m.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:750},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}}));n(181),n(63),n(316),Object(m.a)((function(e){return{tableCell:{width:130,height:40},datePicker:{marginTop:"5px !important"},input:{width:130,height:40},inputLarge:{width:140,height:40}}}));Object(m.a)((function(e){return{root:{paddingLeft:e.spacing(2),paddingRight:e.spacing(1)},highlight:"light"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(_.f)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},title:{flex:"1 1 100%"}}})),Object(m.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:750},tableCell:{width:130,height:40},input:{width:130,height:40},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}}));Object(m.a)((function(e){return{root:{paddingLeft:e.spacing(2),paddingRight:e.spacing(1)},highlight:"light"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(_.f)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},title:{flex:"1 1 100%"}}})),Object(m.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:750},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}}));var Mt={position:"absolute",top:"100%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"#ffffff",padding:"40px",zIndex:1e3,width:"50%",height:"70%",borderRadius:"1em",display:"inline-table"},Wt={position:"fixed",display:"flex",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, .7)",zIndex:1e3,height:"100%",width:"100%",overflowY:"auto"},Ut=Object(m.a)({h5:{color:"white"}});function zt(e){var t=e.open,n=e.children,r=e.onClose,c=Object(a.useState)(!0),l=Object(s.a)(c,2),h=l[0],m=(l[1],Object(a.useState)("")),p=Object(s.a)(m,2),f=(p[0],p[1],Object(a.useState)("")),x=Object(s.a)(f,2),v=(x[0],x[1],Object(a.useState)("None")),A=Object(s.a)(v,2),y=(A[0],A[1],Object(a.useState)(null)),w=Object(s.a)(y,2),S=(w[0],w[1],Object(a.useState)([])),C=Object(s.a)(S,2),N=(C[0],C[1],Object(a.useState)({firstName:"",lastName:"",email:"",phoneNumber:"",password:"",telephone:"",roomNumber:"",location:""})),I=Object(s.a)(N,2),P=I[0],_=I[1],E=Ut(),T=function(){var e=Object(k.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=JSON.stringify({employeeID:sessionStorage.getItem("userId"),firstName:P.firstName,lastName:P.lastName,email:P.email,password:P.password,phoneNumber:P.phoneNumber,office:{telephone:P.telephone,roomNumber:P.roomNumber,location:P.location}}),console.log(t),D.a.post("".concat(O.API_ROOT,"/api/administrator/addfcustomerService"),t,{headers:{Authorization:"Bearer token","Content-Type":"application/json"}}).then((function(e){console.log(e),"SUCCESS"===e.data.status&&r()})).catch((function(e){Object(pe.a)(!1)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return t?i.a.createPortal(Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("div",{style:Wt}),Object(g.jsxs)("div",{style:Mt,children:[Object(g.jsxs)(d.a,{container:!0,spacing:1,style:{minWidth:"70vw",minHeight:"100vh"},direction:"column",children:[Object(g.jsx)(d.a,{container:!0,direction:"row",style:{minHeight:"40vh",minWidth:"62vw"},id:"DispatcherDetails",children:Object(g.jsxs)(d.a,{container:!0,spacing:3,direction:"column",alignItems:"left",justify:"top",lg:4,xl:3,style:{minHeight:"20vh"},children:[Object(g.jsx)(d.a,{style:{minHeight:"13vh"},item:!0,id:"AddDispatcher",children:Object(g.jsx)(u.a,{color:"secondary",variant:"h3",children:"Add Customer Service"})}),Object(g.jsx)(d.a,{item:!0,id:"personalLabel",children:Object(g.jsx)(u.a,{color:"primary",variant:"h5",children:"personal Details:"})}),Object(g.jsx)(d.a,{item:!0,id:"personalDetails",children:Object(g.jsxs)(d.a,{direction:"column",spacing:4,children:[Object(g.jsxs)(d.a,{container:!0,direction:"row",spacing:2,id:"ContactInfo",children:[Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(b.a,{required:!0,color:"primary",error:!h,id:"firstName",label:"First Name",onChange:function(e){return _((function(t){return Object(o.a)(Object(o.a)({},t),{},{firstName:e.target.value})}))},value:P.firstName})}),Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(b.a,{required:!0,color:"primary",error:!h,id:"lastName",label:"Last Name",onChange:function(e){return _((function(t){return Object(o.a)(Object(o.a)({},t),{},{lastName:e.target.value})}))},value:P.lastName})}),Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(b.a,{required:!0,color:"primary",error:!h,id:"phoneNumber",label:"Phone Number",onChange:function(e){_((function(t){return Object(o.a)(Object(o.a)({},t),{},{phoneNumber:e.target.value})}))},value:P.phoneNumber})})]}),Object(g.jsxs)(d.a,{container:!0,direction:"row",spacing:2,id:"credentials",children:[Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(b.a,{required:!0,color:"primary",error:!h,id:"email",label:"Email",onChange:function(e){return _((function(t){return Object(o.a)(Object(o.a)({},t),{},{email:e.target.value})}))},value:P.email})}),Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(b.a,{required:!0,color:"primary",error:!h,id:"password",label:"Password",onChange:function(e){return _((function(t){return Object(o.a)(Object(o.a)({},t),{},{password:e.target.value})}))},value:P.password})})]})]})}),Object(g.jsx)(d.a,{item:!0,id:"addressLabel",children:Object(g.jsx)(u.a,{color:"primary",variant:"h5",children:"Address:"})}),Object(g.jsx)(d.a,{item:!0,id:"",children:Object(g.jsx)(b.a,{required:!0,color:"primary",error:!h,id:"firstName",label:"landline",onChange:function(e){return _((function(t){return Object(o.a)(Object(o.a)({},t),{},{telephone:e.target.value})}))},value:P.telephone})}),Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(b.a,{required:!0,color:"primary",error:!h,id:"roomNumber",label:"Room Number",onChange:function(e){return _((function(t){return Object(o.a)(Object(o.a)({},t),{},{roomNumber:e.target.value})}))},value:P.roomNumber})}),Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(b.a,{required:!0,color:"primary",error:!h,id:"location",label:"Location",onChange:function(e){return _((function(t){return Object(o.a)(Object(o.a)({},t),{},{location:e.target.value})}))},value:P.location})})]})}),Object(g.jsxs)(d.a,{container:!0,spacing:2,direction:"row",id:"Buttons",children:[Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(j.a,{variant:"contained",color:"secondary",className:E.spacing,onClick:r,sx:{p:2},children:"Cancel"})}),Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(j.a,{variant:"contained",color:"secondary",className:E.spacing,onClick:T,children:"add Customer Service"})})]})]}),n]})]}),document.getElementById("portal")):null}function Yt(e,t,n){return t[n]<e[n]?-1:t[n]>e[n]?1:0}function Kt(e,t){return"desc"===e?function(e,n){return Yt(e,n,t)}:function(e,n){return-Yt(e,n,t)}}function Xt(e,t){var n=e.map((function(e,t){return[e,t]}));return n.sort((function(e,n){var a=t(e[0],n[0]);return 0!==a?a:e[1]-n[1]})),n.map((function(e){return e[0]}))}function Zt(e,t){var n=".".concat(e),a=new Date,r="routifics_".concat(a.getDate()).concat(a.getMonth()).concat(a.getFullYear(),"_").concat(a.getTime()),c={Sheets:{data:G.a.utils.json_to_sheet(t)},SheetNames:["data"]},i=G.a.write(c,{bookType:"".concat(e),type:"array"}),o=new Blob([i],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});ee.a.saveAs(o,r+n)}var Qt=[{id:"employeeID",numeric:!0,disablePadding:!1,label:"ID"},{id:"firstName",numeric:!1,disablePadding:!1,label:"First Name"},{id:"lastName",numeric:!1,disablePadding:!1,label:"Last Name"},{id:"phoneNumber",numeric:!0,disablePadding:!1,label:"phone Number"},{id:"telephone",numeric:!0,disablePadding:!1,label:"telephone"},{id:"loc",numeric:!0,disablePadding:!1,label:"Location"}];function Jt(e){var t=e.classes,n=(e.onSelectAllClick,e.order),a=e.orderBy,r=(e.numSelected,e.rowCount,e.onRequestSort);return Object(g.jsx)(H.a,{children:Object(g.jsxs)(V.a,{children:[Object(g.jsx)(F.a,{align:"center",className:t.tableCell,children:"Details"},"action"),Object(g.jsx)(F.a,{align:"center",className:t.tableCell,children:"Cancel Order"},"action"),Qt.map((function(e){return Object(g.jsx)(F.a,{align:"center",padding:e.disablePadding?"none":"default",sortDirection:a===e.id&&n,children:Object(g.jsxs)(q.a,{active:a===e.id,direction:a===e.id?n:"asc",onClick:(c=e.id,function(e){r(e,c)}),children:[e.label,a===e.id?Object(g.jsx)("span",{className:t.visuallyHidden,children:"desc"===n?"sorted descending":"sorted ascending"}):null]})},e.id);var c}))]})})}var Gt=Object(m.a)((function(e){return{root:{paddingLeft:e.spacing(2),paddingRight:e.spacing(1)},highlight:"light"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(_.f)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},marginL1:{marginLeft:"1rem"},title:{flex:"1 1 100%"}}})),$t=function(e){var t=[];return Array.isArray(e)&&(t=e.map((function(e){return{reference_number:e.reference_number,coord:e.locations&&e.locations.length>0?e.locations[0].coord:null,from:e.routifics&&e.routifics.length>0?e.routifics[0].from:null,to:e.routifics&&e.routifics.length>0?e.routifics[0].to:null,aging:"7",load:null,destination_phone:e.destination_phone,email:null,service_type:e.service_type,priority:"yes",destination_name:e.destination_name,cod_amount:e.cod_amount,customer_reference_number:e.customer_reference_number,whatsapp_link:"http://wa.me/"+e.destination_phone,whatsapp_location:"http://wa.me/"+e.destination_phone+"?text=%D9%85%D8%B1%D8%AD%D8%A8%D8%A7%20"+e.destination_name.split(" ").slice(0,2).join("%20")+"%20%D9%85%D8%B9%D8%A7%D9%83%20%D9%85%D9%86%D8%AF%D9%88%D8%A8%20%D8%B4%D8%B1%D9%83%D8%A9%20%D9%85%D8%AD%D9%85%D9%88%D9%84%D8%8C%20%D8%A7%D8%B1%D8%AC%D9%88%20%D8%A5%D8%B1%D8%B3%D8%A7%D9%84%20%D8%A7%D9%84%D9%84%D9%88%D9%83%D9%8A%D8%B4%D9%86%20%D9%84%D9%8A%D8%AA%D9%85%20%D8%AA%D9%88%D8%B5%D9%8A%D9%84%20%D8%B4%D8%AD%D9%86%D8%AA%D9%83%20%D8%A8%D8%B1%D9%82%D9%85%20"+e.reference_number,whatsapp_no_answer:"http://wa.me/"+e.destination_phone+"?text=%D9%85%D8%B1%D8%AD%D8%A8%D8%A7%20"+e.destination_name.split(" ").slice(0,2).join("%20")+"%20%D9%85%D8%B9%D8%A7%D9%83%20%D9%85%D9%86%D8%AF%D9%88%D8%A8%20%D8%B4%D8%B1%D9%83%D8%A9%20%D9%85%D8%AD%D9%85%D9%88%D9%84%D8%8C%20%D8%A7%D9%86%D8%A7%20%D9%82%D8%B1%D9%8A%D8%A8%20%D9%85%D9%86%20%D8%A7%D9%84%D9%85%D9%88%D9%82%D8%B9%20%D9%88%D8%AA%D9%85%D8%AA%20%D9%85%D8%AD%D8%A7%D9%88%D9%84%D8%A9%20%D8%A7%D9%84%D8%A7%D8%AA%D8%B5%D8%A7%D9%84%D8%8C%20%D9%86%D8%B1%D8%AC%D9%88%20%D8%A7%D9%84%D8%B1%D8%AF%20%D8%B3%D8%B1%D9%8A%D8%B9%D8%A7%20%D9%84%D9%8A%D8%AA%D9%85%20%D8%AA%D9%88%D8%B5%D9%8A%D9%84%20%D8%B4%D8%AD%D9%86%D8%AA%D9%83%20"+e.reference_number+"%20%D9%81%D9%8A%20%D8%AD%D8%A7%D9%84%20%D9%84%D9%85%20%D9%8A%D8%AA%D9%85%20%D8%A7%D9%84%D8%B1%D8%AF%20%D8%B3%D8%B1%D9%8A%D8%B9%D8%A7%D8%8C%20%D8%B3%D8%AA%D8%AA%D9%85%20%D8%A5%D8%B9%D8%A7%D8%AF%D8%A9%20%D8%A7%D9%84%D8%AC%D8%AF%D9%88%D9%84%D8%A9%20%D9%84%D9%8A%D9%88%D9%85%20%D8%A7%D9%84%D8%B9%D9%85%D9%84%20%D8%A7%D9%84%D9%82%D8%A7%D8%AF%D9%85%D8%8C%20%D9%88%D8%B4%D9%83%D8%B1%D8%A7%D8%8C%0A"}}))),t},en=function(e){var t=Gt(),n=e.numSelected,r=e.selectedRows,c=(e.data,Object(a.useState)(!1)),i=Object(s.a)(c,2);i[0],i[1];function o(e){return b.apply(this,arguments)}function b(){return b=Object(k.a)(B.a.mark((function e(t){var n,a,c;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.a.post("".concat(O.API_ROOT,"/rfdexport"),{reference_number:Object(N.a)(r)});case 2:n=e.sent,a=n.data,c=$t(a),Zt(t,c);case 6:case"end":return e.stop()}}),e)}))),b.apply(this,arguments)}return Object(g.jsxs)(M.a,{className:Object(P.a)(t.root,Object(l.a)({},t.highlight,n>0)),children:[n>0?Object(g.jsxs)(u.a,{className:t.title,color:"inherit",variant:"subtitle1",component:"div",children:[n," selected"]}):Object(g.jsx)(u.a,{className:t.title,variant:"h6",id:"tableTitle",component:"div",children:"Customer Service"}),n>0?Object(g.jsx)(Y.a,{title:"",children:Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(d.a,{container:!0,children:Object(g.jsx)(j.a,{onClick:Object(k.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o("csv");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),className:t.marginL1,variant:"contained",children:"Export CSV"})})})}):Object(g.jsx)(Y.a,{title:"Filter list",children:Object(g.jsx)(z.a,{"aria-label":"filter list",children:Object(g.jsx)(Q.a,{})})})]})},tn=Object(m.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:750},ml1:{marginLeft:"1rem"},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}}));function nn(){var e=Object(a.useState)([]),t=Object(s.a)(e,2),n=t[0],c=t[1],i=tn(),l=r.a.useState("asc"),d=Object(s.a)(l,2),u=d[0],b=d[1],h=r.a.useState("employeeID"),m=Object(s.a)(h,2),p=m[0],f=m[1],x=r.a.useState([]),v=Object(s.a)(x,2),A=v[0],y=v[1],w=r.a.useState(0),S=Object(s.a)(w,2),C=S[0],I=S[1],P=r.a.useState(!1),_=Object(s.a)(P,2),H=_[0],q=_[1],M=r.a.useState(200),U=Object(s.a)(M,2),Y=U[0],Z=U[1],Q=Object(a.useState)(!1),J=Object(s.a)(Q,2),G=J[0],$=J[1],ee=Y-Math.min(Y,n.length-C*Y),ne=function(){var e=Object(k.a)(B.a.mark((function e(t,n){var a,r,i;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=sessionStorage.getItem("token"),r=oe.a.stringify({employeeID:sessionStorage.getItem("userId")},{skipEmptyString:!0,skipNull:!0}),i=[],D.a.get("".concat(O.API_ROOT,"/api/administrator/viewCustomerService").concat(r?"?".concat(r):""),{headers:{Authorization:"Bearer ".concat(a)}}).then((function(e){console.log(e.data),i=e.data;var t=[];console.log("is Array"),Array.isArray(i)&&(t=i.map((function(e,t){return Object(o.a)(Object(o.a)({},e),{},{employeeID:e.employeeID,isEditMode:!1})}))),console.log(t),c(Object(N.a)(t))})),console.log(i);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){ne(),console.log(n)}),[]);re=n[0];var re,ie,se,le,de,ue,je,be,he,me=r.a.useState({open:!1,message:""}),pe=Object(s.a)(me,2),De=pe[0],Oe=pe[1],ge=function(e,t){"clickaway"!==t&&Oe({open:!1,message:""})},fe=r.a.useState({}),xe=Object(s.a)(fe,2),ve=(xe[0],xe[1]),Ae=function(){var e=Object(k.a)(B.a.mark((function e(t){var n,a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.a.post("".concat(O.API_ROOT,"/newlocation"),{reference_number:t.reference_number,coord:t.coord});case 2:n=e.sent,200!==(a=n.data).statusCode&&Oe({open:!0,message:a.message});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){}),[]),Object(g.jsxs)("div",{className:i.root,children:[Object(g.jsx)(et,{handleFilters:function(e,t){return ne(e,t)}}),Object(g.jsx)(j.a,{variant:"contained",color:"secondary",className:i.spacing,onClick:function(){return $(!0)},children:"add Customer Service"}),Object(g.jsx)(zt,{open:G,onClose:function(){return $(!1)}}),Object(g.jsxs)(W.a,{className:i.paper,children:[Object(g.jsx)(en,{numSelected:A.length,data:n,selectedRows:Object(N.a)(A)}),Object(g.jsx)(R.a,{children:Object(g.jsxs)(E.a,{className:i.table,"aria-labelledby":"tableTitle",size:H?"small":"medium","aria-label":"enhanced table",children:[Object(g.jsx)(Jt,{classes:i,numSelected:A.length,order:u,orderBy:p,onSelectAllClick:function(e){if(e.target.checked){var t=n.map((function(e){return e.ID}));y(t)}else y([])},onRequestSort:function(e,t){b(p===t&&"asc"===u?"desc":"asc"),f(t)},rowCount:n.length}),Object(g.jsxs)(T.a,{children:[Xt(n,Kt(u,p)).slice(C*Y,C*Y+Y).map((function(e,t){var a=function(e){return-1!==A.indexOf(e)}(e.employeeID),r="enhanced-table-checkbox-".concat(t);return Object(g.jsxs)(V.a,{hover:!0,role:"checkbox","aria-checked":a,tabIndex:-1,selected:a,children:[Object(g.jsx)(F.a,{align:"center",children:Object(g.jsx)(j.a,{variant:"contained",color:"secondary",className:i.spacing,onClick:function(){},children:"View"})},"action"),Object(g.jsx)(F.a,{align:"center",children:Object(g.jsx)(z.a,{"aria-label":"delete",onClick:function(){return function(e,t){var a=n.filter((function(t){return t.id==e}))[0];"Save"!=t||a.coord?(c((function(t){return n.map((function(t){return t.id===e?Object(o.a)(Object(o.a)({},t),{},{isEditMode:!t.isEditMode}):t}))})),"Save"==t&&(Ae(Object(o.a)({},a)),ve([]))):Oe({open:!0,message:"Coord is not allowed to be empty"})}(e.employeeID,"Edit")},children:Object(g.jsx)(ae.a,{})})},"action"),Object(g.jsx)(F.a,{component:"th",id:r,scope:"row",padding:"none",align:"center",children:e.employeeID||"-"}),Object(g.jsx)(F.a,{align:"center",children:e.firstName||"-"})," ",Object(g.jsx)(F.a,{align:"center",children:e.lastName||"-"})," ",Object(g.jsx)(F.a,{align:"center",children:e.phoneNumber||"-"})," ",Object(g.jsx)(F.a,{align:"center",children:e.telephone||"-"})," ",Object(g.jsx)(F.a,{align:"center",children:e.location||"-"})," "]},e.employeeID)})),ee>0&&Object(g.jsx)(V.a,{style:{height:(H?33:53)*ee},children:Object(g.jsx)(F.a,{colSpan:6})})]})]})}),Object(g.jsx)(L.a,{rowsPerPageOptions:[100,200,300],component:"div",count:n.length,rowsPerPage:Y,page:C,onChangePage:function(e,t){I(t)},onChangeRowsPerPage:function(e){Z(parseInt(e.target.value,10)),I(0)}})]}),Object(g.jsx)(te.a,{open:De.open,autoHideDuration:3e3,onClose:ge,children:Object(g.jsx)(ce,{onClose:ge,severity:"error",children:De.message})}),Object(g.jsx)(K.a,{control:Object(g.jsx)(X.a,{checked:H,onChange:function(e){q(e.target.checked)}}),label:"Dense padding"})]})}var an={position:"absolute",top:"100%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"#ffffff",padding:"40px",zIndex:1e3,width:"50%",height:"70%",borderRadius:"1em",display:"inline-table"},rn={position:"fixed",display:"flex",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, .7)",zIndex:1e3,height:"100%",width:"100%",overflowY:"auto"},cn=Object(m.a)({h5:{color:"white"}});function on(e){var t=e.open,n=e.children,r=e.onClose,c=Object(a.useState)(!0),l=Object(s.a)(c,2),h=l[0],m=(l[1],Object(a.useState)("")),p=Object(s.a)(m,2),f=(p[0],p[1],Object(a.useState)("")),x=Object(s.a)(f,2),v=(x[0],x[1],Object(a.useState)("None")),A=Object(s.a)(v,2),y=(A[0],A[1],Object(a.useState)(null)),w=Object(s.a)(y,2),S=(w[0],w[1],Object(a.useState)([])),C=Object(s.a)(S,2),N=(C[0],C[1],Object(a.useState)({firstName:"",lastName:"",email:"",phoneNumber:"",password:"",telephone:"",roomNumber:"",location:""})),I=Object(s.a)(N,2),P=I[0],_=I[1],E=cn(),T=function(){var e=Object(k.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=JSON.stringify({employeeID:sessionStorage.getItem("userId"),firstName:P.firstName,lastName:P.lastName,email:P.email,password:P.password,phoneNumber:P.phoneNumber,office:{telephone:P.telephone,roomNumber:P.roomNumber,location:P.location}}),console.log(t),D.a.post("".concat(O.API_ROOT,"/api/administrator/addaccountant"),t,{headers:{Authorization:"Bearer token","Content-Type":"application/json"}}).then((function(e){console.log(e),"SUCCESS"===e.data.status&&r()})).catch((function(e){Object(pe.a)(!1)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return t?i.a.createPortal(Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("div",{style:rn}),Object(g.jsxs)("div",{style:an,children:[Object(g.jsxs)(d.a,{container:!0,spacing:1,style:{minWidth:"70vw",minHeight:"100vh"},direction:"column",children:[Object(g.jsx)(d.a,{container:!0,direction:"row",style:{minHeight:"40vh",minWidth:"62vw"},id:"AccountantDetails",children:Object(g.jsxs)(d.a,{container:!0,spacing:3,direction:"column",alignItems:"left",justify:"top",lg:4,xl:3,style:{minHeight:"20vh"},children:[Object(g.jsx)(d.a,{style:{minHeight:"13vh"},item:!0,id:"AddAccountant",children:Object(g.jsx)(u.a,{color:"secondary",variant:"h3",children:"Add Accountant"})}),Object(g.jsx)(d.a,{item:!0,id:"personalLabel",children:Object(g.jsx)(u.a,{color:"primary",variant:"h5",children:"personal Details:"})}),Object(g.jsx)(d.a,{item:!0,id:"personalDetails",children:Object(g.jsxs)(d.a,{direction:"column",spacing:4,children:[Object(g.jsxs)(d.a,{container:!0,direction:"row",spacing:2,id:"ContactInfo",children:[Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(b.a,{required:!0,color:"primary",error:!h,id:"firstName",label:"First Name",onChange:function(e){return _((function(t){return Object(o.a)(Object(o.a)({},t),{},{firstName:e.target.value})}))},value:P.firstName})}),Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(b.a,{required:!0,color:"primary",error:!h,id:"lastName",label:"Last Name",onChange:function(e){return _((function(t){return Object(o.a)(Object(o.a)({},t),{},{lastName:e.target.value})}))},value:P.lastName})}),Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(b.a,{required:!0,color:"primary",error:!h,id:"phoneNumber",label:"Phone Number",onChange:function(e){_((function(t){return Object(o.a)(Object(o.a)({},t),{},{phoneNumber:e.target.value})}))},value:P.phoneNumber})})]}),Object(g.jsxs)(d.a,{container:!0,direction:"row",spacing:2,id:"credentials",children:[Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(b.a,{required:!0,color:"primary",error:!h,id:"email",label:"Email",onChange:function(e){return _((function(t){return Object(o.a)(Object(o.a)({},t),{},{email:e.target.value})}))},value:P.email})}),Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(b.a,{required:!0,color:"primary",error:!h,id:"password",label:"Password",onChange:function(e){return _((function(t){return Object(o.a)(Object(o.a)({},t),{},{password:e.target.value})}))},value:P.password})})]})]})}),Object(g.jsx)(d.a,{item:!0,id:"addressLabel",children:Object(g.jsx)(u.a,{color:"primary",variant:"h5",children:"Address:"})}),Object(g.jsx)(d.a,{item:!0,id:"",children:Object(g.jsx)(b.a,{required:!0,color:"primary",error:!h,id:"firstName",label:"landline",onChange:function(e){return _((function(t){return Object(o.a)(Object(o.a)({},t),{},{telephone:e.target.value})}))},value:P.telephone})}),Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(b.a,{required:!0,color:"primary",error:!h,id:"roomNumber",label:"Room Number",onChange:function(e){return _((function(t){return Object(o.a)(Object(o.a)({},t),{},{roomNumber:e.target.value})}))},value:P.roomNumber})}),Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(b.a,{required:!0,color:"primary",error:!h,id:"location",label:"Location",onChange:function(e){return _((function(t){return Object(o.a)(Object(o.a)({},t),{},{location:e.target.value})}))},value:P.location})})]})}),Object(g.jsxs)(d.a,{container:!0,spacing:2,direction:"row",id:"Buttons",children:[Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(j.a,{variant:"contained",color:"secondary",className:E.spacing,onClick:r,sx:{p:2},children:"Cancel"})}),Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(j.a,{variant:"contained",color:"secondary",className:E.spacing,onClick:T,children:"add Accountant"})})]})]}),n]})]}),document.getElementById("portal")):null}function sn(e,t,n){return t[n]<e[n]?-1:t[n]>e[n]?1:0}function ln(e,t){return"desc"===e?function(e,n){return sn(e,n,t)}:function(e,n){return-sn(e,n,t)}}function dn(e,t){var n=e.map((function(e,t){return[e,t]}));return n.sort((function(e,n){var a=t(e[0],n[0]);return 0!==a?a:e[1]-n[1]})),n.map((function(e){return e[0]}))}function un(e,t){var n=".".concat(e),a=new Date,r="routifics_".concat(a.getDate()).concat(a.getMonth()).concat(a.getFullYear(),"_").concat(a.getTime()),c={Sheets:{data:G.a.utils.json_to_sheet(t)},SheetNames:["data"]},i=G.a.write(c,{bookType:"".concat(e),type:"array"}),o=new Blob([i],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});ee.a.saveAs(o,r+n)}var jn=[{id:"employeeID",numeric:!0,disablePadding:!1,label:"ID"},{id:"firstName",numeric:!1,disablePadding:!1,label:"First Name"},{id:"lastName",numeric:!1,disablePadding:!1,label:"Last Name"},{id:"phoneNumber",numeric:!0,disablePadding:!1,label:"phone Number"},{id:"telephone",numeric:!0,disablePadding:!1,label:"telephone"},{id:"loc",numeric:!0,disablePadding:!1,label:"Location"}];function bn(e){var t=e.classes,n=(e.onSelectAllClick,e.order),a=e.orderBy,r=(e.numSelected,e.rowCount,e.onRequestSort);return Object(g.jsx)(H.a,{children:Object(g.jsxs)(V.a,{children:[Object(g.jsx)(F.a,{align:"center",className:t.tableCell,children:"Details"},"action"),Object(g.jsx)(F.a,{align:"center",className:t.tableCell,children:"Cancel Order"},"action"),jn.map((function(e){return Object(g.jsx)(F.a,{align:"center",padding:e.disablePadding?"none":"default",sortDirection:a===e.id&&n,children:Object(g.jsxs)(q.a,{active:a===e.id,direction:a===e.id?n:"asc",onClick:(c=e.id,function(e){r(e,c)}),children:[e.label,a===e.id?Object(g.jsx)("span",{className:t.visuallyHidden,children:"desc"===n?"sorted descending":"sorted ascending"}):null]})},e.id);var c}))]})})}var hn=Object(m.a)((function(e){return{root:{paddingLeft:e.spacing(2),paddingRight:e.spacing(1)},highlight:"light"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(_.f)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},marginL1:{marginLeft:"1rem"},title:{flex:"1 1 100%"}}})),mn=function(e){var t=[];return Array.isArray(e)&&(t=e.map((function(e){return{reference_number:e.reference_number,coord:e.locations&&e.locations.length>0?e.locations[0].coord:null,from:e.routifics&&e.routifics.length>0?e.routifics[0].from:null,to:e.routifics&&e.routifics.length>0?e.routifics[0].to:null,aging:"7",load:null,destination_phone:e.destination_phone,email:null,service_type:e.service_type,priority:"yes",destination_name:e.destination_name,cod_amount:e.cod_amount,customer_reference_number:e.customer_reference_number,whatsapp_link:"http://wa.me/"+e.destination_phone,whatsapp_location:"http://wa.me/"+e.destination_phone+"?text=%D9%85%D8%B1%D8%AD%D8%A8%D8%A7%20"+e.destination_name.split(" ").slice(0,2).join("%20")+"%20%D9%85%D8%B9%D8%A7%D9%83%20%D9%85%D9%86%D8%AF%D9%88%D8%A8%20%D8%B4%D8%B1%D9%83%D8%A9%20%D9%85%D8%AD%D9%85%D9%88%D9%84%D8%8C%20%D8%A7%D8%B1%D8%AC%D9%88%20%D8%A5%D8%B1%D8%B3%D8%A7%D9%84%20%D8%A7%D9%84%D9%84%D9%88%D9%83%D9%8A%D8%B4%D9%86%20%D9%84%D9%8A%D8%AA%D9%85%20%D8%AA%D9%88%D8%B5%D9%8A%D9%84%20%D8%B4%D8%AD%D9%86%D8%AA%D9%83%20%D8%A8%D8%B1%D9%82%D9%85%20"+e.reference_number,whatsapp_no_answer:"http://wa.me/"+e.destination_phone+"?text=%D9%85%D8%B1%D8%AD%D8%A8%D8%A7%20"+e.destination_name.split(" ").slice(0,2).join("%20")+"%20%D9%85%D8%B9%D8%A7%D9%83%20%D9%85%D9%86%D8%AF%D9%88%D8%A8%20%D8%B4%D8%B1%D9%83%D8%A9%20%D9%85%D8%AD%D9%85%D9%88%D9%84%D8%8C%20%D8%A7%D9%86%D8%A7%20%D9%82%D8%B1%D9%8A%D8%A8%20%D9%85%D9%86%20%D8%A7%D9%84%D9%85%D9%88%D9%82%D8%B9%20%D9%88%D8%AA%D9%85%D8%AA%20%D9%85%D8%AD%D8%A7%D9%88%D9%84%D8%A9%20%D8%A7%D9%84%D8%A7%D8%AA%D8%B5%D8%A7%D9%84%D8%8C%20%D9%86%D8%B1%D8%AC%D9%88%20%D8%A7%D9%84%D8%B1%D8%AF%20%D8%B3%D8%B1%D9%8A%D8%B9%D8%A7%20%D9%84%D9%8A%D8%AA%D9%85%20%D8%AA%D9%88%D8%B5%D9%8A%D9%84%20%D8%B4%D8%AD%D9%86%D8%AA%D9%83%20"+e.reference_number+"%20%D9%81%D9%8A%20%D8%AD%D8%A7%D9%84%20%D9%84%D9%85%20%D9%8A%D8%AA%D9%85%20%D8%A7%D9%84%D8%B1%D8%AF%20%D8%B3%D8%B1%D9%8A%D8%B9%D8%A7%D8%8C%20%D8%B3%D8%AA%D8%AA%D9%85%20%D8%A5%D8%B9%D8%A7%D8%AF%D8%A9%20%D8%A7%D9%84%D8%AC%D8%AF%D9%88%D9%84%D8%A9%20%D9%84%D9%8A%D9%88%D9%85%20%D8%A7%D9%84%D8%B9%D9%85%D9%84%20%D8%A7%D9%84%D9%82%D8%A7%D8%AF%D9%85%D8%8C%20%D9%88%D8%B4%D9%83%D8%B1%D8%A7%D8%8C%0A"}}))),t},pn=function(e){var t=hn(),n=e.numSelected,r=e.selectedRows,c=(e.data,Object(a.useState)(!1)),i=Object(s.a)(c,2);i[0],i[1];function o(e){return b.apply(this,arguments)}function b(){return b=Object(k.a)(B.a.mark((function e(t){var n,a,c;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.a.post("".concat(O.API_ROOT,"/rfdexport"),{reference_number:Object(N.a)(r)});case 2:n=e.sent,a=n.data,c=mn(a),un(t,c);case 6:case"end":return e.stop()}}),e)}))),b.apply(this,arguments)}return Object(g.jsxs)(M.a,{className:Object(P.a)(t.root,Object(l.a)({},t.highlight,n>0)),children:[n>0?Object(g.jsxs)(u.a,{className:t.title,color:"inherit",variant:"subtitle1",component:"div",children:[n," selected"]}):Object(g.jsx)(u.a,{className:t.title,variant:"h6",id:"tableTitle",component:"div",children:"Accountant"}),n>0?Object(g.jsx)(Y.a,{title:"",children:Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(d.a,{container:!0,children:Object(g.jsx)(j.a,{onClick:Object(k.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o("csv");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),className:t.marginL1,variant:"contained",children:"Export CSV"})})})}):Object(g.jsx)(Y.a,{title:"Filter list",children:Object(g.jsx)(z.a,{"aria-label":"filter list",children:Object(g.jsx)(Q.a,{})})})]})},Dn=Object(m.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:750},ml1:{marginLeft:"1rem"},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}}));function On(){var e=Object(a.useState)([]),t=Object(s.a)(e,2),n=t[0],c=t[1],i=Dn(),l=r.a.useState("asc"),d=Object(s.a)(l,2),u=d[0],b=d[1],h=r.a.useState("employeeID"),m=Object(s.a)(h,2),p=m[0],f=m[1],x=r.a.useState([]),v=Object(s.a)(x,2),A=v[0],y=v[1],w=r.a.useState(0),S=Object(s.a)(w,2),C=S[0],I=S[1],P=r.a.useState(!1),_=Object(s.a)(P,2),H=_[0],q=_[1],M=r.a.useState(200),U=Object(s.a)(M,2),Y=U[0],Z=U[1],Q=Object(a.useState)(!1),J=Object(s.a)(Q,2),G=J[0],$=J[1],ee=Y-Math.min(Y,n.length-C*Y),ne=function(){var e=Object(k.a)(B.a.mark((function e(t,n){var a,r,i;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=sessionStorage.getItem("token"),r=oe.a.stringify({employeeID:sessionStorage.getItem("userId")},{skipEmptyString:!0,skipNull:!0}),i=[],D.a.get("".concat(O.API_ROOT,"/api/administrator/viewAccountants").concat(r?"?".concat(r):""),{headers:{Authorization:"Bearer ".concat(a)}}).then((function(e){console.log(e.data),i=e.data;var t=[];console.log("is Array"),Array.isArray(i)&&(t=i.map((function(e,t){return Object(o.a)(Object(o.a)({},e),{},{employeeID:e.employeeID,isEditMode:!1})}))),console.log(t),c(Object(N.a)(t))})),console.log(i);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){ne(),console.log(n)}),[]);re=n[0];var re,ie,se,le,de,ue,je,be,he,me=r.a.useState({open:!1,message:""}),pe=Object(s.a)(me,2),De=pe[0],Oe=pe[1],ge=function(e,t){"clickaway"!==t&&Oe({open:!1,message:""})},fe=r.a.useState({}),xe=Object(s.a)(fe,2),ve=(xe[0],xe[1]),Ae=function(){var e=Object(k.a)(B.a.mark((function e(t){var n,a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.a.post("".concat(O.API_ROOT,"/newlocation"),{reference_number:t.reference_number,coord:t.coord});case 2:n=e.sent,200!==(a=n.data).statusCode&&Oe({open:!0,message:a.message});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){}),[]),Object(g.jsxs)("div",{className:i.root,children:[Object(g.jsx)(et,{handleFilters:function(e,t){return ne(e,t)}}),Object(g.jsx)(j.a,{variant:"contained",color:"secondary",className:i.spacing,onClick:function(){return $(!0)},children:"add Accountant"}),Object(g.jsx)(on,{open:G,onClose:function(){return $(!1)}}),Object(g.jsxs)(W.a,{className:i.paper,children:[Object(g.jsx)(pn,{numSelected:A.length,data:n,selectedRows:Object(N.a)(A)}),Object(g.jsx)(R.a,{children:Object(g.jsxs)(E.a,{className:i.table,"aria-labelledby":"tableTitle",size:H?"small":"medium","aria-label":"enhanced table",children:[Object(g.jsx)(bn,{classes:i,numSelected:A.length,order:u,orderBy:p,onSelectAllClick:function(e){if(e.target.checked){var t=n.map((function(e){return e.ID}));y(t)}else y([])},onRequestSort:function(e,t){b(p===t&&"asc"===u?"desc":"asc"),f(t)},rowCount:n.length}),Object(g.jsxs)(T.a,{children:[dn(n,ln(u,p)).slice(C*Y,C*Y+Y).map((function(e,t){var a=function(e){return-1!==A.indexOf(e)}(e.employeeID),r="enhanced-table-checkbox-".concat(t);return Object(g.jsxs)(V.a,{hover:!0,role:"checkbox","aria-checked":a,tabIndex:-1,selected:a,children:[Object(g.jsx)(F.a,{align:"center",children:Object(g.jsx)(j.a,{variant:"contained",color:"secondary",className:i.spacing,onClick:function(){},children:"View"})},"action"),Object(g.jsx)(F.a,{align:"center",children:Object(g.jsx)(z.a,{"aria-label":"delete",onClick:function(){return function(e,t){var a=n.filter((function(t){return t.id==e}))[0];"Save"!=t||a.coord?(c((function(t){return n.map((function(t){return t.id===e?Object(o.a)(Object(o.a)({},t),{},{isEditMode:!t.isEditMode}):t}))})),"Save"==t&&(Ae(Object(o.a)({},a)),ve([]))):Oe({open:!0,message:"Coord is not allowed to be empty"})}(e.employeeID,"Edit")},children:Object(g.jsx)(ae.a,{})})},"action"),Object(g.jsx)(F.a,{component:"th",id:r,scope:"row",padding:"none",align:"center",children:e.employeeID||"-"}),Object(g.jsx)(F.a,{align:"center",children:e.firstName||"-"})," ",Object(g.jsx)(F.a,{align:"center",children:e.lastName||"-"})," ",Object(g.jsx)(F.a,{align:"center",children:e.phoneNumber||"-"})," ",Object(g.jsx)(F.a,{align:"center",children:e.telephone||"-"})," ",Object(g.jsx)(F.a,{align:"center",children:e.location||"-"})," "]},e.employeeID)})),ee>0&&Object(g.jsx)(V.a,{style:{height:(H?33:53)*ee},children:Object(g.jsx)(F.a,{colSpan:6})})]})]})}),Object(g.jsx)(L.a,{rowsPerPageOptions:[100,200,300],component:"div",count:n.length,rowsPerPage:Y,page:C,onChangePage:function(e,t){I(t)},onChangeRowsPerPage:function(e){Z(parseInt(e.target.value,10)),I(0)}})]}),Object(g.jsx)(te.a,{open:De.open,autoHideDuration:3e3,onClose:ge,children:Object(g.jsx)(ce,{onClose:ge,severity:"error",children:De.message})}),Object(g.jsx)(K.a,{control:Object(g.jsx)(X.a,{checked:H,onChange:function(e){q(e.target.checked)}}),label:"Dense padding"})]})}var gn={position:"absolute",top:"100%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"#ffffff",padding:"40px",zIndex:1e3,width:"50%",height:"70%",borderRadius:"1em",display:"inline-table"},fn={position:"fixed",display:"flex",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, .7)",zIndex:1e3,height:"100%",width:"100%",overflowY:"auto"},xn=Object(m.a)({h5:{color:"white"}});function vn(e){var t=e.open,n=e.children,r=e.onClose,c=Object(a.useState)(!0),l=Object(s.a)(c,2),h=l[0],m=(l[1],Object(a.useState)("")),p=Object(s.a)(m,2),f=(p[0],p[1],Object(a.useState)("")),x=Object(s.a)(f,2),v=(x[0],x[1],Object(a.useState)("None")),A=Object(s.a)(v,2),y=(A[0],A[1],Object(a.useState)(null)),w=Object(s.a)(y,2),S=(w[0],w[1],Object(a.useState)([])),C=Object(s.a)(S,2),N=(C[0],C[1],Object(a.useState)({firstName:"",lastName:"",email:"",phoneNumber:"",password:"",telephone:"",roomNumber:"",location:""})),I=Object(s.a)(N,2),P=I[0],_=I[1],E=xn(),T=function(){var e=Object(k.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=JSON.stringify({employeeID:sessionStorage.getItem("userId"),firstName:P.firstName,lastName:P.lastName,email:P.email,password:P.password,phoneNumber:P.phoneNumber,office:{telephone:P.telephone,roomNumber:P.roomNumber,location:P.location}}),console.log(t),D.a.post("".concat(O.API_ROOT,"/api/administrator/addlogisticManager"),t,{headers:{Authorization:"Bearer token","Content-Type":"application/json"}}).then((function(e){console.log(e),"SUCCESS"===e.data.status&&r()})).catch((function(e){Object(pe.a)(!1)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return t?i.a.createPortal(Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("div",{style:fn}),Object(g.jsxs)("div",{style:gn,children:[Object(g.jsxs)(d.a,{container:!0,spacing:1,style:{minWidth:"70vw",minHeight:"100vh"},direction:"column",children:[Object(g.jsx)(d.a,{container:!0,direction:"row",style:{minHeight:"40vh",minWidth:"62vw"},id:"DispatcherDetails",children:Object(g.jsxs)(d.a,{container:!0,spacing:3,direction:"column",alignItems:"left",justify:"top",lg:4,xl:3,style:{minHeight:"20vh"},children:[Object(g.jsx)(d.a,{style:{minHeight:"13vh"},item:!0,id:"AddDispatcher",children:Object(g.jsx)(u.a,{color:"secondary",variant:"h3",children:"Add Logistic Manager"})}),Object(g.jsx)(d.a,{item:!0,id:"personalLabel",children:Object(g.jsx)(u.a,{color:"primary",variant:"h5",children:"personal Details:"})}),Object(g.jsx)(d.a,{item:!0,id:"personalDetails",children:Object(g.jsxs)(d.a,{direction:"column",spacing:4,children:[Object(g.jsxs)(d.a,{container:!0,direction:"row",spacing:2,id:"ContactInfo",children:[Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(b.a,{required:!0,color:"primary",error:!h,id:"firstName",label:"First Name",onChange:function(e){return _((function(t){return Object(o.a)(Object(o.a)({},t),{},{firstName:e.target.value})}))},value:P.firstName})}),Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(b.a,{required:!0,color:"primary",error:!h,id:"lastName",label:"Last Name",onChange:function(e){return _((function(t){return Object(o.a)(Object(o.a)({},t),{},{lastName:e.target.value})}))},value:P.lastName})}),Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(b.a,{required:!0,color:"primary",error:!h,id:"phoneNumber",label:"Phone Number",onChange:function(e){_((function(t){return Object(o.a)(Object(o.a)({},t),{},{phoneNumber:e.target.value})}))},value:P.phoneNumber})})]}),Object(g.jsxs)(d.a,{container:!0,direction:"row",spacing:2,id:"credentials",children:[Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(b.a,{required:!0,color:"primary",error:!h,id:"email",label:"Email",onChange:function(e){return _((function(t){return Object(o.a)(Object(o.a)({},t),{},{email:e.target.value})}))},value:P.email})}),Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(b.a,{required:!0,color:"primary",error:!h,id:"password",label:"Password",onChange:function(e){return _((function(t){return Object(o.a)(Object(o.a)({},t),{},{password:e.target.value})}))},value:P.password})})]})]})}),Object(g.jsx)(d.a,{item:!0,id:"addressLabel",children:Object(g.jsx)(u.a,{color:"primary",variant:"h5",children:"Address:"})}),Object(g.jsx)(d.a,{item:!0,id:"",children:Object(g.jsx)(b.a,{required:!0,color:"primary",error:!h,id:"firstName",label:"landline",onChange:function(e){return _((function(t){return Object(o.a)(Object(o.a)({},t),{},{telephone:e.target.value})}))},value:P.telephone})}),Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(b.a,{required:!0,color:"primary",error:!h,id:"roomNumber",label:"Room Number",onChange:function(e){return _((function(t){return Object(o.a)(Object(o.a)({},t),{},{roomNumber:e.target.value})}))},value:P.roomNumber})}),Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(b.a,{required:!0,color:"primary",error:!h,id:"location",label:"Location",onChange:function(e){return _((function(t){return Object(o.a)(Object(o.a)({},t),{},{location:e.target.value})}))},value:P.location})})]})}),Object(g.jsxs)(d.a,{container:!0,spacing:2,direction:"row",id:"Buttons",children:[Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(j.a,{variant:"contained",color:"secondary",className:E.spacing,onClick:r,sx:{p:2},children:"Cancel"})}),Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(j.a,{variant:"contained",color:"secondary",className:E.spacing,onClick:T,children:"add Logistic Manager"})})]})]}),n]})]}),document.getElementById("portal")):null}function An(e,t,n){return t[n]<e[n]?-1:t[n]>e[n]?1:0}function yn(e,t){return"desc"===e?function(e,n){return An(e,n,t)}:function(e,n){return-An(e,n,t)}}function wn(e,t){var n=e.map((function(e,t){return[e,t]}));return n.sort((function(e,n){var a=t(e[0],n[0]);return 0!==a?a:e[1]-n[1]})),n.map((function(e){return e[0]}))}function Sn(e,t){var n=".".concat(e),a=new Date,r="routifics_".concat(a.getDate()).concat(a.getMonth()).concat(a.getFullYear(),"_").concat(a.getTime()),c={Sheets:{data:G.a.utils.json_to_sheet(t)},SheetNames:["data"]},i=G.a.write(c,{bookType:"".concat(e),type:"array"}),o=new Blob([i],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});ee.a.saveAs(o,r+n)}var Cn=[{id:"employeeID",numeric:!0,disablePadding:!1,label:"ID"},{id:"firstName",numeric:!1,disablePadding:!1,label:"First Name"},{id:"lastName",numeric:!1,disablePadding:!1,label:"Last Name"},{id:"phoneNumber",numeric:!0,disablePadding:!1,label:"phone Number"},{id:"telephone",numeric:!0,disablePadding:!1,label:"telephone"},{id:"loc",numeric:!0,disablePadding:!1,label:"Location"}];function Nn(e){var t=e.classes,n=(e.onSelectAllClick,e.order),a=e.orderBy,r=(e.numSelected,e.rowCount,e.onRequestSort);return Object(g.jsx)(H.a,{children:Object(g.jsxs)(V.a,{children:[Object(g.jsx)(F.a,{align:"center",className:t.tableCell,children:"Details"},"action"),Object(g.jsx)(F.a,{align:"center",className:t.tableCell,children:"Cancel Order"},"action"),Cn.map((function(e){return Object(g.jsx)(F.a,{align:"center",padding:e.disablePadding?"none":"default",sortDirection:a===e.id&&n,children:Object(g.jsxs)(q.a,{active:a===e.id,direction:a===e.id?n:"asc",onClick:(c=e.id,function(e){r(e,c)}),children:[e.label,a===e.id?Object(g.jsx)("span",{className:t.visuallyHidden,children:"desc"===n?"sorted descending":"sorted ascending"}):null]})},e.id);var c}))]})})}var kn=Object(m.a)((function(e){return{root:{paddingLeft:e.spacing(2),paddingRight:e.spacing(1)},highlight:"light"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(_.f)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},marginL1:{marginLeft:"1rem"},title:{flex:"1 1 100%"}}})),In=function(e){var t=[];return Array.isArray(e)&&(t=e.map((function(e){return{reference_number:e.reference_number,coord:e.locations&&e.locations.length>0?e.locations[0].coord:null,from:e.routifics&&e.routifics.length>0?e.routifics[0].from:null,to:e.routifics&&e.routifics.length>0?e.routifics[0].to:null,aging:"7",load:null,destination_phone:e.destination_phone,email:null,service_type:e.service_type,priority:"yes",destination_name:e.destination_name,cod_amount:e.cod_amount,customer_reference_number:e.customer_reference_number,whatsapp_link:"http://wa.me/"+e.destination_phone,whatsapp_location:"http://wa.me/"+e.destination_phone+"?text=%D9%85%D8%B1%D8%AD%D8%A8%D8%A7%20"+e.destination_name.split(" ").slice(0,2).join("%20")+"%20%D9%85%D8%B9%D8%A7%D9%83%20%D9%85%D9%86%D8%AF%D9%88%D8%A8%20%D8%B4%D8%B1%D9%83%D8%A9%20%D9%85%D8%AD%D9%85%D9%88%D9%84%D8%8C%20%D8%A7%D8%B1%D8%AC%D9%88%20%D8%A5%D8%B1%D8%B3%D8%A7%D9%84%20%D8%A7%D9%84%D9%84%D9%88%D9%83%D9%8A%D8%B4%D9%86%20%D9%84%D9%8A%D8%AA%D9%85%20%D8%AA%D9%88%D8%B5%D9%8A%D9%84%20%D8%B4%D8%AD%D9%86%D8%AA%D9%83%20%D8%A8%D8%B1%D9%82%D9%85%20"+e.reference_number,whatsapp_no_answer:"http://wa.me/"+e.destination_phone+"?text=%D9%85%D8%B1%D8%AD%D8%A8%D8%A7%20"+e.destination_name.split(" ").slice(0,2).join("%20")+"%20%D9%85%D8%B9%D8%A7%D9%83%20%D9%85%D9%86%D8%AF%D9%88%D8%A8%20%D8%B4%D8%B1%D9%83%D8%A9%20%D9%85%D8%AD%D9%85%D9%88%D9%84%D8%8C%20%D8%A7%D9%86%D8%A7%20%D9%82%D8%B1%D9%8A%D8%A8%20%D9%85%D9%86%20%D8%A7%D9%84%D9%85%D9%88%D9%82%D8%B9%20%D9%88%D8%AA%D9%85%D8%AA%20%D9%85%D8%AD%D8%A7%D9%88%D9%84%D8%A9%20%D8%A7%D9%84%D8%A7%D8%AA%D8%B5%D8%A7%D9%84%D8%8C%20%D9%86%D8%B1%D8%AC%D9%88%20%D8%A7%D9%84%D8%B1%D8%AF%20%D8%B3%D8%B1%D9%8A%D8%B9%D8%A7%20%D9%84%D9%8A%D8%AA%D9%85%20%D8%AA%D9%88%D8%B5%D9%8A%D9%84%20%D8%B4%D8%AD%D9%86%D8%AA%D9%83%20"+e.reference_number+"%20%D9%81%D9%8A%20%D8%AD%D8%A7%D9%84%20%D9%84%D9%85%20%D9%8A%D8%AA%D9%85%20%D8%A7%D9%84%D8%B1%D8%AF%20%D8%B3%D8%B1%D9%8A%D8%B9%D8%A7%D8%8C%20%D8%B3%D8%AA%D8%AA%D9%85%20%D8%A5%D8%B9%D8%A7%D8%AF%D8%A9%20%D8%A7%D9%84%D8%AC%D8%AF%D9%88%D9%84%D8%A9%20%D9%84%D9%8A%D9%88%D9%85%20%D8%A7%D9%84%D8%B9%D9%85%D9%84%20%D8%A7%D9%84%D9%82%D8%A7%D8%AF%D9%85%D8%8C%20%D9%88%D8%B4%D9%83%D8%B1%D8%A7%D8%8C%0A"}}))),t},Bn=function(e){var t=kn(),n=e.numSelected,r=e.selectedRows,c=(e.data,Object(a.useState)(!1)),i=Object(s.a)(c,2);i[0],i[1];function o(e){return b.apply(this,arguments)}function b(){return b=Object(k.a)(B.a.mark((function e(t){var n,a,c;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.a.post("".concat(O.API_ROOT,"/rfdexport"),{reference_number:Object(N.a)(r)});case 2:n=e.sent,a=n.data,c=In(a),Sn(t,c);case 6:case"end":return e.stop()}}),e)}))),b.apply(this,arguments)}return Object(g.jsxs)(M.a,{className:Object(P.a)(t.root,Object(l.a)({},t.highlight,n>0)),children:[n>0?Object(g.jsxs)(u.a,{className:t.title,color:"inherit",variant:"subtitle1",component:"div",children:[n," selected"]}):Object(g.jsx)(u.a,{className:t.title,variant:"h6",id:"tableTitle",component:"div",children:"Logistic Manager"}),n>0?Object(g.jsx)(Y.a,{title:"",children:Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(d.a,{container:!0,children:Object(g.jsx)(j.a,{onClick:Object(k.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o("csv");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),className:t.marginL1,variant:"contained",children:"Export CSV"})})})}):Object(g.jsx)(Y.a,{title:"Filter list",children:Object(g.jsx)(z.a,{"aria-label":"filter list",children:Object(g.jsx)(Q.a,{})})})]})},Pn=Object(m.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:750},ml1:{marginLeft:"1rem"},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}}));function _n(){var e=Object(a.useState)([]),t=Object(s.a)(e,2),n=t[0],c=t[1],i=Pn(),l=r.a.useState("asc"),d=Object(s.a)(l,2),u=d[0],b=d[1],h=r.a.useState("employeeID"),m=Object(s.a)(h,2),p=m[0],f=m[1],x=r.a.useState([]),v=Object(s.a)(x,2),A=v[0],y=v[1],w=r.a.useState(0),S=Object(s.a)(w,2),C=S[0],I=S[1],P=r.a.useState(!1),_=Object(s.a)(P,2),H=_[0],q=_[1],M=r.a.useState(200),U=Object(s.a)(M,2),Y=U[0],Z=U[1],Q=Object(a.useState)(!1),J=Object(s.a)(Q,2),G=J[0],$=J[1],ee=Y-Math.min(Y,n.length-C*Y),ne=function(){var e=Object(k.a)(B.a.mark((function e(t,n){var a,r,i;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=sessionStorage.getItem("token"),r=oe.a.stringify({employeeID:sessionStorage.getItem("userId")},{skipEmptyString:!0,skipNull:!0}),i=[],D.a.get("".concat(O.API_ROOT,"/api/administrator/viewLogisticManagers").concat(r?"?".concat(r):""),{headers:{Authorization:"Bearer ".concat(a)}}).then((function(e){console.log(e.data),i=e.data;var t=[];console.log("is Array"),Array.isArray(i)&&(t=i.map((function(e,t){return Object(o.a)(Object(o.a)({},e),{},{employeeID:e.employeeID,isEditMode:!1})}))),console.log(t),c(Object(N.a)(t))})),console.log(i);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){ne(),console.log(n)}),[]);re=n[0];var re,ie,se,le,de,ue,je,be,he,me=r.a.useState({open:!1,message:""}),pe=Object(s.a)(me,2),De=pe[0],Oe=pe[1],ge=function(e,t){"clickaway"!==t&&Oe({open:!1,message:""})},fe=r.a.useState({}),xe=Object(s.a)(fe,2),ve=(xe[0],xe[1]),Ae=function(){var e=Object(k.a)(B.a.mark((function e(t){var n,a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.a.post("".concat(O.API_ROOT,"/newlocation"),{reference_number:t.reference_number,coord:t.coord});case 2:n=e.sent,200!==(a=n.data).statusCode&&Oe({open:!0,message:a.message});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){}),[]),Object(g.jsxs)("div",{className:i.root,children:[Object(g.jsx)(et,{handleFilters:function(e,t){return ne(e,t)}}),Object(g.jsx)(j.a,{variant:"contained",color:"secondary",className:i.spacing,onClick:function(){return $(!0)},children:"add Logistic Manager"}),Object(g.jsx)(vn,{open:G,onClose:function(){return $(!1)}}),Object(g.jsxs)(W.a,{className:i.paper,children:[Object(g.jsx)(Bn,{numSelected:A.length,data:n,selectedRows:Object(N.a)(A)}),Object(g.jsx)(R.a,{children:Object(g.jsxs)(E.a,{className:i.table,"aria-labelledby":"tableTitle",size:H?"small":"medium","aria-label":"enhanced table",children:[Object(g.jsx)(Nn,{classes:i,numSelected:A.length,order:u,orderBy:p,onSelectAllClick:function(e){if(e.target.checked){var t=n.map((function(e){return e.ID}));y(t)}else y([])},onRequestSort:function(e,t){b(p===t&&"asc"===u?"desc":"asc"),f(t)},rowCount:n.length}),Object(g.jsxs)(T.a,{children:[wn(n,yn(u,p)).slice(C*Y,C*Y+Y).map((function(e,t){var a=function(e){return-1!==A.indexOf(e)}(e.employeeID),r="enhanced-table-checkbox-".concat(t);return Object(g.jsxs)(V.a,{hover:!0,role:"checkbox","aria-checked":a,tabIndex:-1,selected:a,children:[Object(g.jsx)(F.a,{align:"center",children:Object(g.jsx)(j.a,{variant:"contained",color:"secondary",className:i.spacing,onClick:function(){},children:"View"})},"action"),Object(g.jsx)(F.a,{align:"center",children:Object(g.jsx)(z.a,{"aria-label":"delete",onClick:function(){return function(e,t){var a=n.filter((function(t){return t.id==e}))[0];"Save"!=t||a.coord?(c((function(t){return n.map((function(t){return t.id===e?Object(o.a)(Object(o.a)({},t),{},{isEditMode:!t.isEditMode}):t}))})),"Save"==t&&(Ae(Object(o.a)({},a)),ve([]))):Oe({open:!0,message:"Coord is not allowed to be empty"})}(e.employeeID,"Edit")},children:Object(g.jsx)(ae.a,{})})},"action"),Object(g.jsx)(F.a,{component:"th",id:r,scope:"row",padding:"none",align:"center",children:e.employeeID||"-"}),Object(g.jsx)(F.a,{align:"center",children:e.firstName||"-"})," ",Object(g.jsx)(F.a,{align:"center",children:e.lastName||"-"})," ",Object(g.jsx)(F.a,{align:"center",children:e.phoneNumber||"-"})," ",Object(g.jsx)(F.a,{align:"center",children:e.telephone||"-"})," ",Object(g.jsx)(F.a,{align:"center",children:e.location||"-"})," "]},e.employeeID)})),ee>0&&Object(g.jsx)(V.a,{style:{height:(H?33:53)*ee},children:Object(g.jsx)(F.a,{colSpan:6})})]})]})}),Object(g.jsx)(L.a,{rowsPerPageOptions:[100,200,300],component:"div",count:n.length,rowsPerPage:Y,page:C,onChangePage:function(e,t){I(t)},onChangeRowsPerPage:function(e){Z(parseInt(e.target.value,10)),I(0)}})]}),Object(g.jsx)(te.a,{open:De.open,autoHideDuration:3e3,onClose:ge,children:Object(g.jsx)(ce,{onClose:ge,severity:"error",children:De.message})}),Object(g.jsx)(K.a,{control:Object(g.jsx)(X.a,{checked:H,onChange:function(e){q(e.target.checked)}}),label:"Dense padding"})]})}var En={position:"absolute",top:"100%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"#ffffff",padding:"40px",zIndex:1e3,width:"50%",height:"70%",borderRadius:"1em",display:"inline-table"},Tn={position:"fixed",display:"flex",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, .7)",zIndex:1e3,height:"100%",width:"100%",overflowY:"auto"},Fn=Object(m.a)({h5:{color:"white"}});function Rn(e){var t=e.open,n=e.children,r=e.onClose,c=Object(a.useState)(!0),l=Object(s.a)(c,2),h=l[0],m=(l[1],Object(a.useState)("")),p=Object(s.a)(m,2),f=(p[0],p[1],Object(a.useState)("")),x=Object(s.a)(f,2),v=(x[0],x[1],Object(a.useState)("None")),A=Object(s.a)(v,2),y=(A[0],A[1],Object(a.useState)(null)),w=Object(s.a)(y,2),S=(w[0],w[1],Object(a.useState)([])),C=Object(s.a)(S,2),N=(C[0],C[1],Object(a.useState)({firstName:"",lastName:"",email:"",phoneNumber:"",password:"",telephone:"",roomNumber:"",location:""})),I=Object(s.a)(N,2),P=I[0],_=I[1],E=Fn(),T=function(){var e=Object(k.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=JSON.stringify({employeeID:sessionStorage.getItem("userId"),firstName:P.firstName,lastName:P.lastName,email:P.email,password:P.password,phoneNumber:P.phoneNumber,office:{telephone:P.telephone,roomNumber:P.roomNumber,location:P.location}}),console.log(t),D.a.post("".concat(O.API_ROOT,"/api/administrator/addfreightBroker"),t,{headers:{Authorization:"Bearer token","Content-Type":"application/json"}}).then((function(e){console.log(e),"SUCCESS"===e.data.status&&r()})).catch((function(e){Object(pe.a)(!1)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return t?i.a.createPortal(Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("div",{style:Tn}),Object(g.jsxs)("div",{style:En,children:[Object(g.jsxs)(d.a,{container:!0,spacing:1,style:{minWidth:"70vw",minHeight:"100vh"},direction:"column",children:[Object(g.jsx)(d.a,{container:!0,direction:"row",style:{minHeight:"40vh",minWidth:"62vw"},id:"DispatcherDetails",children:Object(g.jsxs)(d.a,{container:!0,spacing:3,direction:"column",alignItems:"left",justify:"top",lg:4,xl:3,style:{minHeight:"20vh"},children:[Object(g.jsx)(d.a,{style:{minHeight:"13vh"},item:!0,id:"AddDispatcher",children:Object(g.jsx)(u.a,{color:"secondary",variant:"h3",children:"Add Freight Broker"})}),Object(g.jsx)(d.a,{item:!0,id:"personalLabel",children:Object(g.jsx)(u.a,{color:"primary",variant:"h5",children:"personal Details:"})}),Object(g.jsx)(d.a,{item:!0,id:"personalDetails",children:Object(g.jsxs)(d.a,{direction:"column",spacing:4,children:[Object(g.jsxs)(d.a,{container:!0,direction:"row",spacing:2,id:"ContactInfo",children:[Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(b.a,{required:!0,color:"primary",error:!h,id:"firstName",label:"First Name",onChange:function(e){return _((function(t){return Object(o.a)(Object(o.a)({},t),{},{firstName:e.target.value})}))},value:P.firstName})}),Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(b.a,{required:!0,color:"primary",error:!h,id:"lastName",label:"Last Name",onChange:function(e){return _((function(t){return Object(o.a)(Object(o.a)({},t),{},{lastName:e.target.value})}))},value:P.lastName})}),Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(b.a,{required:!0,color:"primary",error:!h,id:"phoneNumber",label:"Phone Number",onChange:function(e){_((function(t){return Object(o.a)(Object(o.a)({},t),{},{phoneNumber:e.target.value})}))},value:P.phoneNumber})})]}),Object(g.jsxs)(d.a,{container:!0,direction:"row",spacing:2,id:"credentials",children:[Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(b.a,{required:!0,color:"primary",error:!h,id:"email",label:"Email",onChange:function(e){return _((function(t){return Object(o.a)(Object(o.a)({},t),{},{email:e.target.value})}))},value:P.email})}),Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(b.a,{required:!0,color:"primary",error:!h,id:"password",label:"Password",onChange:function(e){return _((function(t){return Object(o.a)(Object(o.a)({},t),{},{password:e.target.value})}))},value:P.password})})]})]})}),Object(g.jsx)(d.a,{item:!0,id:"addressLabel",children:Object(g.jsx)(u.a,{color:"primary",variant:"h5",children:"Address:"})}),Object(g.jsx)(d.a,{item:!0,id:"",children:Object(g.jsx)(b.a,{required:!0,color:"primary",error:!h,id:"firstName",label:"landline",onChange:function(e){return _((function(t){return Object(o.a)(Object(o.a)({},t),{},{telephone:e.target.value})}))},value:P.telephone})}),Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(b.a,{required:!0,color:"primary",error:!h,id:"roomNumber",label:"Room Number",onChange:function(e){return _((function(t){return Object(o.a)(Object(o.a)({},t),{},{roomNumber:e.target.value})}))},value:P.roomNumber})}),Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(b.a,{required:!0,color:"primary",error:!h,id:"location",label:"Location",onChange:function(e){return _((function(t){return Object(o.a)(Object(o.a)({},t),{},{location:e.target.value})}))},value:P.location})})]})}),Object(g.jsxs)(d.a,{container:!0,spacing:2,direction:"row",id:"Buttons",children:[Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(j.a,{variant:"contained",color:"secondary",className:E.spacing,onClick:r,sx:{p:2},children:"Cancel"})}),Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(j.a,{variant:"contained",color:"secondary",className:E.spacing,onClick:T,children:"add Freight Broker"})})]})]}),n]})]}),document.getElementById("portal")):null}function Hn(e,t,n){return t[n]<e[n]?-1:t[n]>e[n]?1:0}function Ln(e,t){return"desc"===e?function(e,n){return Hn(e,n,t)}:function(e,n){return-Hn(e,n,t)}}function Vn(e,t){var n=e.map((function(e,t){return[e,t]}));return n.sort((function(e,n){var a=t(e[0],n[0]);return 0!==a?a:e[1]-n[1]})),n.map((function(e){return e[0]}))}function qn(e,t){var n=".".concat(e),a=new Date,r="routifics_".concat(a.getDate()).concat(a.getMonth()).concat(a.getFullYear(),"_").concat(a.getTime()),c={Sheets:{data:G.a.utils.json_to_sheet(t)},SheetNames:["data"]},i=G.a.write(c,{bookType:"".concat(e),type:"array"}),o=new Blob([i],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});ee.a.saveAs(o,r+n)}var Mn=[{id:"employeeID",numeric:!0,disablePadding:!1,label:"ID"},{id:"firstName",numeric:!1,disablePadding:!1,label:"First Name"},{id:"lastName",numeric:!1,disablePadding:!1,label:"Last Name"},{id:"phoneNumber",numeric:!0,disablePadding:!1,label:"phone Number"},{id:"telephone",numeric:!0,disablePadding:!1,label:"telephone"},{id:"loc",numeric:!0,disablePadding:!1,label:"Location"}];function Wn(e){var t=e.classes,n=(e.onSelectAllClick,e.order),a=e.orderBy,r=(e.numSelected,e.rowCount,e.onRequestSort);return Object(g.jsx)(H.a,{children:Object(g.jsxs)(V.a,{children:[Object(g.jsx)(F.a,{align:"center",className:t.tableCell,children:"Details"},"action"),Object(g.jsx)(F.a,{align:"center",className:t.tableCell,children:"Cancel Order"},"action"),Mn.map((function(e){return Object(g.jsx)(F.a,{align:"center",padding:e.disablePadding?"none":"default",sortDirection:a===e.id&&n,children:Object(g.jsxs)(q.a,{active:a===e.id,direction:a===e.id?n:"asc",onClick:(c=e.id,function(e){r(e,c)}),children:[e.label,a===e.id?Object(g.jsx)("span",{className:t.visuallyHidden,children:"desc"===n?"sorted descending":"sorted ascending"}):null]})},e.id);var c}))]})})}var Un=Object(m.a)((function(e){return{root:{paddingLeft:e.spacing(2),paddingRight:e.spacing(1)},highlight:"light"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(_.f)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},marginL1:{marginLeft:"1rem"},title:{flex:"1 1 100%"}}})),zn=function(e){var t=[];return Array.isArray(e)&&(t=e.map((function(e){return{reference_number:e.reference_number,coord:e.locations&&e.locations.length>0?e.locations[0].coord:null,from:e.routifics&&e.routifics.length>0?e.routifics[0].from:null,to:e.routifics&&e.routifics.length>0?e.routifics[0].to:null,aging:"7",load:null,destination_phone:e.destination_phone,email:null,service_type:e.service_type,priority:"yes",destination_name:e.destination_name,cod_amount:e.cod_amount,customer_reference_number:e.customer_reference_number,whatsapp_link:"http://wa.me/"+e.destination_phone,whatsapp_location:"http://wa.me/"+e.destination_phone+"?text=%D9%85%D8%B1%D8%AD%D8%A8%D8%A7%20"+e.destination_name.split(" ").slice(0,2).join("%20")+"%20%D9%85%D8%B9%D8%A7%D9%83%20%D9%85%D9%86%D8%AF%D9%88%D8%A8%20%D8%B4%D8%B1%D9%83%D8%A9%20%D9%85%D8%AD%D9%85%D9%88%D9%84%D8%8C%20%D8%A7%D8%B1%D8%AC%D9%88%20%D8%A5%D8%B1%D8%B3%D8%A7%D9%84%20%D8%A7%D9%84%D9%84%D9%88%D9%83%D9%8A%D8%B4%D9%86%20%D9%84%D9%8A%D8%AA%D9%85%20%D8%AA%D9%88%D8%B5%D9%8A%D9%84%20%D8%B4%D8%AD%D9%86%D8%AA%D9%83%20%D8%A8%D8%B1%D9%82%D9%85%20"+e.reference_number,whatsapp_no_answer:"http://wa.me/"+e.destination_phone+"?text=%D9%85%D8%B1%D8%AD%D8%A8%D8%A7%20"+e.destination_name.split(" ").slice(0,2).join("%20")+"%20%D9%85%D8%B9%D8%A7%D9%83%20%D9%85%D9%86%D8%AF%D9%88%D8%A8%20%D8%B4%D8%B1%D9%83%D8%A9%20%D9%85%D8%AD%D9%85%D9%88%D9%84%D8%8C%20%D8%A7%D9%86%D8%A7%20%D9%82%D8%B1%D9%8A%D8%A8%20%D9%85%D9%86%20%D8%A7%D9%84%D9%85%D9%88%D9%82%D8%B9%20%D9%88%D8%AA%D9%85%D8%AA%20%D9%85%D8%AD%D8%A7%D9%88%D9%84%D8%A9%20%D8%A7%D9%84%D8%A7%D8%AA%D8%B5%D8%A7%D9%84%D8%8C%20%D9%86%D8%B1%D8%AC%D9%88%20%D8%A7%D9%84%D8%B1%D8%AF%20%D8%B3%D8%B1%D9%8A%D8%B9%D8%A7%20%D9%84%D9%8A%D8%AA%D9%85%20%D8%AA%D9%88%D8%B5%D9%8A%D9%84%20%D8%B4%D8%AD%D9%86%D8%AA%D9%83%20"+e.reference_number+"%20%D9%81%D9%8A%20%D8%AD%D8%A7%D9%84%20%D9%84%D9%85%20%D9%8A%D8%AA%D9%85%20%D8%A7%D9%84%D8%B1%D8%AF%20%D8%B3%D8%B1%D9%8A%D8%B9%D8%A7%D8%8C%20%D8%B3%D8%AA%D8%AA%D9%85%20%D8%A5%D8%B9%D8%A7%D8%AF%D8%A9%20%D8%A7%D9%84%D8%AC%D8%AF%D9%88%D9%84%D8%A9%20%D9%84%D9%8A%D9%88%D9%85%20%D8%A7%D9%84%D8%B9%D9%85%D9%84%20%D8%A7%D9%84%D9%82%D8%A7%D8%AF%D9%85%D8%8C%20%D9%88%D8%B4%D9%83%D8%B1%D8%A7%D8%8C%0A"}}))),t},Yn=function(e){var t=Un(),n=e.numSelected,r=e.selectedRows,c=(e.data,Object(a.useState)(!1)),i=Object(s.a)(c,2);i[0],i[1];function o(e){return b.apply(this,arguments)}function b(){return b=Object(k.a)(B.a.mark((function e(t){var n,a,c;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.a.post("".concat(O.API_ROOT,"/rfdexport"),{reference_number:Object(N.a)(r)});case 2:n=e.sent,a=n.data,c=zn(a),qn(t,c);case 6:case"end":return e.stop()}}),e)}))),b.apply(this,arguments)}return Object(g.jsxs)(M.a,{className:Object(P.a)(t.root,Object(l.a)({},t.highlight,n>0)),children:[n>0?Object(g.jsxs)(u.a,{className:t.title,color:"inherit",variant:"subtitle1",component:"div",children:[n," selected"]}):Object(g.jsx)(u.a,{className:t.title,variant:"h6",id:"tableTitle",component:"div",children:"Freight Broker"}),n>0?Object(g.jsx)(Y.a,{title:"",children:Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(d.a,{container:!0,children:Object(g.jsx)(j.a,{onClick:Object(k.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o("csv");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),className:t.marginL1,variant:"contained",children:"Export CSV"})})})}):Object(g.jsx)(Y.a,{title:"Filter list",children:Object(g.jsx)(z.a,{"aria-label":"filter list",children:Object(g.jsx)(Q.a,{})})})]})},Kn=Object(m.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:750},ml1:{marginLeft:"1rem"},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}}));function Xn(){var e=Object(a.useState)([]),t=Object(s.a)(e,2),n=t[0],c=t[1],i=Kn(),l=r.a.useState("asc"),d=Object(s.a)(l,2),u=d[0],b=d[1],h=r.a.useState("employeeID"),m=Object(s.a)(h,2),p=m[0],f=m[1],x=r.a.useState([]),v=Object(s.a)(x,2),A=v[0],y=v[1],w=r.a.useState(0),S=Object(s.a)(w,2),C=S[0],I=S[1],P=r.a.useState(!1),_=Object(s.a)(P,2),H=_[0],q=_[1],M=r.a.useState(200),U=Object(s.a)(M,2),Y=U[0],Z=U[1],Q=Object(a.useState)(!1),J=Object(s.a)(Q,2),G=J[0],$=J[1],ee=Y-Math.min(Y,n.length-C*Y),ne=function(){var e=Object(k.a)(B.a.mark((function e(t,n){var a,r,i;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=sessionStorage.getItem("token"),r=oe.a.stringify({employeeID:sessionStorage.getItem("userId")},{skipEmptyString:!0,skipNull:!0}),i=[],D.a.get("".concat(O.API_ROOT,"/api/administrator/viewFreightBrokers").concat(r?"?".concat(r):""),{headers:{Authorization:"Bearer ".concat(a)}}).then((function(e){console.log(e.data),i=e.data;var t=[];console.log("is Array"),Array.isArray(i)&&(t=i.map((function(e,t){return Object(o.a)(Object(o.a)({},e),{},{employeeID:e.employeeID,isEditMode:!1})}))),console.log(t),c(Object(N.a)(t))})),console.log(i);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){ne(),console.log(n)}),[]);re=n[0];var re,ie,se,le,de,ue,je,be,he,me=r.a.useState({open:!1,message:""}),pe=Object(s.a)(me,2),De=pe[0],Oe=pe[1],ge=function(e,t){"clickaway"!==t&&Oe({open:!1,message:""})},fe=r.a.useState({}),xe=Object(s.a)(fe,2),ve=(xe[0],xe[1]),Ae=function(){var e=Object(k.a)(B.a.mark((function e(t){var n,a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.a.post("".concat(O.API_ROOT,"/newlocation"),{reference_number:t.reference_number,coord:t.coord});case 2:n=e.sent,200!==(a=n.data).statusCode&&Oe({open:!0,message:a.message});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){}),[]),Object(g.jsxs)("div",{className:i.root,children:[Object(g.jsx)(et,{handleFilters:function(e,t){return ne(e,t)}}),Object(g.jsx)(j.a,{variant:"contained",color:"secondary",className:i.spacing,onClick:function(){return $(!0)},children:"add Freight Broker"}),Object(g.jsx)(Rn,{open:G,onClose:function(){return $(!1)}}),Object(g.jsxs)(W.a,{className:i.paper,children:[Object(g.jsx)(Yn,{numSelected:A.length,data:n,selectedRows:Object(N.a)(A)}),Object(g.jsx)(R.a,{children:Object(g.jsxs)(E.a,{className:i.table,"aria-labelledby":"tableTitle",size:H?"small":"medium","aria-label":"enhanced table",children:[Object(g.jsx)(Wn,{classes:i,numSelected:A.length,order:u,orderBy:p,onSelectAllClick:function(e){if(e.target.checked){var t=n.map((function(e){return e.ID}));y(t)}else y([])},onRequestSort:function(e,t){b(p===t&&"asc"===u?"desc":"asc"),f(t)},rowCount:n.length}),Object(g.jsxs)(T.a,{children:[Vn(n,Ln(u,p)).slice(C*Y,C*Y+Y).map((function(e,t){var a=function(e){return-1!==A.indexOf(e)}(e.employeeID),r="enhanced-table-checkbox-".concat(t);return Object(g.jsxs)(V.a,{hover:!0,role:"checkbox","aria-checked":a,tabIndex:-1,selected:a,children:[Object(g.jsx)(F.a,{align:"center",children:Object(g.jsx)(j.a,{variant:"contained",color:"secondary",className:i.spacing,onClick:function(){},children:"View"})},"action"),Object(g.jsx)(F.a,{align:"center",children:Object(g.jsx)(z.a,{"aria-label":"delete",onClick:function(){return function(e,t){var a=n.filter((function(t){return t.id==e}))[0];"Save"!=t||a.coord?(c((function(t){return n.map((function(t){return t.id===e?Object(o.a)(Object(o.a)({},t),{},{isEditMode:!t.isEditMode}):t}))})),"Save"==t&&(Ae(Object(o.a)({},a)),ve([]))):Oe({open:!0,message:"Coord is not allowed to be empty"})}(e.employeeID,"Edit")},children:Object(g.jsx)(ae.a,{})})},"action"),Object(g.jsx)(F.a,{component:"th",id:r,scope:"row",padding:"none",align:"center",children:e.employeeID||"-"}),Object(g.jsx)(F.a,{align:"center",children:e.firstName||"-"})," ",Object(g.jsx)(F.a,{align:"center",children:e.lastName||"-"})," ",Object(g.jsx)(F.a,{align:"center",children:e.phoneNumber||"-"})," ",Object(g.jsx)(F.a,{align:"center",children:e.telephone||"-"})," ",Object(g.jsx)(F.a,{align:"center",children:e.location||"-"})," "]},e.employeeID)})),ee>0&&Object(g.jsx)(V.a,{style:{height:(H?33:53)*ee},children:Object(g.jsx)(F.a,{colSpan:6})})]})]})}),Object(g.jsx)(L.a,{rowsPerPageOptions:[100,200,300],component:"div",count:n.length,rowsPerPage:Y,page:C,onChangePage:function(e,t){I(t)},onChangeRowsPerPage:function(e){Z(parseInt(e.target.value,10)),I(0)}})]}),Object(g.jsx)(te.a,{open:De.open,autoHideDuration:3e3,onClose:ge,children:Object(g.jsx)(ce,{onClose:ge,severity:"error",children:De.message})}),Object(g.jsx)(K.a,{control:Object(g.jsx)(X.a,{checked:H,onChange:function(e){q(e.target.checked)}}),label:"Dense padding"})]})}var Zn=function(){return Object(g.jsx)(v.a,{theme:S,children:Object(g.jsxs)(A.a,{children:[Object(g.jsx)(C.a,{routes:[{name:"Accountants",link:"/accountant",activeIndex:0},{name:"Customer Services",link:"/",activeIndex:1},{name:"Freight Brokers",link:"/freightBroker",activeIndex:2},{name:"Logistic Managers",link:"/logisticManager",activeIndex:3}]}),Object(g.jsxs)(y.c,{children:[Object(g.jsxs)(y.a,{exact:!0,path:"/",children:[" ",Object(g.jsx)(nn,{})," "]}),Object(g.jsxs)(y.a,{exact:!0,path:"/accountant",children:[" ",Object(g.jsx)(On,{})," "]}),Object(g.jsxs)(y.a,{exact:!0,path:"/logisticManager",children:[" ",Object(g.jsx)(_n,{})," "]}),Object(g.jsxs)(y.a,{exact:!0,path:"/freightBroker",children:[" ",Object(g.jsx)(Xn,{})," "]})]})]})})};var Qn=function(){return Object(g.jsx)(v.a,{theme:S,children:Object(g.jsxs)(A.a,{children:[Object(g.jsx)(C.a,{routes:[{name:"Accountants",link:"/accountant",activeIndex:0},{name:"Customer Services",link:"/",activeIndex:1},{name:"Freight Brokers",link:"/freightBroker",activeIndex:2},{name:"Logistic Managers",link:"/logisticManager",activeIndex:3}]}),Object(g.jsxs)(y.c,{children:[Object(g.jsxs)(y.a,{exact:!0,path:"/",children:[" ",Object(g.jsx)(nn,{})," "]}),Object(g.jsxs)(y.a,{exact:!0,path:"/accountant",children:[" ",Object(g.jsx)(On,{})," "]}),Object(g.jsxs)(y.a,{exact:!0,path:"/logisticManager",children:[" ",Object(g.jsx)(_n,{})," "]}),Object(g.jsxs)(y.a,{exact:!0,path:"/freightBroker",children:[" ",Object(g.jsx)(Xn,{})," "]})]})]})})},Jn={position:"absolute",top:"100%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"#ffffff",padding:"40px",zIndex:1e3,width:"50%",height:"70%",borderRadius:"1em",display:"inline-table"},Gn={position:"fixed",display:"flex",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, .7)",zIndex:1e3,height:"100%",width:"100%",overflowY:"auto"},$n=Object(m.a)({h5:{color:"white"}});function ea(e){var t=e.open,n=e.children,r=e.onClose,c=Object(a.useState)(!0),l=Object(s.a)(c,2),h=l[0],m=(l[1],Object(a.useState)("")),p=Object(s.a)(m,2),f=(p[0],p[1],Object(a.useState)("")),x=Object(s.a)(f,2),v=(x[0],x[1],Object(a.useState)("None")),A=Object(s.a)(v,2),y=(A[0],A[1],Object(a.useState)(null)),w=Object(s.a)(y,2),S=(w[0],w[1],Object(a.useState)([])),C=Object(s.a)(S,2),N=(C[0],C[1],Object(a.useState)({firstName:"",lastName:"",email:"",phoneNumber:"",password:"",telephone:"",roomNumber:""})),I=Object(s.a)(N,2),P=I[0],_=I[1],E=$n(),T=function(){var e=Object(k.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=JSON.stringify({employeeID:sessionStorage.getItem("userId"),firstName:P.firstName,lastName:P.lastName,email:P.email,password:P.password,phoneNumber:P.phoneNumber,office:{telephone:P.telephone,roomNumber:P.roomNumber}}),console.log(t),D.a.post("".concat(O.API_ROOT,"/api/freightBroker/addConsignor"),t,{headers:{Authorization:"Bearer token","Content-Type":"application/json"}}).then((function(e){console.log(e),"SUCCESS"===e.data.status&&r()})).catch((function(e){Object(pe.a)(!1)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return t?i.a.createPortal(Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("div",{style:Gn}),Object(g.jsxs)("div",{style:Jn,children:[Object(g.jsxs)(d.a,{container:!0,spacing:1,style:{minWidth:"70vw",minHeight:"100vh"},direction:"column",children:[Object(g.jsx)(d.a,{container:!0,direction:"row",style:{minHeight:"40vh",minWidth:"62vw"},id:"ConsignorDetails",children:Object(g.jsxs)(d.a,{container:!0,spacing:3,direction:"column",alignItems:"left",justify:"top",lg:4,xl:3,style:{minHeight:"20vh"},children:[Object(g.jsx)(d.a,{style:{minHeight:"13vh"},item:!0,id:"AddConsignor",children:Object(g.jsx)(u.a,{color:"secondary",variant:"h3",children:"Add Consignor"})}),Object(g.jsx)(d.a,{item:!0,id:"personalLabel",children:Object(g.jsx)(u.a,{color:"primary",variant:"h5",children:"personal Details:"})}),Object(g.jsx)(d.a,{item:!0,id:"personalDetails",children:Object(g.jsxs)(d.a,{direction:"column",spacing:4,children:[Object(g.jsxs)(d.a,{container:!0,direction:"row",spacing:2,id:"ContactInfo",children:[Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(b.a,{required:!0,color:"primary",error:!h,id:"firstName",label:"First Name",onChange:function(e){return _((function(t){return Object(o.a)(Object(o.a)({},t),{},{firstName:e.target.value})}))},value:P.firstName})}),Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(b.a,{required:!0,color:"primary",error:!h,id:"lastName",label:"Last Name",onChange:function(e){return _((function(t){return Object(o.a)(Object(o.a)({},t),{},{lastName:e.target.value})}))},value:P.lastName})}),Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(b.a,{required:!0,color:"primary",error:!h,id:"phoneNumber",label:"Phone Number",onChange:function(e){_((function(t){return Object(o.a)(Object(o.a)({},t),{},{phoneNumber:e.target.value})}))},value:P.phoneNumber})})]}),Object(g.jsxs)(d.a,{container:!0,direction:"row",spacing:2,id:"credentials",children:[Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(b.a,{required:!0,color:"primary",error:!h,id:"email",label:"Email",onChange:function(e){return _((function(t){return Object(o.a)(Object(o.a)({},t),{},{email:e.target.value})}))},value:P.email})}),Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(b.a,{required:!0,color:"primary",error:!h,id:"password",label:"Password",onChange:function(e){return _((function(t){return Object(o.a)(Object(o.a)({},t),{},{password:e.target.value})}))},value:P.password})})]})]})}),Object(g.jsx)(d.a,{item:!0,id:"addressLabel",children:Object(g.jsx)(u.a,{color:"primary",variant:"h5",children:"Address:"})}),Object(g.jsx)(d.a,{item:!0,id:"",children:Object(g.jsx)(b.a,{required:!0,color:"primary",error:!h,id:"firstName",label:"landline",onChange:function(e){return _((function(t){return Object(o.a)(Object(o.a)({},t),{},{telephone:e.target.value})}))},value:P.telephone})}),Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(b.a,{required:!0,color:"primary",error:!h,id:"roomNumber",label:"Room Number",onChange:function(e){return _((function(t){return Object(o.a)(Object(o.a)({},t),{},{roomNumber:e.target.value})}))},value:P.roomNumber})})]})}),Object(g.jsxs)(d.a,{container:!0,spacing:2,direction:"row",id:"Buttons",children:[Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(j.a,{variant:"contained",color:"secondary",className:E.spacing,onClick:r,sx:{p:2},children:"Cancel"})}),Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(j.a,{variant:"contained",color:"secondary",className:E.spacing,onClick:T,children:"add Consignor"})})]})]}),n]})]}),document.getElementById("portal")):null}function ta(e,t,n){return t[n]<e[n]?-1:t[n]>e[n]?1:0}function na(e,t){return"desc"===e?function(e,n){return ta(e,n,t)}:function(e,n){return-ta(e,n,t)}}function aa(e,t){var n=e.map((function(e,t){return[e,t]}));return n.sort((function(e,n){var a=t(e[0],n[0]);return 0!==a?a:e[1]-n[1]})),n.map((function(e){return e[0]}))}function ra(e,t){var n=".".concat(e),a=new Date,r="routifics_".concat(a.getDate()).concat(a.getMonth()).concat(a.getFullYear(),"_").concat(a.getTime()),c={Sheets:{data:G.a.utils.json_to_sheet(t)},SheetNames:["data"]},i=G.a.write(c,{bookType:"".concat(e),type:"array"}),o=new Blob([i],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});ee.a.saveAs(o,r+n)}var ca=[{id:"employeeID",numeric:!0,disablePadding:!1,label:"ID"},{id:"firstName",numeric:!1,disablePadding:!1,label:"First Name"},{id:"lastName",numeric:!1,disablePadding:!1,label:"Last Name"},{id:"phoneNumber",numeric:!0,disablePadding:!1,label:"phone Number"},{id:"telephone",numeric:!0,disablePadding:!1,label:"telephone"},{id:"rating",numeric:!0,disablePadding:!1,label:"Rating"}];function ia(e){var t=e.classes,n=(e.onSelectAllClick,e.order),a=e.orderBy,r=(e.numSelected,e.rowCount,e.onRequestSort);return Object(g.jsx)(H.a,{children:Object(g.jsxs)(V.a,{children:[Object(g.jsx)(F.a,{align:"center",className:t.tableCell,children:"Details"},"action"),Object(g.jsx)(F.a,{align:"center",className:t.tableCell,children:"Cancel Order"},"action"),ca.map((function(e){return Object(g.jsx)(F.a,{align:"center",padding:e.disablePadding?"none":"default",sortDirection:a===e.id&&n,children:Object(g.jsxs)(q.a,{active:a===e.id,direction:a===e.id?n:"asc",onClick:(c=e.id,function(e){r(e,c)}),children:[e.label,a===e.id?Object(g.jsx)("span",{className:t.visuallyHidden,children:"desc"===n?"sorted descending":"sorted ascending"}):null]})},e.id);var c}))]})})}var oa=Object(m.a)((function(e){return{root:{paddingLeft:e.spacing(2),paddingRight:e.spacing(1)},highlight:"light"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(_.f)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},marginL1:{marginLeft:"1rem"},title:{flex:"1 1 100%"}}})),sa=function(e){var t=[];return Array.isArray(e)&&(t=e.map((function(e){return{reference_number:e.reference_number,coord:e.locations&&e.locations.length>0?e.locations[0].coord:null,from:e.routifics&&e.routifics.length>0?e.routifics[0].from:null,to:e.routifics&&e.routifics.length>0?e.routifics[0].to:null,aging:"7",load:null,destination_phone:e.destination_phone,email:null,service_type:e.service_type,priority:"yes",destination_name:e.destination_name,cod_amount:e.cod_amount,customer_reference_number:e.customer_reference_number,whatsapp_link:"http://wa.me/"+e.destination_phone,whatsapp_location:"http://wa.me/"+e.destination_phone+"?text=%D9%85%D8%B1%D8%AD%D8%A8%D8%A7%20"+e.destination_name.split(" ").slice(0,2).join("%20")+"%20%D9%85%D8%B9%D8%A7%D9%83%20%D9%85%D9%86%D8%AF%D9%88%D8%A8%20%D8%B4%D8%B1%D9%83%D8%A9%20%D9%85%D8%AD%D9%85%D9%88%D9%84%D8%8C%20%D8%A7%D8%B1%D8%AC%D9%88%20%D8%A5%D8%B1%D8%B3%D8%A7%D9%84%20%D8%A7%D9%84%D9%84%D9%88%D9%83%D9%8A%D8%B4%D9%86%20%D9%84%D9%8A%D8%AA%D9%85%20%D8%AA%D9%88%D8%B5%D9%8A%D9%84%20%D8%B4%D8%AD%D9%86%D8%AA%D9%83%20%D8%A8%D8%B1%D9%82%D9%85%20"+e.reference_number,whatsapp_no_answer:"http://wa.me/"+e.destination_phone+"?text=%D9%85%D8%B1%D8%AD%D8%A8%D8%A7%20"+e.destination_name.split(" ").slice(0,2).join("%20")+"%20%D9%85%D8%B9%D8%A7%D9%83%20%D9%85%D9%86%D8%AF%D9%88%D8%A8%20%D8%B4%D8%B1%D9%83%D8%A9%20%D9%85%D8%AD%D9%85%D9%88%D9%84%D8%8C%20%D8%A7%D9%86%D8%A7%20%D9%82%D8%B1%D9%8A%D8%A8%20%D9%85%D9%86%20%D8%A7%D9%84%D9%85%D9%88%D9%82%D8%B9%20%D9%88%D8%AA%D9%85%D8%AA%20%D9%85%D8%AD%D8%A7%D9%88%D9%84%D8%A9%20%D8%A7%D9%84%D8%A7%D8%AA%D8%B5%D8%A7%D9%84%D8%8C%20%D9%86%D8%B1%D8%AC%D9%88%20%D8%A7%D9%84%D8%B1%D8%AF%20%D8%B3%D8%B1%D9%8A%D8%B9%D8%A7%20%D9%84%D9%8A%D8%AA%D9%85%20%D8%AA%D9%88%D8%B5%D9%8A%D9%84%20%D8%B4%D8%AD%D9%86%D8%AA%D9%83%20"+e.reference_number+"%20%D9%81%D9%8A%20%D8%AD%D8%A7%D9%84%20%D9%84%D9%85%20%D9%8A%D8%AA%D9%85%20%D8%A7%D9%84%D8%B1%D8%AF%20%D8%B3%D8%B1%D9%8A%D8%B9%D8%A7%D8%8C%20%D8%B3%D8%AA%D8%AA%D9%85%20%D8%A5%D8%B9%D8%A7%D8%AF%D8%A9%20%D8%A7%D9%84%D8%AC%D8%AF%D9%88%D9%84%D8%A9%20%D9%84%D9%8A%D9%88%D9%85%20%D8%A7%D9%84%D8%B9%D9%85%D9%84%20%D8%A7%D9%84%D9%82%D8%A7%D8%AF%D9%85%D8%8C%20%D9%88%D8%B4%D9%83%D8%B1%D8%A7%D8%8C%0A"}}))),t},la=function(e){var t=oa(),n=e.numSelected,r=e.selectedRows,c=(e.data,Object(a.useState)(!1)),i=Object(s.a)(c,2);i[0],i[1];function o(e){return b.apply(this,arguments)}function b(){return b=Object(k.a)(B.a.mark((function e(t){var n,a,c;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.a.post("".concat(O.API_ROOT,"/rfdexport"),{reference_number:Object(N.a)(r)});case 2:n=e.sent,a=n.data,c=sa(a),ra(t,c);case 6:case"end":return e.stop()}}),e)}))),b.apply(this,arguments)}return Object(g.jsxs)(M.a,{className:Object(P.a)(t.root,Object(l.a)({},t.highlight,n>0)),children:[n>0?Object(g.jsxs)(u.a,{className:t.title,color:"inherit",variant:"subtitle1",component:"div",children:[n," selected"]}):Object(g.jsx)(u.a,{className:t.title,variant:"h6",id:"tableTitle",component:"div",children:"Consignors"}),n>0?Object(g.jsx)(Y.a,{title:"",children:Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(d.a,{container:!0,children:Object(g.jsx)(j.a,{onClick:Object(k.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o("csv");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),className:t.marginL1,variant:"contained",children:"Export CSV"})})})}):Object(g.jsx)(Y.a,{title:"Filter list",children:Object(g.jsx)(z.a,{"aria-label":"filter list",children:Object(g.jsx)(Q.a,{})})})]})},da=Object(m.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:750},ml1:{marginLeft:"1rem"},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}}));function ua(){var e=Object(a.useState)([]),t=Object(s.a)(e,2),n=t[0],c=t[1],i=da(),l=r.a.useState("asc"),d=Object(s.a)(l,2),u=d[0],b=d[1],h=r.a.useState("employeeID"),m=Object(s.a)(h,2),p=m[0],f=m[1],x=r.a.useState([]),v=Object(s.a)(x,2),A=v[0],y=v[1],w=r.a.useState(0),S=Object(s.a)(w,2),C=S[0],I=S[1],P=r.a.useState(!1),_=Object(s.a)(P,2),H=_[0],q=_[1],M=r.a.useState(200),U=Object(s.a)(M,2),Y=U[0],Z=U[1],Q=Object(a.useState)(!1),J=Object(s.a)(Q,2),G=J[0],$=J[1],ee=Y-Math.min(Y,n.length-C*Y),ne=function(){var e=Object(k.a)(B.a.mark((function e(t,n){var a,r,i;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=sessionStorage.getItem("token"),r=oe.a.stringify({employeeID:sessionStorage.getItem("userId")},{skipEmptyString:!0,skipNull:!0}),i=[],D.a.get("".concat(O.API_ROOT,"/api/freightBroker/viewConsignors").concat(r?"?".concat(r):""),{headers:{Authorization:"Bearer ".concat(a)}}).then((function(e){console.log(e.data),i=e.data;var t=[];console.log("is Array"),Array.isArray(i)&&(t=i.map((function(e,t){return Object(o.a)(Object(o.a)({},e),{},{employeeID:e.employeeID,isEditMode:!1})}))),console.log(t),c(Object(N.a)(t))})),console.log(i);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){ne(),console.log(n)}),[]);re=n[0];var re,ie,se,le,de,ue,je,be,he,me=r.a.useState({open:!1,message:""}),pe=Object(s.a)(me,2),De=pe[0],Oe=pe[1],ge=function(e,t){"clickaway"!==t&&Oe({open:!1,message:""})},fe=r.a.useState({}),xe=Object(s.a)(fe,2),ve=(xe[0],xe[1]),Ae=function(){var e=Object(k.a)(B.a.mark((function e(t){var n,a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.a.post("".concat(O.API_ROOT,"/newlocation"),{reference_number:t.reference_number,coord:t.coord});case 2:n=e.sent,200!==(a=n.data).statusCode&&Oe({open:!0,message:a.message});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){}),[]),Object(g.jsxs)("div",{className:i.root,children:[Object(g.jsx)(et,{handleFilters:function(e,t){return ne(e,t)}}),Object(g.jsx)(j.a,{variant:"contained",color:"secondary",className:i.spacing,onClick:function(){return $(!0)},children:"add Consignor"}),Object(g.jsx)(ea,{open:G,onClose:function(){return $(!1)}}),Object(g.jsxs)(W.a,{className:i.paper,children:[Object(g.jsx)(la,{numSelected:A.length,data:n,selectedRows:Object(N.a)(A)}),Object(g.jsx)(R.a,{children:Object(g.jsxs)(E.a,{className:i.table,"aria-labelledby":"tableTitle",size:H?"small":"medium","aria-label":"enhanced table",children:[Object(g.jsx)(ia,{classes:i,numSelected:A.length,order:u,orderBy:p,onSelectAllClick:function(e){if(e.target.checked){var t=n.map((function(e){return e.ID}));y(t)}else y([])},onRequestSort:function(e,t){b(p===t&&"asc"===u?"desc":"asc"),f(t)},rowCount:n.length}),Object(g.jsxs)(T.a,{children:[aa(n,na(u,p)).slice(C*Y,C*Y+Y).map((function(e,t){var a=function(e){return-1!==A.indexOf(e)}(e.employeeID),r="enhanced-table-checkbox-".concat(t);return Object(g.jsxs)(V.a,{hover:!0,role:"checkbox","aria-checked":a,tabIndex:-1,selected:a,children:[Object(g.jsx)(F.a,{align:"center",children:Object(g.jsx)(j.a,{variant:"contained",color:"secondary",className:i.spacing,onClick:function(){},children:"View"})},"action"),Object(g.jsx)(F.a,{align:"center",children:Object(g.jsx)(z.a,{"aria-label":"delete",onClick:function(){return function(e,t){var a=n.filter((function(t){return t.id==e}))[0];"Save"!=t||a.coord?(c((function(t){return n.map((function(t){return t.id===e?Object(o.a)(Object(o.a)({},t),{},{isEditMode:!t.isEditMode}):t}))})),"Save"==t&&(Ae(Object(o.a)({},a)),ve([]))):Oe({open:!0,message:"Coord is not allowed to be empty"})}(e.employeeID,"Edit")},children:Object(g.jsx)(ae.a,{})})},"action"),Object(g.jsx)(F.a,{component:"th",id:r,scope:"row",padding:"none",align:"center",children:e.employeeID||"-"}),Object(g.jsx)(F.a,{align:"center",children:e.firstName||"-"})," ",Object(g.jsx)(F.a,{align:"center",children:e.lastName||"-"})," ",Object(g.jsx)(F.a,{align:"center",children:e.phoneNumber||"-"})," ",Object(g.jsx)(F.a,{align:"center",children:e.telephone||"-"})," ",Object(g.jsx)(F.a,{align:"center",children:e.rate||"-"})," "]},e.employeeID)})),ee>0&&Object(g.jsx)(V.a,{style:{height:(H?33:53)*ee},children:Object(g.jsx)(F.a,{colSpan:6})})]})]})}),Object(g.jsx)(L.a,{rowsPerPageOptions:[100,200,300],component:"div",count:n.length,rowsPerPage:Y,page:C,onChangePage:function(e,t){I(t)},onChangeRowsPerPage:function(e){Z(parseInt(e.target.value,10)),I(0)}})]}),Object(g.jsx)(te.a,{open:De.open,autoHideDuration:3e3,onClose:ge,children:Object(g.jsx)(ce,{onClose:ge,severity:"error",children:De.message})}),Object(g.jsx)(K.a,{control:Object(g.jsx)(X.a,{checked:H,onChange:function(e){q(e.target.checked)}}),label:"Dense padding"})]})}var ja=function(){return Object(g.jsx)(v.a,{theme:S,children:Object(g.jsxs)(A.a,{children:[Object(g.jsx)(C.a,{routes:[{name:"Consignors",link:"/consignors",activeIndex:1}]}),Object(g.jsx)(y.c,{children:Object(g.jsxs)(y.a,{exact:!0,path:"/consignors",children:[" ",Object(g.jsx)(ua,{})," "]})})]})})},ba={position:"absolute",top:"60%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"#ffffff",padding:"40px",zIndex:1e3,width:"37%",height:"65%",borderRadius:"1em",display:"inline-table"},ha={position:"fixed",display:"flex",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, .7)",zIndex:1e3,height:"100%",width:"100%",overflowY:"auto"},ma=Object(m.a)({h5:{color:"white"}});function pa(e){var t=e.open,n=e.children,r=e.onClose,c=Object(a.useState)(!0),l=Object(s.a)(c,2),h=(l[0],l[1],Object(a.useState)({firstName:{value:"",isValid:!0},lastName:{value:"",isValid:!0},email:{value:"",isValid:!0},phoneNumber:{value:"",isValid:!0},password:{value:"",isValid:!0},telephone:{value:"",isValid:!0},roomNumber:{value:"",isValid:!0},location:{value:"",isValid:!0}})),m=Object(s.a)(h,2),p=m[0],f=m[1],x=ma(),v=function(){var e=Object(k.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=JSON.stringify({employeeID:sessionStorage.getItem("userId"),firstName:p.firstName.value,lastName:p.lastName.value,email:p.email.value,password:p.password.value,phoneNumber:p.phoneNumber.value,office:{telephone:p.telephone.value,roomNumber:p.roomNumber.value,location:p.location.value}}),console.log(t),D.a.post("".concat(O.API_ROOT,"/api/owner/addadministrator"),t,{headers:{Authorization:"Bearer token","Content-Type":"application/json"}}).then((function(e){console.log(e),"SUCCESS"===e.data.status&&r()})).catch((function(e){Object(pe.a)(!1)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return t?i.a.createPortal(Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("div",{style:ha}),Object(g.jsxs)("div",{style:ba,children:[Object(g.jsxs)(d.a,{container:!0,spacing:1,style:{minWidth:"35vw",minHeight:"80vh"},direction:"column",children:[Object(g.jsx)(d.a,{container:!0,direction:"row",style:{minHeight:"80vh",minWidth:"35vw"},id:"AdminDetails",children:Object(g.jsxs)(d.a,{container:!0,spacing:3,direction:"column",alignItems:"left",justify:"top",lg:4,xl:3,style:{minHeight:"80vh",minWidth:"40vw"},children:[Object(g.jsx)(d.a,{style:{minHeight:"13vh"},item:!0,id:"AddAdminr",children:Object(g.jsx)(u.a,{color:"secondary",variant:"h3",children:"Add Admin"})}),Object(g.jsx)(d.a,{item:!0,id:"personalLabel",children:Object(g.jsx)(u.a,{color:"primary",variant:"h5",children:"Personal Details:"})}),Object(g.jsx)(d.a,{item:!0,id:"personalDetails",children:Object(g.jsxs)(d.a,{direction:"column",spacing:4,children:[Object(g.jsxs)(d.a,{container:!0,direction:"row",spacing:2,id:"ContactInfo",children:[Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(b.a,{required:!0,color:"primary",error:!p.firstName.isValid,id:"firstName",label:"First Name",onChange:function(e){return f((function(t){return/^[a-zA-Z]+$/.test(e.target.value)||0===e.target.value.length?Object(o.a)(Object(o.a)({},t),{},{firstName:{value:e.target.value,isValid:t.firstName.isValid}}):Object(o.a)({},t)}))},value:p.firstName.value})}),Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(b.a,{required:!0,color:"primary",error:!p.lastName.isValid,id:"lastName",label:"Last Name",onChange:function(e){return f((function(t){return/^[a-zA-Z]+$/.test(e.target.value)||0===e.target.value.length?Object(o.a)(Object(o.a)({},t),{},{lastName:{value:e.target.value,isValid:t.firstName.isValid}}):Object(o.a)({},t)}))},value:p.lastName.value})}),Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(b.a,{required:!0,color:"primary",error:!p.phoneNumber.isValid,id:"phoneNumber",label:"Phone Number",onChange:function(e){return f((function(t){return Number(e.target.value)||0===e.target.value.length||"0"===e.target.value?Object(o.a)(Object(o.a)({},t),{},{phoneNumber:{value:e.target.value,isValid:t.firstName.isValid}}):Object(o.a)({},t)}))},value:p.phoneNumber.value})})]}),Object(g.jsxs)(d.a,{container:!0,direction:"row",spacing:2,id:"credentials",children:[Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(b.a,{required:!0,color:"primary",error:!p.email.isValid,id:"email",label:"Email",onChange:function(e){return f((function(t){return Object(o.a)(Object(o.a)({},t),{},{email:{value:e.target.value,isValid:t.firstName.isValid}})}))},value:p.email.value})}),Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(b.a,{required:!0,color:"primary",error:!p.password.isValid,id:"password",label:"Password",onChange:function(e){return f((function(t){return e.target.value.length>8?Object(o.a)({},t):Object(o.a)(Object(o.a)({},t),{},{password:{value:e.target.value,isValid:t.firstName.isValid}})}))},value:p.password.value})})]})]})}),Object(g.jsx)(d.a,{item:!0,id:"addressLabel",children:Object(g.jsx)(u.a,{color:"primary",variant:"h5",children:"Address:"})}),Object(g.jsxs)(d.a,{container:!0,direction:"row",spacing:2,id:"address",children:[Object(g.jsx)(d.a,{item:!0,id:"",children:Object(g.jsx)(b.a,{required:!0,color:"primary",error:!p.telephone.isValid,id:"firstName",label:"landline",onChange:function(e){return f((function(t){return Number(e.target.value)||0===e.target.value.length||"0"===e.target.value?Object(o.a)(Object(o.a)({},t),{},{telephone:{value:e.target.value,isValid:t.firstName.isValid}}):Object(o.a)({},t)}))},value:p.telephone.value})}),Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(b.a,{required:!0,color:"primary",error:!p.roomNumber.isValid,id:"roomNumber",label:"Room Number",onChange:function(e){return f((function(t){return Number(e.target.value)||0===e.target.value.length||"0"===e.target.value?Object(o.a)(Object(o.a)({},t),{},{roomNumber:{value:e.target.value,isValid:t.firstName.isValid}}):Object(o.a)({},t)}))},value:p.roomNumber.value})}),Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(b.a,{required:!0,color:"primary",error:!p.location.isValid,id:"location",label:"Location",onChange:function(e){return f((function(t){return/^[a-zA-Z]+$/.test(e.target.value)||0===e.target.value.length?Object(o.a)(Object(o.a)({},t),{},{location:{value:e.target.value,isValid:t.firstName.isValid}}):Object(o.a)({},t)}))},value:p.location.value})})]})]})}),Object(g.jsxs)(d.a,{container:!0,spacing:2,direction:"row",id:"Buttons",children:[Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(j.a,{variant:"contained",color:"secondary",className:x.spacing,onClick:r,sx:{p:2},children:"Cancel"})}),Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(j.a,{variant:"contained",color:"secondary",className:x.spacing,onClick:v,children:"add Admin"})})]})]}),n]})]}),document.getElementById("portal")):null}function Da(e,t,n){return t[n]<e[n]?-1:t[n]>e[n]?1:0}function Oa(e,t){return"desc"===e?function(e,n){return Da(e,n,t)}:function(e,n){return-Da(e,n,t)}}function ga(e,t){var n=e.map((function(e,t){return[e,t]}));return n.sort((function(e,n){var a=t(e[0],n[0]);return 0!==a?a:e[1]-n[1]})),n.map((function(e){return e[0]}))}function fa(e,t){var n=".".concat(e),a=new Date,r="routifics_".concat(a.getDate()).concat(a.getMonth()).concat(a.getFullYear(),"_").concat(a.getTime()),c={Sheets:{data:G.a.utils.json_to_sheet(t)},SheetNames:["data"]},i=G.a.write(c,{bookType:"".concat(e),type:"array"}),o=new Blob([i],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});ee.a.saveAs(o,r+n)}var xa=[{id:"employeeID",numeric:!0,disablePadding:!1,label:"ID"},{id:"firstName",numeric:!1,disablePadding:!1,label:"First Name"},{id:"lastName",numeric:!1,disablePadding:!1,label:"Last Name"},{id:"phoneNumber",numeric:!0,disablePadding:!1,label:"phone Number"},{id:"telephone",numeric:!0,disablePadding:!1,label:"telephone"},{id:"loc",numeric:!0,disablePadding:!1,label:"Location"}];function va(e){var t=e.classes,n=(e.onSelectAllClick,e.order),a=e.orderBy,r=(e.numSelected,e.rowCount,e.onRequestSort);return Object(g.jsx)(H.a,{children:Object(g.jsxs)(V.a,{children:[Object(g.jsx)(F.a,{align:"center",className:t.tableCell,children:"Details"},"action"),Object(g.jsx)(F.a,{align:"center",className:t.tableCell,children:"Delete"},"action"),xa.map((function(e){return Object(g.jsx)(F.a,{align:"center",padding:e.disablePadding?"none":"default",sortDirection:a===e.id&&n,children:Object(g.jsxs)(q.a,{active:a===e.id,direction:a===e.id?n:"asc",onClick:(c=e.id,function(e){r(e,c)}),children:[e.label,a===e.id?Object(g.jsx)("span",{className:t.visuallyHidden,children:"desc"===n?"sorted descending":"sorted ascending"}):null]})},e.id);var c}))]})})}var Aa=Object(m.a)((function(e){return{root:{paddingLeft:e.spacing(2),paddingRight:e.spacing(1)},highlight:"light"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(_.f)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},marginL1:{marginLeft:"1rem"},title:{flex:"1 1 100%"}}})),ya=function(e){var t=[];return Array.isArray(e)&&(t=e.map((function(e){return{reference_number:e.reference_number,coord:e.locations&&e.locations.length>0?e.locations[0].coord:null,from:e.routifics&&e.routifics.length>0?e.routifics[0].from:null,to:e.routifics&&e.routifics.length>0?e.routifics[0].to:null,aging:"7",load:null,destination_phone:e.destination_phone,email:null,service_type:e.service_type,priority:"yes",destination_name:e.destination_name,cod_amount:e.cod_amount,customer_reference_number:e.customer_reference_number,whatsapp_link:"http://wa.me/"+e.destination_phone,whatsapp_location:"http://wa.me/"+e.destination_phone+"?text=%D9%85%D8%B1%D8%AD%D8%A8%D8%A7%20"+e.destination_name.split(" ").slice(0,2).join("%20")+"%20%D9%85%D8%B9%D8%A7%D9%83%20%D9%85%D9%86%D8%AF%D9%88%D8%A8%20%D8%B4%D8%B1%D9%83%D8%A9%20%D9%85%D8%AD%D9%85%D9%88%D9%84%D8%8C%20%D8%A7%D8%B1%D8%AC%D9%88%20%D8%A5%D8%B1%D8%B3%D8%A7%D9%84%20%D8%A7%D9%84%D9%84%D9%88%D9%83%D9%8A%D8%B4%D9%86%20%D9%84%D9%8A%D8%AA%D9%85%20%D8%AA%D9%88%D8%B5%D9%8A%D9%84%20%D8%B4%D8%AD%D9%86%D8%AA%D9%83%20%D8%A8%D8%B1%D9%82%D9%85%20"+e.reference_number,whatsapp_no_answer:"http://wa.me/"+e.destination_phone+"?text=%D9%85%D8%B1%D8%AD%D8%A8%D8%A7%20"+e.destination_name.split(" ").slice(0,2).join("%20")+"%20%D9%85%D8%B9%D8%A7%D9%83%20%D9%85%D9%86%D8%AF%D9%88%D8%A8%20%D8%B4%D8%B1%D9%83%D8%A9%20%D9%85%D8%AD%D9%85%D9%88%D9%84%D8%8C%20%D8%A7%D9%86%D8%A7%20%D9%82%D8%B1%D9%8A%D8%A8%20%D9%85%D9%86%20%D8%A7%D9%84%D9%85%D9%88%D9%82%D8%B9%20%D9%88%D8%AA%D9%85%D8%AA%20%D9%85%D8%AD%D8%A7%D9%88%D9%84%D8%A9%20%D8%A7%D9%84%D8%A7%D8%AA%D8%B5%D8%A7%D9%84%D8%8C%20%D9%86%D8%B1%D8%AC%D9%88%20%D8%A7%D9%84%D8%B1%D8%AF%20%D8%B3%D8%B1%D9%8A%D8%B9%D8%A7%20%D9%84%D9%8A%D8%AA%D9%85%20%D8%AA%D9%88%D8%B5%D9%8A%D9%84%20%D8%B4%D8%AD%D9%86%D8%AA%D9%83%20"+e.reference_number+"%20%D9%81%D9%8A%20%D8%AD%D8%A7%D9%84%20%D9%84%D9%85%20%D9%8A%D8%AA%D9%85%20%D8%A7%D9%84%D8%B1%D8%AF%20%D8%B3%D8%B1%D9%8A%D8%B9%D8%A7%D8%8C%20%D8%B3%D8%AA%D8%AA%D9%85%20%D8%A5%D8%B9%D8%A7%D8%AF%D8%A9%20%D8%A7%D9%84%D8%AC%D8%AF%D9%88%D9%84%D8%A9%20%D9%84%D9%8A%D9%88%D9%85%20%D8%A7%D9%84%D8%B9%D9%85%D9%84%20%D8%A7%D9%84%D9%82%D8%A7%D8%AF%D9%85%D8%8C%20%D9%88%D8%B4%D9%83%D8%B1%D8%A7%D8%8C%0A"}}))),t},wa=function(e){var t=Aa(),n=e.numSelected,r=e.selectedRows,c=(e.data,Object(a.useState)(!1)),i=Object(s.a)(c,2);i[0],i[1];function o(e){return b.apply(this,arguments)}function b(){return b=Object(k.a)(B.a.mark((function e(t){var n,a,c;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.a.post("".concat(O.API_ROOT,"/rfdexport"),{reference_number:Object(N.a)(r)});case 2:n=e.sent,a=n.data,c=ya(a),fa(t,c);case 6:case"end":return e.stop()}}),e)}))),b.apply(this,arguments)}return Object(g.jsxs)(M.a,{className:Object(P.a)(t.root,Object(l.a)({},t.highlight,n>0)),children:[n>0?Object(g.jsxs)(u.a,{className:t.title,color:"inherit",variant:"subtitle1",component:"div",children:[n," selected"]}):Object(g.jsx)(u.a,{className:t.title,variant:"h6",id:"tableTitle",component:"div",children:"Admin"}),n>0?Object(g.jsx)(Y.a,{title:"",children:Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(d.a,{container:!0,children:Object(g.jsx)(j.a,{onClick:Object(k.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o("csv");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),className:t.marginL1,variant:"contained",children:"Export CSV"})})})}):Object(g.jsx)(Y.a,{title:"Filter list",children:Object(g.jsx)(z.a,{"aria-label":"filter list",children:Object(g.jsx)(Q.a,{})})})]})},Sa=Object(m.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:750},ml1:{marginLeft:"1rem"},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}}));function Ca(){var e=Object(a.useState)([]),t=Object(s.a)(e,2),n=t[0],c=t[1],i=Sa(),l=r.a.useState("asc"),d=Object(s.a)(l,2),u=d[0],b=d[1],h=r.a.useState("employeeID"),m=Object(s.a)(h,2),p=m[0],f=m[1],x=r.a.useState([]),v=Object(s.a)(x,2),A=v[0],y=v[1],w=r.a.useState(0),S=Object(s.a)(w,2),C=S[0],I=S[1],P=r.a.useState(!1),_=Object(s.a)(P,2),H=_[0],q=_[1],M=r.a.useState(200),U=Object(s.a)(M,2),Y=U[0],Z=U[1],Q=Object(a.useState)(!1),J=Object(s.a)(Q,2),G=J[0],$=J[1],ee=Y-Math.min(Y,n.length-C*Y),ne=function(){var e=Object(k.a)(B.a.mark((function e(t,n){var a,r,i;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=sessionStorage.getItem("token"),r=oe.a.stringify({employeeID:sessionStorage.getItem("userId")},{skipEmptyString:!0,skipNull:!0}),i=[],D.a.get("".concat(O.API_ROOT,"/api/owner/viewAdministrators").concat(r?"?".concat(r):""),{headers:{Authorization:"Bearer ".concat(a)}}).then((function(e){console.log(e.data),i=e.data;var t=[];console.log("is Array"),Array.isArray(i)&&(t=i.map((function(e,t){return Object(o.a)(Object(o.a)({},e),{},{employeeID:e.employeeID,isEditMode:!1})}))),console.log(t),c(Object(N.a)(t))})),console.log(i);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){ne(),console.log(n)}),[]);re=n[0];var re,ie,se,le,de,ue,je,be,he,me=r.a.useState({open:!1,message:""}),pe=Object(s.a)(me,2),De=pe[0],Oe=pe[1],ge=function(e,t){"clickaway"!==t&&Oe({open:!1,message:""})},fe=r.a.useState({}),xe=Object(s.a)(fe,2),ve=(xe[0],xe[1]),Ae=function(){var e=Object(k.a)(B.a.mark((function e(t){var n,a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.a.post("".concat(O.API_ROOT,"/newlocation"),{reference_number:t.reference_number,coord:t.coord});case 2:n=e.sent,200!==(a=n.data).statusCode&&Oe({open:!0,message:a.message});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){}),[]),Object(g.jsxs)("div",{className:i.root,children:[Object(g.jsx)(j.a,{variant:"contained",color:"secondary",className:i.spacing,onClick:function(){return $(!0)},children:"add Admin"}),Object(g.jsx)(pa,{open:G,onClose:function(){return $(!1)}}),Object(g.jsxs)(W.a,{className:i.paper,children:[Object(g.jsx)(wa,{numSelected:A.length,data:n,selectedRows:Object(N.a)(A)}),Object(g.jsx)(R.a,{children:Object(g.jsxs)(E.a,{className:i.table,"aria-labelledby":"tableTitle",size:H?"small":"medium","aria-label":"enhanced table",children:[Object(g.jsx)(va,{classes:i,numSelected:A.length,order:u,orderBy:p,onSelectAllClick:function(e){if(e.target.checked){var t=n.map((function(e){return e.ID}));y(t)}else y([])},onRequestSort:function(e,t){b(p===t&&"asc"===u?"desc":"asc"),f(t)},rowCount:n.length}),Object(g.jsxs)(T.a,{children:[ga(n,Oa(u,p)).slice(C*Y,C*Y+Y).map((function(e,t){var a=function(e){return-1!==A.indexOf(e)}(e.employeeID),r="enhanced-table-checkbox-".concat(t);return Object(g.jsxs)(V.a,{hover:!0,role:"checkbox","aria-checked":a,tabIndex:-1,selected:a,children:[Object(g.jsx)(F.a,{align:"center",children:Object(g.jsx)(j.a,{variant:"contained",color:"secondary",className:i.spacing,onClick:function(){},children:"View"})},"action"),Object(g.jsx)(F.a,{align:"center",children:Object(g.jsx)(z.a,{"aria-label":"delete",onClick:function(){return function(e,t){var a=n.filter((function(t){return t.id==e}))[0];"Save"!=t||a.coord?(c((function(t){return n.map((function(t){return t.id===e?Object(o.a)(Object(o.a)({},t),{},{isEditMode:!t.isEditMode}):t}))})),"Save"==t&&(Ae(Object(o.a)({},a)),ve([]))):Oe({open:!0,message:"Coord is not allowed to be empty"})}(e.employeeID,"Edit")},children:Object(g.jsx)(ae.a,{})})},"action"),Object(g.jsx)(F.a,{component:"th",id:r,scope:"row",padding:"none",align:"center",children:e.employeeID||"-"}),Object(g.jsx)(F.a,{align:"center",children:e.firstName||"-"})," ",Object(g.jsx)(F.a,{align:"center",children:e.lastName||"-"})," ",Object(g.jsx)(F.a,{align:"center",children:e.phoneNumber||"-"})," ",Object(g.jsx)(F.a,{align:"center",children:e.telephone||"-"})," ",Object(g.jsx)(F.a,{align:"center",children:e.location||"-"})," "]},e.employeeID)})),ee>0&&Object(g.jsx)(V.a,{style:{height:(H?33:53)*ee},children:Object(g.jsx)(F.a,{colSpan:6})})]})]})}),Object(g.jsx)(L.a,{rowsPerPageOptions:[100,200,300],component:"div",count:n.length,rowsPerPage:Y,page:C,onChangePage:function(e,t){I(t)},onChangeRowsPerPage:function(e){Z(parseInt(e.target.value,10)),I(0)}})]}),Object(g.jsx)(te.a,{open:De.open,autoHideDuration:3e3,onClose:ge,children:Object(g.jsx)(ce,{onClose:ge,severity:"error",children:De.message})}),Object(g.jsx)(K.a,{control:Object(g.jsx)(X.a,{checked:H,onChange:function(e){q(e.target.checked)}}),label:"Dense padding"})]})}var Na=function(){return Object(g.jsx)(v.a,{theme:S,children:Object(g.jsxs)(A.a,{children:[Object(g.jsx)(C.a,{routes:[{name:"Administrators",link:"/",activeIndex:0},{name:"Accountants",link:"/accountant",activeIndex:1},{name:"Customer Services",link:"/customerService",activeIndex:2},{name:"Freight Brokers",link:"/freightBroker",activeIndex:3},{name:"Logistic Managers",link:"/logisticManager",activeIndex:4}]}),Object(g.jsxs)(y.c,{children:[Object(g.jsxs)(y.a,{exact:!0,path:"/",children:[" ",Object(g.jsx)(Ca,{})," "]}),Object(g.jsxs)(y.a,{exact:!0,path:"/customerService",children:[" ",Object(g.jsx)(nn,{})," "]}),Object(g.jsxs)(y.a,{exact:!0,path:"/accountant",children:[" ",Object(g.jsx)(On,{})," "]}),Object(g.jsxs)(y.a,{exact:!0,path:"/logisticManager",children:[" ",Object(g.jsx)(_n,{})," "]}),Object(g.jsxs)(y.a,{exact:!0,path:"/freightBroker",children:[" ",Object(g.jsx)(Xn,{})," "]})]})]})})};var ka=function(){return Object(g.jsx)(v.a,{theme:S,children:Object(g.jsxs)(A.a,{children:[Object(g.jsx)(C.a,{routes:[{name:"Orders",link:"/",activeIndex:0}]}),Object(g.jsx)(y.c,{children:Object(g.jsxs)(y.a,{exact:!0,path:"/",children:[" ",Object(g.jsx)("h1",{children:" BYE BUEEEEEE"})," "]})})]})})};Object(je.a)((function(e){return{root:{"label + &":{marginTop:e.spacing(3)}},input:{borderRadius:4,position:"relative",backgroundColor:e.palette.background.paper,border:"1px solid #ced4da",fontSize:16,padding:"10px 26px 10px 12px",transition:e.transitions.create(["border-color","box-shadow"]),fontFamily:["-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(","),"&:focus":{borderRadius:4,borderColor:"#80bdff",boxShadow:"0 0 0 0.2rem rgba(0,123,255,.25)"}}}}))(de.a);var Ia={position:"absolute",top:"100%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"#ffffff",padding:"40px",zIndex:1e3,width:"50%",height:"70%",borderRadius:"1em",display:"inline-table"},Ba={position:"fixed",display:"flex",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, .7)",zIndex:1e3,height:"100%",width:"100%",overflowY:"auto"},Pa=Object(m.a)({h5:{color:"white"}});function _a(e){var t=e.open,n=e.children,r=e.onClose,c=Object(a.useState)(!0),l=Object(s.a)(c,2),h=l[0],m=(l[1],Object(a.useState)("")),p=Object(s.a)(m,2),f=(p[0],p[1],Object(a.useState)("")),x=Object(s.a)(f,2),v=(x[0],x[1],Object(a.useState)("None")),A=Object(s.a)(v,2),y=(A[0],A[1],Object(a.useState)(null)),w=Object(s.a)(y,2),S=(w[0],w[1],Object(a.useState)([])),C=Object(s.a)(S,2),N=(C[0],C[1],Object(a.useState)({firstName:"",lastName:"",email:"",phoneNumber:"",password:"",telephone:"",roomNumber:""})),I=Object(s.a)(N,2),P=I[0],_=I[1],E=Pa(),T=function(){var e=Object(k.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=JSON.stringify({employeeID:sessionStorage.getItem("userId"),firstName:P.firstName,lastName:P.lastName,email:P.email,phoneNumber:P.phoneNumber,office:{telephone:P.telephone,roomNumber:P.roomNumber}}),console.log(t),D.a.post("".concat(O.API_ROOT,"/api/warehouseManager/addWorker"),t,{headers:{Authorization:"Bearer token","Content-Type":"application/json"}}).then((function(e){console.log(e),"SUCCESS"===e.data.status&&r()})).catch((function(e){Object(pe.a)(!1)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return t?i.a.createPortal(Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("div",{style:Ba}),Object(g.jsxs)("div",{style:Ia,children:[Object(g.jsxs)(d.a,{container:!0,spacing:1,style:{minWidth:"70vw",minHeight:"100vh"},direction:"column",children:[Object(g.jsx)(d.a,{container:!0,direction:"row",style:{minHeight:"40vh",minWidth:"62vw"},id:"WorkerDetails",children:Object(g.jsxs)(d.a,{container:!0,spacing:3,direction:"column",alignItems:"left",justify:"top",lg:4,xl:3,style:{minHeight:"20vh"},children:[Object(g.jsx)(d.a,{style:{minHeight:"13vh"},item:!0,id:"AddWorker",children:Object(g.jsx)(u.a,{color:"secondary",variant:"h3",children:"Add Worker"})}),Object(g.jsx)(d.a,{item:!0,id:"personalLabel",children:Object(g.jsx)(u.a,{color:"primary",variant:"h5",children:"personal Details:"})}),Object(g.jsx)(d.a,{item:!0,id:"personalDetails",children:Object(g.jsxs)(d.a,{direction:"column",spacing:4,children:[Object(g.jsxs)(d.a,{container:!0,direction:"row",spacing:2,id:"ContactInfo",children:[Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(b.a,{required:!0,color:"primary",error:!h,id:"firstName",label:"First Name",onChange:function(e){return _((function(t){return Object(o.a)(Object(o.a)({},t),{},{firstName:e.target.value})}))},value:P.firstName})}),Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(b.a,{required:!0,color:"primary",error:!h,id:"lastName",label:"Last Name",onChange:function(e){return _((function(t){return Object(o.a)(Object(o.a)({},t),{},{lastName:e.target.value})}))},value:P.lastName})}),Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(b.a,{required:!0,color:"primary",error:!h,id:"phoneNumber",label:"Phone Number",onChange:function(e){_((function(t){return Object(o.a)(Object(o.a)({},t),{},{phoneNumber:e.target.value})}))},value:P.phoneNumber})})]}),Object(g.jsxs)(d.a,{container:!0,direction:"row",spacing:2,id:"credentials",children:[Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(b.a,{required:!0,color:"primary",error:!h,id:"email",label:"Email",onChange:function(e){return _((function(t){return Object(o.a)(Object(o.a)({},t),{},{email:e.target.value})}))},value:P.email})}),Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(b.a,{required:!0,color:"primary",error:!h,id:"password",label:"Password",onChange:function(e){return _((function(t){return Object(o.a)(Object(o.a)({},t),{},{password:e.target.value})}))},value:P.password})})]})]})}),Object(g.jsx)(d.a,{item:!0,id:"addressLabel",children:Object(g.jsx)(u.a,{color:"primary",variant:"h5",children:"Address:"})}),Object(g.jsx)(d.a,{item:!0,id:"",children:Object(g.jsx)(b.a,{required:!0,color:"primary",error:!h,id:"firstName",label:"landline",onChange:function(e){return _((function(t){return Object(o.a)(Object(o.a)({},t),{},{telephone:e.target.value})}))},value:P.telephone})}),Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(b.a,{required:!0,color:"primary",error:!h,id:"roomNumber",label:"Room Number",onChange:function(e){return _((function(t){return Object(o.a)(Object(o.a)({},t),{},{roomNumber:e.target.value})}))},value:P.roomNumber})})]})}),Object(g.jsxs)(d.a,{container:!0,spacing:2,direction:"row",id:"Buttons",children:[Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(j.a,{variant:"contained",color:"secondary",className:E.spacing,onClick:r,sx:{p:2},children:"Cancel"})}),Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(j.a,{variant:"contained",color:"secondary",className:E.spacing,onClick:T,children:"add Worker"})})]})]}),n]})]}),document.getElementById("portal")):null}function Ea(e,t,n){return t[n]<e[n]?-1:t[n]>e[n]?1:0}function Ta(e,t){return"desc"===e?function(e,n){return Ea(e,n,t)}:function(e,n){return-Ea(e,n,t)}}function Fa(e,t){var n=e.map((function(e,t){return[e,t]}));return n.sort((function(e,n){var a=t(e[0],n[0]);return 0!==a?a:e[1]-n[1]})),n.map((function(e){return e[0]}))}function Ra(e,t){var n=".".concat(e),a=new Date,r="routifics_".concat(a.getDate()).concat(a.getMonth()).concat(a.getFullYear(),"_").concat(a.getTime()),c={Sheets:{data:G.a.utils.json_to_sheet(t)},SheetNames:["data"]},i=G.a.write(c,{bookType:"".concat(e),type:"array"}),o=new Blob([i],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});ee.a.saveAs(o,r+n)}var Ha=[{id:"employeeID",numeric:!0,disablePadding:!1,label:"ID"},{id:"firstName",numeric:!1,disablePadding:!1,label:"First Name"},{id:"lastName",numeric:!1,disablePadding:!1,label:"Last Name"},{id:"phoneNumber",numeric:!0,disablePadding:!1,label:"phone Number"},{id:"telephone",numeric:!0,disablePadding:!1,label:"telephone"},{id:"shipmentID",numeric:!0,disablePadding:!1,label:"vehicleID"}];function La(e){var t=e.classes,n=(e.onSelectAllClick,e.order),a=e.orderBy,r=(e.numSelected,e.rowCount,e.onRequestSort),c=e.Display;return Object(g.jsx)(H.a,{children:Object(g.jsxs)(V.a,{children:["View"===c?Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(F.a,{align:"center",className:t.tableCell,children:"Details"},"view"),Object(g.jsx)(F.a,{align:"center",className:t.tableCell,children:"Delete"},"action")]}):Object(g.jsxs)(F.a,{align:"center",className:t.tableCell,children:["Action"," "]},"action"),Ha.map((function(e){return Object(g.jsx)(F.a,{align:"center",padding:e.disablePadding?"none":"default",sortDirection:a===e.id&&n,children:Object(g.jsxs)(q.a,{active:a===e.id,direction:a===e.id?n:"asc",onClick:(c=e.id,function(e){r(e,c)}),children:[e.label,a===e.id?Object(g.jsx)("span",{className:t.visuallyHidden,children:"desc"===n?"sorted descending":"sorted ascending"}):null]})},e.id);var c}))]})})}var Va=Object(m.a)((function(e){return{root:{paddingLeft:e.spacing(2),paddingRight:e.spacing(1)},highlight:"light"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(_.f)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},marginL1:{marginLeft:"1rem"},title:{flex:"1 1 100%"}}})),qa=function(e){var t=[];return Array.isArray(e)&&(t=e.map((function(e){return{reference_number:e.reference_number,coord:e.locations&&e.locations.length>0?e.locations[0].coord:null,from:e.routifics&&e.routifics.length>0?e.routifics[0].from:null,to:e.routifics&&e.routifics.length>0?e.routifics[0].to:null,aging:"7",load:null,destination_phone:e.destination_phone,email:null,service_type:e.service_type,priority:"yes",destination_name:e.destination_name,cod_amount:e.cod_amount,customer_reference_number:e.customer_reference_number,whatsapp_link:"http://wa.me/"+e.destination_phone,whatsapp_location:"http://wa.me/"+e.destination_phone+"?text=%D9%85%D8%B1%D8%AD%D8%A8%D8%A7%20"+e.destination_name.split(" ").slice(0,2).join("%20")+"%20%D9%85%D8%B9%D8%A7%D9%83%20%D9%85%D9%86%D8%AF%D9%88%D8%A8%20%D8%B4%D8%B1%D9%83%D8%A9%20%D9%85%D8%AD%D9%85%D9%88%D9%84%D8%8C%20%D8%A7%D8%B1%D8%AC%D9%88%20%D8%A5%D8%B1%D8%B3%D8%A7%D9%84%20%D8%A7%D9%84%D9%84%D9%88%D9%83%D9%8A%D8%B4%D9%86%20%D9%84%D9%8A%D8%AA%D9%85%20%D8%AA%D9%88%D8%B5%D9%8A%D9%84%20%D8%B4%D8%AD%D9%86%D8%AA%D9%83%20%D8%A8%D8%B1%D9%82%D9%85%20"+e.reference_number,whatsapp_no_answer:"http://wa.me/"+e.destination_phone+"?text=%D9%85%D8%B1%D8%AD%D8%A8%D8%A7%20"+e.destination_name.split(" ").slice(0,2).join("%20")+"%20%D9%85%D8%B9%D8%A7%D9%83%20%D9%85%D9%86%D8%AF%D9%88%D8%A8%20%D8%B4%D8%B1%D9%83%D8%A9%20%D9%85%D8%AD%D9%85%D9%88%D9%84%D8%8C%20%D8%A7%D9%86%D8%A7%20%D9%82%D8%B1%D9%8A%D8%A8%20%D9%85%D9%86%20%D8%A7%D9%84%D9%85%D9%88%D9%82%D8%B9%20%D9%88%D8%AA%D9%85%D8%AA%20%D9%85%D8%AD%D8%A7%D9%88%D9%84%D8%A9%20%D8%A7%D9%84%D8%A7%D8%AA%D8%B5%D8%A7%D9%84%D8%8C%20%D9%86%D8%B1%D8%AC%D9%88%20%D8%A7%D9%84%D8%B1%D8%AF%20%D8%B3%D8%B1%D9%8A%D8%B9%D8%A7%20%D9%84%D9%8A%D8%AA%D9%85%20%D8%AA%D9%88%D8%B5%D9%8A%D9%84%20%D8%B4%D8%AD%D9%86%D8%AA%D9%83%20"+e.reference_number+"%20%D9%81%D9%8A%20%D8%AD%D8%A7%D9%84%20%D9%84%D9%85%20%D9%8A%D8%AA%D9%85%20%D8%A7%D9%84%D8%B1%D8%AF%20%D8%B3%D8%B1%D9%8A%D8%B9%D8%A7%D8%8C%20%D8%B3%D8%AA%D8%AA%D9%85%20%D8%A5%D8%B9%D8%A7%D8%AF%D8%A9%20%D8%A7%D9%84%D8%AC%D8%AF%D9%88%D9%84%D8%A9%20%D9%84%D9%8A%D9%88%D9%85%20%D8%A7%D9%84%D8%B9%D9%85%D9%84%20%D8%A7%D9%84%D9%82%D8%A7%D8%AF%D9%85%D8%8C%20%D9%88%D8%B4%D9%83%D8%B1%D8%A7%D8%8C%0A"}}))),t},Ma=function(e){var t=Va(),n=e.numSelected,r=e.selectedRows,c=(e.data,Object(a.useState)(!1)),i=Object(s.a)(c,2);i[0],i[1];function o(e){return b.apply(this,arguments)}function b(){return b=Object(k.a)(B.a.mark((function e(t){var n,a,c;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.a.post("".concat(O.API_ROOT,"/rfdexport"),{reference_number:Object(N.a)(r)});case 2:n=e.sent,a=n.data,c=qa(a),Ra(t,c);case 6:case"end":return e.stop()}}),e)}))),b.apply(this,arguments)}return Object(g.jsxs)(M.a,{className:Object(P.a)(t.root,Object(l.a)({},t.highlight,n>0)),children:[n>0?Object(g.jsxs)(u.a,{className:t.title,color:"inherit",variant:"subtitle1",component:"div",children:[n," selected"]}):Object(g.jsx)(u.a,{className:t.title,variant:"h6",id:"tableTitle",component:"div",children:"Workers"}),n>0?Object(g.jsx)(Y.a,{title:"",children:Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(d.a,{container:!0,children:Object(g.jsx)(j.a,{onClick:Object(k.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o("csv");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),className:t.marginL1,variant:"contained",children:"Export CSV"})})})}):Object(g.jsx)(Y.a,{title:"Filter list",children:Object(g.jsx)(z.a,{"aria-label":"filter list",children:Object(g.jsx)(Q.a,{})})})]})},Wa=Object(m.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:750},ml1:{marginLeft:"1rem"},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}}));function Ua(e){var t=e.Display,n=e.setDispatcher,c=Object(a.useState)([]),i=Object(s.a)(c,2),l=i[0],d=i[1],u=Wa(),b=r.a.useState("asc"),h=Object(s.a)(b,2),m=h[0],p=h[1],f=r.a.useState("employeeID"),x=Object(s.a)(f,2),v=x[0],A=x[1],y=r.a.useState([]),w=Object(s.a)(y,2),S=w[0],C=w[1],I=r.a.useState(0),P=Object(s.a)(I,2),_=P[0],H=P[1],q=r.a.useState(!1),M=Object(s.a)(q,2),U=M[0],Y=M[1],Z=r.a.useState(200),Q=Object(s.a)(Z,2),J=Q[0],G=Q[1],$=Object(a.useState)(!1),ee=Object(s.a)($,2),ne=ee[0],re=ee[1],ie=J-Math.min(J,l.length-_*J),se=function(){var e=Object(k.a)(B.a.mark((function e(t,n){var a,r,c;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=sessionStorage.getItem("token"),r=oe.a.stringify({employeeID:sessionStorage.getItem("userId")},{skipEmptyString:!0,skipNull:!0}),c=[],D.a.get("".concat(O.API_ROOT,"/api/warehouseManager/viewWorkers").concat(r?"?".concat(r):""),{headers:{Authorization:"Bearer ".concat(a)}}).then((function(e){console.log(e.data),c=e.data;var t=[];console.log("is Array"),Array.isArray(c)&&(t=c.map((function(e,t){return Object(o.a)(Object(o.a)({},e),{},{isEditMode:!1})}))),console.log(t),d(Object(N.a)(t))})),console.log(c);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){se(),console.log(l)}),[]);le=l[0];var le,de,ue,je,be,he,me,pe,De,Oe=r.a.useState({open:!1,message:""}),ge=Object(s.a)(Oe,2),fe=ge[0],xe=ge[1],ve=function(e,t){"clickaway"!==t&&xe({open:!1,message:""})},Ae=r.a.useState({}),ye=Object(s.a)(Ae,2),we=(ye[0],ye[1]),Se=function(){var e=Object(k.a)(B.a.mark((function e(t){var n,a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.a.post("".concat(O.API_ROOT,"/newlocation"),{reference_number:t.reference_number,coord:t.coord});case 2:n=e.sent,200!==(a=n.data).statusCode&&xe({open:!0,message:a.message});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(g.jsxs)("div",{className:u.root,children:["Assign"!==t?Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(j.a,{variant:"contained",color:"secondary",className:u.spacing,onClick:function(){return re(!0)},children:"Add Worker"})}):Object(g.jsx)(g.Fragment,{}),Object(g.jsx)(_a,{open:ne,onClose:function(){return re(!1)}}),Object(g.jsxs)(W.a,{className:u.paper,children:[Object(g.jsx)(Ma,{numSelected:S.length,data:l,selectedRows:Object(N.a)(S)}),Object(g.jsx)(R.a,{children:Object(g.jsxs)(E.a,{className:u.table,"aria-labelledby":"tableTitle",size:U?"small":"medium","aria-label":"enhanced table",children:[Object(g.jsx)(La,{classes:u,numSelected:S.length,order:m,orderBy:v,onSelectAllClick:function(e){if(e.target.checked){var t=l.map((function(e){return e.ID}));C(t)}else C([])},onRequestSort:function(e,t){p(v===t&&"asc"===m?"desc":"asc"),A(t)},rowCount:l.length,Display:t}),Object(g.jsxs)(T.a,{children:[Fa(l,Ta(m,v)).slice(_*J,_*J+J).map((function(e,a){var r=function(e){return-1!==S.indexOf(e)}(e.employeeID),c="enhanced-table-checkbox-".concat(a);return Object(g.jsxs)(V.a,{hover:!0,role:"checkbox","aria-checked":r,tabIndex:-1,selected:r,children:["View"===t?Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(F.a,{align:"center",children:Object(g.jsx)(j.a,{variant:"contained",color:"secondary",className:u.spacing,onClick:function(){},children:"View"})},"action"),Object(g.jsx)(F.a,{align:"center",children:Object(g.jsx)(z.a,{"aria-label":"delete",onClick:function(){return function(e,t){var n=l.filter((function(t){return t.id==e}))[0];"Save"!=t||n.coord?(d((function(t){return l.map((function(t){return t.id===e?Object(o.a)(Object(o.a)({},t),{},{isEditMode:!t.isEditMode}):t}))})),"Save"==t&&(Se(Object(o.a)({},n)),we([]))):xe({open:!0,message:"Coord is not allowed to be empty"})}(e.employeeID,"Edit")},children:Object(g.jsx)(ae.a,{})})},"action")]}):Object(g.jsx)(F.a,{align:"center",children:Object(g.jsx)(j.a,{variant:"contained",color:"secondary",className:u.spacing,onClick:function(){console.log("empID: ".concat(e.employeeID)),n(e.employeeID)},children:"Assign"})},"action"),Object(g.jsx)(F.a,{component:"th",id:c,scope:"row",padding:"none",align:"center",children:e.employeeID||"-"}),Object(g.jsx)(F.a,{align:"center",children:e.firstName||"-"})," ",Object(g.jsx)(F.a,{align:"center",children:e.lastName||"-"})," ",Object(g.jsx)(F.a,{align:"center",children:e.phoneNumber||"-"})," ",Object(g.jsx)(F.a,{align:"center",children:e.telephone||"-"})," ",Object(g.jsx)(F.a,{align:"center",children:e.assignedShelfs||"-"})," "]},e.employeeID)})),ie>0&&Object(g.jsx)(V.a,{style:{height:(U?33:53)*ie},children:Object(g.jsx)(F.a,{colSpan:6})})]})]})}),Object(g.jsx)(L.a,{rowsPerPageOptions:[100,200,300],component:"div",count:l.length,rowsPerPage:J,page:_,onChangePage:function(e,t){H(t)},onChangeRowsPerPage:function(e){G(parseInt(e.target.value,10)),H(0)}})]}),Object(g.jsx)(te.a,{open:fe.open,autoHideDuration:3e3,onClose:ve,children:Object(g.jsx)(ce,{onClose:ve,severity:"error",children:fe.message})}),Object(g.jsx)(K.a,{control:Object(g.jsx)(X.a,{checked:U,onChange:function(e){Y(e.target.checked)}}),label:"Dense padding"})]})}function za(e,t,n){return t[n]<e[n]?-1:t[n]>e[n]?1:0}function Ya(e,t){return"desc"===e?function(e,n){return za(e,n,t)}:function(e,n){return-za(e,n,t)}}function Ka(e,t){var n=e.map((function(e,t){return[e,t]}));return n.sort((function(e,n){var a=t(e[0],n[0]);return 0!==a?a:e[1]-n[1]})),n.map((function(e){return e[0]}))}var Xa=[{id:"shipmentID",numeric:!0,disablePadding:!1,label:"ID"},{id:"shipmentName",numeric:!1,disablePadding:!1,label:"Name"},{id:"currentCity",numeric:!1,disablePadding:!1,label:"Current City"},{id:"location",numeric:!0,disablePadding:!1,label:"Deliver To"},{id:"status",numeric:!0,disablePadding:!1,label:"Status"},{id:"assignedEmployee",numeric:!0,disablePadding:!1,label:"assigned Emp"}];function Za(e){var t=e.classes,n=e.onSelectAllClick,a=e.order,r=e.orderBy,c=e.numSelected,i=e.rowCount,o=e.onRequestSort;return Object(g.jsx)(H.a,{children:Object(g.jsxs)(V.a,{children:[Object(g.jsx)(F.a,{align:"center",className:t.tableCell,children:"Details"},"view"),Object(g.jsx)(F.a,{padding:"checkbox",children:Object(g.jsx)(U.a,{indeterminate:c>0&&c<i,checked:i>0&&c===i,onChange:n,inputProps:{"aria-label":"select all desserts"}})}),Xa.map((function(e){return Object(g.jsx)(F.a,{align:"center",padding:e.disablePadding?"none":"default",sortDirection:r===e.id&&a,children:Object(g.jsxs)(q.a,{active:r===e.id,direction:r===e.id?a:"asc",onClick:(n=e.id,function(e){o(e,n)}),children:[e.label,r===e.id?Object(g.jsx)("span",{className:t.visuallyHidden,children:"desc"===a?"sorted descending":"sorted ascending"}):null]})},e.id);var n}))]})})}var Qa=Object(m.a)((function(e){return{root:{paddingLeft:e.spacing(2),paddingRight:e.spacing(1)},highlight:"light"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(_.f)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},marginL1:{marginLeft:"1rem"},title:{flex:"1 1 100%"}}})),Ja=function(e){var t=Qa(),n=e.numSelected,r=e.selectedRows,c=(e.data,e.setShipments),i=Object(a.useState)(!1),o=Object(s.a)(i,2);o[0],o[1];return Object(g.jsxs)(M.a,{className:Object(P.a)(t.root,Object(l.a)({},t.highlight,n>0)),children:[n>0?Object(g.jsxs)(u.a,{className:t.title,color:"inherit",variant:"subtitle1",component:"div",children:[n," selected"]}):Object(g.jsx)(u.a,{className:t.title,variant:"h6",id:"tableTitle",component:"div",children:"Shipments"}),n>0?Object(g.jsx)(Y.a,{title:"",children:Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)(d.a,{container:!0,direction:"row",spacing:2,children:[Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(j.a,{color:"secondary",onClick:function(){console.log("selected rows: ".concat(r)),c(Object(N.a)(r))},className:t.marginL1,variant:"contained",children:"Assign"})}),Object(g.jsx)(d.a,{item:!0,children:" "})]})})}):Object(g.jsx)(Y.a,{title:"Filter list",children:Object(g.jsx)(z.a,{"aria-label":"filter list",children:Object(g.jsx)(Q.a,{})})})," "]})},Ga=Object(m.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:750},ml1:{marginLeft:"1rem"},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}}));function $a(e){var t=Object(a.useState)([]),n=Object(s.a)(t,2),c=n[0],i=n[1],l=Ga(),d=r.a.useState("asc"),u=Object(s.a)(d,2),b=u[0],h=u[1],m=r.a.useState("shipmentID"),p=Object(s.a)(m,2),f=p[0],x=p[1],v=r.a.useState([]),A=Object(s.a)(v,2),y=A[0],w=A[1],S=r.a.useState(0),C=Object(s.a)(S,2),I=C[0],P=C[1],_=r.a.useState(!1),H=Object(s.a)(_,2),q=H[0],M=H[1],z=r.a.useState(200),Y=Object(s.a)(z,2),Z=Y[0],Q=Y[1],J=Object(a.useState)(!1),G=Object(s.a)(J,2),$=(G[0],G[1],Object(a.useState)(e.filters[0])),ee=Object(s.a)($,2),ne=(ee[0],ee[1]),ae=(e.shipments,e.setShipments),re=Z-Math.min(Z,c.length-I*Z),ie=function(){var e=Object(k.a)(B.a.mark((function e(t){var n,a,r;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=sessionStorage.getItem("token"),ne(t),t,a=JSON.stringify({employeeID:sessionStorage.getItem("userId")},{skipEmptyString:!0,skipNull:!0}),r=[],D.a.post("".concat(O.API_ROOT,"/api/warehouseManager/viewShipments"),a,{headers:{Authorization:"Bearer ".concat(n),"Content-Type":"application/json"}}).then((function(e){console.log(e.data),r=e.data;var t=[];Array.isArray(r)&&(t=r.map((function(e,t){return Object(o.a)(Object(o.a)({},e),{},{employeeID:e.employeeID,isEditMode:!1})}))),i(Object(N.a)(t))}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){ie()}),[]);var oe=r.a.useState({open:!1,message:""}),se=Object(s.a)(oe,2),le=se[0],de=se[1],ue=function(e,t){"clickaway"!==t&&de({open:!1,message:""})},je=r.a.useState({}),be=Object(s.a)(je,2);be[0],be[1];return Object(a.useEffect)((function(){}),[]),Object(g.jsxs)("div",{className:l.root,children:[Object(g.jsx)(Ot,{Filter:{name:"Status",filters:Object(N.a)(e.filters)},handleFilters:function(e){return ie(e)}}),Object(g.jsxs)(W.a,{className:l.paper,children:[Object(g.jsx)(Ja,{numSelected:y.length,data:c,selectedRows:Object(N.a)(y),setShipments:ae}),Object(g.jsx)(R.a,{children:Object(g.jsxs)(E.a,{className:l.table,"aria-labelledby":"tableTitle",size:q?"small":"medium","aria-label":"enhanced table",children:[Object(g.jsx)(Za,{classes:l,numSelected:y.length,order:b,orderBy:f,onSelectAllClick:function(e){if(e.target.checked){var t=c.map((function(e){return e.shipmentID}));w(t)}else w([])},onRequestSort:function(e,t){h(f===t&&"asc"===b?"desc":"asc"),x(t)},rowCount:c.length}),Object(g.jsxs)(T.a,{children:[Ka(c,Ya(b,f)).slice(I*Z,I*Z+Z).map((function(e,t){var n,a=(n=e.shipmentID,-1!==y.indexOf(n)),r="enhanced-table-checkbox-".concat(t);return Object(g.jsxs)(V.a,{hover:!0,role:"checkbox","aria-checked":a,tabIndex:-1,selected:a,children:[Object(g.jsx)(F.a,{align:"center",children:Object(g.jsx)(j.a,{variant:"contained",color:"secondary",className:l.spacing,onClick:function(){},children:"View"})},"view"),Object(g.jsx)(F.a,{padding:"checkbox",children:Object(g.jsx)(U.a,{onChange:function(t){return function(e,t){var n=y.indexOf(t),a=[];-1===n?a=a.concat(y,t):0===n?a=a.concat(y.slice(1)):n===y.length-1?a=a.concat(y.slice(0,-1)):n>0&&(a=a.concat(y.slice(0,n),y.slice(n+1))),w(a)}(0,e.shipmentID)},checked:a,inputProps:{"aria-labelledby":r}})}),Object(g.jsx)(F.a,{component:"th",id:r,scope:"row",padding:"none",align:"center",children:e.shipmentID||"-"}),Object(g.jsx)(F.a,{align:"center",children:e.shipmentName||"-"})," ",Object(g.jsx)(F.a,{align:"center",children:e.currentCity||"-"})," ",Object(g.jsx)(F.a,{align:"center",children:e.shipmentLocation||"-"})," ",Object(g.jsx)(F.a,{align:"center",children:e.deliveryStatus||"-"})," ",Object(g.jsx)(F.a,{align:"center",children:e.assignedEmployee||"-"})," "]},e.shipmentID)})),re>0&&Object(g.jsx)(V.a,{style:{height:(q?33:53)*re},children:Object(g.jsx)(F.a,{colSpan:6})})]})]})}),Object(g.jsx)(L.a,{rowsPerPageOptions:[100,200,300],component:"div",count:c.length,rowsPerPage:Z,page:I,onChangePage:function(e,t){P(t)},onChangeRowsPerPage:function(e){Q(parseInt(e.target.value,10)),P(0)}})]}),Object(g.jsx)(te.a,{open:le.open,autoHideDuration:3e3,onClose:ue,children:Object(g.jsx)(ce,{onClose:ue,severity:"error",children:le.message})}),Object(g.jsx)(K.a,{control:Object(g.jsx)(X.a,{checked:q,onChange:function(e){M(e.target.checked)}}),label:"Dense padding"})]})}var er=function(){var e=Object(a.useState)("View Shipments"),t=Object(s.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)([]),i=Object(s.a)(c,2),o=i[0],l=i[1],d=Object(a.useState)(null),u=Object(s.a)(d,2),j=u[0],b=u[1],h=Object(a.useState)(null),m=Object(s.a)(h,2),p=m[0],f=m[1],x=function(){var e=Object(k.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("in post request"),t=JSON.stringify({shipmentID:o,assignedEmployeeID:p,employeeID:sessionStorage.getItem("userId")}),D.a.post("".concat(O.API_ROOT,"/api/warehouseManager/assignShipments"),t,{headers:{Authorization:"Bearer ".concat(sessionStorage.getItem("token")),"Content-Type":"application/json"}}).then((function(e){"SUCCESS"===e.data.status&&(console.log("assigned successfully!!"),f(null),b(null),l([]))}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){o.length>0&&null===p?r("View Drivers"):0===o.length?r("View Shipments"):null!==p&&o.length>0&&(console.log(j),x())}),[p,o]),"View Drivers"===n?Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(Ua,{setDispatcher:f,Display:"Assign"})}):Object(g.jsx)(g.Fragment,{children:Object(g.jsx)($a,{setShipments:l,filters:["ONROAD"]})})};var tr=function(){var e=Object(a.useState)("View Shipments"),t=Object(s.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)([]),i=Object(s.a)(c,2),o=i[0],l=i[1],d=Object(a.useState)(null),u=Object(s.a)(d,2),j=u[0],b=u[1],h=Object(a.useState)(null),m=Object(s.a)(h,2),p=m[0],f=m[1],x=function(){var e=Object(k.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("in post request"),t=JSON.stringify({shipmentID:o,assignedEmployeeID:p,employeeID:sessionStorage.getItem("userId")}),D.a.post("".concat(O.API_ROOT,"/api/warehouseManager/assignShipments"),t,{headers:{Authorization:"Bearer ".concat(sessionStorage.getItem("token")),"Content-Type":"application/json"}}).then((function(e){"SUCCESS"===e.data.status&&(console.log("assigned successfully!!"),f(null),b(null),l([]))}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){o.length>0&&null===p?r("View Drivers"):0===o.length?r("View Shipments"):null!==p&&o.length>0&&(console.log(j),x())}),[p,o]),"View Drivers"===n?Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(Ua,{setDispatcher:f,Display:"Assign"})}):Object(g.jsx)(g.Fragment,{children:Object(g.jsx)($a,{setShipments:l,filters:["WAREHOUSE"]})})};function nr(e,t,n){return t[n]<e[n]?-1:t[n]>e[n]?1:0}function ar(e,t){return"desc"===e?function(e,n){return nr(e,n,t)}:function(e,n){return-nr(e,n,t)}}function rr(e,t){var n=e.map((function(e,t){return[e,t]}));return n.sort((function(e,n){var a=t(e[0],n[0]);return 0!==a?a:e[1]-n[1]})),n.map((function(e){return e[0]}))}var cr=[{id:"shelfNumber",numeric:!0,disablePadding:!1,label:"Number"},{id:"row",numeric:!1,disablePadding:!1,label:"Row"},{id:"section",numeric:!1,disablePadding:!1,label:"Section"},{id:"lane",numeric:!0,disablePadding:!1,label:"Lane"},{id:"floor",numeric:!0,disablePadding:!1,label:"Floor"},{id:"width",numeric:!0,disablePadding:!1,label:"Width"},{id:"height",numeric:!0,disablePadding:!1,label:"Height"},{id:"assignedShipment",numeric:!0,disablePadding:!1,label:"AssignedShipment"},{id:"assignedTo",numeric:!0,disablePadding:!1,label:"assignedTo"}];function ir(e){var t=e.classes,n=e.onSelectAllClick,a=e.order,r=e.orderBy,c=e.numSelected,i=e.rowCount,o=e.onRequestSort,s=e.filter;return Object(g.jsx)(H.a,{children:Object(g.jsxs)(V.a,{children:["Assign"===s?Object(g.jsx)(F.a,{padding:"checkbox",children:Object(g.jsx)(U.a,{indeterminate:c>0&&c<i,checked:i>0&&c===i,onChange:n,inputProps:{"aria-label":"select all desserts"}})}):Object(g.jsx)(F.a,{align:"center",className:t.tableCell,children:"Details"},"view"),cr.map((function(e){return Object(g.jsx)(F.a,{align:"center",padding:e.disablePadding?"none":"default",sortDirection:r===e.id&&a,children:Object(g.jsxs)(q.a,{active:r===e.id,direction:r===e.id?a:"asc",onClick:(n=e.id,function(e){o(e,n)}),children:[e.label,r===e.id?Object(g.jsx)("span",{className:t.visuallyHidden,children:"desc"===a?"sorted descending":"sorted ascending"}):null]})},e.id);var n}))]})})}var or=Object(m.a)((function(e){return{root:{paddingLeft:e.spacing(2),paddingRight:e.spacing(1)},highlight:"light"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(_.f)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},marginL1:{marginLeft:"1rem"},title:{flex:"1 1 100%"}}})),sr=function(e){var t=or(),n=e.numSelected,r=e.selectedRows,c=(e.data,e.setShipments),i=Object(a.useState)(!1),o=Object(s.a)(i,2);o[0],o[1];return Object(g.jsxs)(M.a,{className:Object(P.a)(t.root,Object(l.a)({},t.highlight,n>0)),children:[n>0?Object(g.jsxs)(u.a,{className:t.title,color:"inherit",variant:"subtitle1",component:"div",children:[n," selected"]}):Object(g.jsx)(u.a,{className:t.title,variant:"h6",id:"tableTitle",component:"div",children:"Shelves"}),n>0?Object(g.jsx)(Y.a,{title:"",children:Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(d.a,{container:!0,direction:"row",spacing:2,children:Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(j.a,{color:"secondary",onClick:function(){console.log("selected rows: ".concat(r)),c(Object(N.a)(r))},className:t.marginL1,variant:"contained",children:"Assign"})})})})}):Object(g.jsx)(Y.a,{title:"Filter list",children:Object(g.jsx)(z.a,{"aria-label":"filter list",children:Object(g.jsx)(Q.a,{})})})," "]})},lr=Object(m.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:750},ml1:{marginLeft:"1rem"},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}}));function dr(e){var t=Object(a.useState)([]),n=Object(s.a)(t,2),c=n[0],i=n[1],l=lr(),d=r.a.useState("asc"),u=Object(s.a)(d,2),b=u[0],h=u[1],m=r.a.useState("shelfID"),p=Object(s.a)(m,2),f=p[0],x=p[1],v=r.a.useState([]),A=Object(s.a)(v,2),y=A[0],w=A[1],S=r.a.useState(0),C=Object(s.a)(S,2),I=C[0],P=C[1],_=r.a.useState(!1),H=Object(s.a)(_,2),q=H[0],M=H[1],z=r.a.useState(200),Y=Object(s.a)(z,2),Z=Y[0],Q=Y[1],J=Object(a.useState)(!1),G=Object(s.a)(J,2),$=(G[0],G[1],e.shipments,e.setShipments),ee=Z-Math.min(Z,c.length-I*Z),ne=function(){var t=Object(k.a)(B.a.mark((function t(){var n,a,r;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=sessionStorage.getItem("token"),a=oe.a.stringify({employeeID:sessionStorage.getItem("userId")},{skipEmptyString:!0,skipNull:!0}),r=[],D.a.get("".concat(O.API_ROOT,"/api/warehouseManager/viewShelfs").concat(a?"?".concat(a):""),{headers:{Authorization:"Bearer ".concat(n),"Content-Type":"application/json"}}).then((function(t){console.log(t.data),r=t.data;var n=[];Array.isArray(r)&&(n=r.map((function(e,t){return Object(o.a)(Object(o.a)({},e),{},{employeeID:e.employeeID,isEditMode:!1})}))),"Assign"===e.filters&&(n=n.filter((function(e){return null===e.assignedTo}))),i(Object(N.a)(n))}));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Object(a.useEffect)((function(){ne()}),[]);var ae=r.a.useState({open:!1,message:""}),re=Object(s.a)(ae,2),ie=re[0],se=re[1],le=function(e,t){"clickaway"!==t&&se({open:!1,message:""})},de=r.a.useState({}),ue=Object(s.a)(de,2);ue[0],ue[1];return Object(a.useEffect)((function(){}),[]),Object(g.jsxs)("div",{className:l.root,children:[Object(g.jsxs)(W.a,{className:l.paper,children:[Object(g.jsx)(sr,{numSelected:y.length,data:c,selectedRows:Object(N.a)(y),setShipments:$,filter:e.filters}),Object(g.jsx)(R.a,{children:Object(g.jsxs)(E.a,{className:l.table,"aria-labelledby":"tableTitle",size:q?"small":"medium","aria-label":"enhanced table",children:[Object(g.jsx)(ir,{classes:l,numSelected:y.length,order:b,orderBy:f,onSelectAllClick:function(e){if(e.target.checked){var t=c.map((function(e){return e.shelfID}));w(t)}else w([])},onRequestSort:function(e,t){h(f===t&&"asc"===b?"desc":"asc"),x(t)},rowCount:c.length,filter:e.filters}),Object(g.jsxs)(T.a,{children:[rr(c,ar(b,f)).slice(I*Z,I*Z+Z).map((function(t,n){var a,r=(a=t.shelfID,-1!==y.indexOf(a)),c="enhanced-table-checkbox-".concat(n);return Object(g.jsxs)(V.a,{hover:!0,role:"checkbox","aria-checked":r,tabIndex:-1,selected:r,children:["Assign"===e.filters?Object(g.jsx)(F.a,{padding:"checkbox",children:Object(g.jsx)(U.a,{onChange:function(e){return function(e,t){var n=y.indexOf(t),a=[];-1===n?a=a.concat(y,t):0===n?a=a.concat(y.slice(1)):n===y.length-1?a=a.concat(y.slice(0,-1)):n>0&&(a=a.concat(y.slice(0,n),y.slice(n+1))),w(a)}(0,t.shelfID)},checked:r,inputProps:{"aria-labelledby":c}})}):Object(g.jsx)(F.a,{align:"center",children:Object(g.jsx)(j.a,{variant:"contained",color:"secondary",className:l.spacing,onClick:function(){},children:"View"})},"view"),Object(g.jsx)(F.a,{component:"th",id:c,scope:"row",padding:"none",align:"center",children:t.shelfNumber||"-"}),Object(g.jsx)(F.a,{align:"center",children:t.row||"-"})," ",Object(g.jsx)(F.a,{align:"center",children:t.section||"-"})," ",Object(g.jsx)(F.a,{align:"center",children:t.lane||"-"})," ",Object(g.jsx)(F.a,{align:"center",children:t.floor||"-"})," ",Object(g.jsx)(F.a,{align:"center",children:t.width||"-"})," ",Object(g.jsx)(F.a,{align:"center",children:t.height||"-"})," ",Object(g.jsx)(F.a,{align:"center",children:t.assignedShipment||"-"})," ",Object(g.jsx)(F.a,{align:"center",children:t.assignedTo||"-"})," "]},t.shelfID)})),ee>0&&Object(g.jsx)(V.a,{style:{height:(q?33:53)*ee},children:Object(g.jsx)(F.a,{colSpan:6})})]})]})}),Object(g.jsx)(L.a,{rowsPerPageOptions:[100,200,300],component:"div",count:c.length,rowsPerPage:Z,page:I,onChangePage:function(e,t){P(t)},onChangeRowsPerPage:function(e){Q(parseInt(e.target.value,10)),P(0)}})]}),Object(g.jsx)(te.a,{open:ie.open,autoHideDuration:3e3,onClose:le,children:Object(g.jsx)(ce,{onClose:le,severity:"error",children:ie.message})}),Object(g.jsx)(K.a,{control:Object(g.jsx)(X.a,{checked:q,onChange:function(e){M(e.target.checked)}}),label:"Dense padding"})]})}var ur=function(){var e=Object(a.useState)("View Shipments"),t=Object(s.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)([]),i=Object(s.a)(c,2),o=i[0],l=i[1],d=Object(a.useState)(null),u=Object(s.a)(d,2),j=u[0],b=u[1],h=Object(a.useState)(null),m=Object(s.a)(h,2),p=m[0],f=m[1],x=function(){var e=Object(k.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("in post request"),t=JSON.stringify({shelfs:o,workerID:p,employeeID:sessionStorage.getItem("userId")}),D.a.post("".concat(O.API_ROOT,"/api/warehouseManager/assignShelfsToWorker"),t,{headers:{Authorization:"Bearer ".concat(sessionStorage.getItem("token")),"Content-Type":"application/json"}}).then((function(e){"SUCCESS"===e.data.status&&(console.log("assigned successfully!!"),f(null),b(null),l([]))}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){o.length>0&&null===p?r("View Drivers"):0===o.length?r("View Shipments"):null!==p&&o.length>0&&(console.log(j),x())}),[p,o]),"View Drivers"===n?Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(Ua,{setDispatcher:f,Display:"Assign"})}):Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(dr,{setShipments:l,filters:"Assign"})})};var jr=function(){return Object(g.jsx)(v.a,{theme:S,children:Object(g.jsxs)(A.a,{children:[Object(g.jsx)(C.a,{routes:[{name:"To fetch",link:"/toBeStored",activeIndex:0},{name:"To store",link:"/toBePickedUp",activeIndex:1},{name:"Workers",link:"/workers",activeIndex:2},{name:"My Warehouse",link:"/warehouse",activeIndex:3},{name:"Assign Shelves",link:"/assignShelves",activeIndex:4},{name:"Shelves",link:"/shelves",activeIndex:5}]}),Object(g.jsxs)(y.c,{children:[Object(g.jsx)(y.a,{exact:!0,path:"/toBeStored",children:Object(g.jsx)(er,{})}),Object(g.jsx)(y.a,{exact:!0,path:"/toBePickedUp",children:Object(g.jsx)(tr,{})}),Object(g.jsx)(y.a,{exact:!0,path:"/",children:Object(g.jsx)(g.Fragment,{})}),Object(g.jsxs)(y.a,{exact:!0,path:"/workers",children:[" ",Object(g.jsx)(Ua,{Display:"View"})," "]}),Object(g.jsx)(y.a,{exact:!0,path:"/warehouse"}),Object(g.jsx)(y.a,{exact:!0,path:"/shelves",children:Object(g.jsx)(dr,{filters:"Display"})}),Object(g.jsx)(y.a,{exact:!0,path:"/assignShelves",children:Object(g.jsx)(ur,{})})]})]})})},br={position:"absolute",top:"60%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"#ffffff",padding:"40px",zIndex:1e3,width:"37%",height:"65%",borderRadius:"1em",display:"inline-table"},hr={position:"fixed",display:"flex",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, .7)",zIndex:1e3,height:"100%",width:"100%",overflowY:"auto"},mr=Object(m.a)({h5:{color:"white"}});function pr(){var e=Object(a.useState)(!0),t=Object(s.a)(e,2),n=(t[0],t[1],Object(a.useState)({city:{value:"",isValid:!0},floor:{value:"",isValid:!0},lane:{value:"",isValid:!0},section:{value:"",isValid:!0},row:{value:"",isValid:!0},number:{value:"",isValid:!0},width:{value:"",isValid:!0},height:{value:"",isValid:!0}})),r=Object(s.a)(n,2),c=r[0],i=r[1],l=mr(),h=function(){var e=Object(k.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=JSON.stringify({employeeID:sessionStorage.getItem("userId"),city:c.city.value,address:"",shelf:{floors:c.floor.value,lanes:c.lane.value,rows:c.row.value,sections:c.section.value,number:c.number.value,width:c.width.value,height:c.height.value}}),console.log(t),D.a.post("".concat(O.API_ROOT,"/api/warehouseManager/addWarehouse"),t,{headers:{Authorization:"Bearer token","Content-Type":"application/json"}}).then((function(e){console.log(e),"SUCCESS"===e.data.status&&(sessionStorage.clear(),localStorage.clear(),window.location.href="/")})).catch((function(e){Object(pe.a)(!1)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("div",{style:hr}),Object(g.jsx)("div",{style:br,children:Object(g.jsxs)(d.a,{container:!0,spacing:1,style:{minWidth:"35vw",minHeight:"80vh"},direction:"column",children:[Object(g.jsx)(d.a,{container:!0,direction:"row",style:{minHeight:"80vh",minWidth:"35vw"},id:"AdminDetails",children:Object(g.jsxs)(d.a,{container:!0,spacing:3,direction:"column",alignItems:"left",justify:"top",lg:4,xl:3,style:{minHeight:"80vh",minWidth:"40vw"},children:[Object(g.jsx)(d.a,{style:{minHeight:"13vh"},item:!0,id:"AddAdminr",children:Object(g.jsx)(u.a,{color:"secondary",variant:"h3",children:"Please Create your warehouse"})}),Object(g.jsx)(d.a,{item:!0,id:"personalLabel",children:Object(g.jsx)(u.a,{color:"primary",variant:"h5",children:"Warehouse Details:"})}),Object(g.jsx)(d.a,{item:!0,id:"personalDetails",children:Object(g.jsx)(d.a,{direction:"column",spacing:4,children:Object(g.jsx)(d.a,{container:!0,direction:"row",spacing:2,id:"ContactInfo",children:Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(b.a,{required:!0,color:"primary",error:!c.city.isValid,id:"city",label:"City",onChange:function(e){return i((function(t){return/^[a-zA-Z]+$/.test(e.target.value)||0===e.target.value.length?Object(o.a)(Object(o.a)({},t),{},{city:{value:e.target.value,isValid:t.city.isValid}}):Object(o.a)({},t)}))},value:c.city.value})})})})}),Object(g.jsx)(d.a,{item:!0,id:"addressLabel",children:Object(g.jsx)(u.a,{color:"primary",variant:"h5",children:"Shelfs:"})}),Object(g.jsxs)(d.a,{container:!0,direction:"row",spacing:2,id:"address",children:[Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(b.a,{required:!0,color:"primary",error:!c.number.isValid,id:"number",label:"Number",onChange:function(e){return i((function(t){return Number(e.target.value)||0===e.target.value.length||"0"===e.target.value?Object(o.a)(Object(o.a)({},t),{},{number:{value:e.target.value,isValid:t.number.isValid}}):Object(o.a)({},t)}))},value:c.number.value})}),Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(b.a,{required:!0,color:"primary",error:!c.lane.isValid,id:"lane",label:"lane",onChange:function(e){return i((function(t){return Number(e.target.value)||0===e.target.value.length||"0"===e.target.value?Object(o.a)(Object(o.a)({},t),{},{lane:{value:e.target.value,isValid:t.lane.isValid}}):Object(o.a)({},t)}))},value:c.lane.value})}),Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(b.a,{required:!0,color:"primary",error:!c.row.isValid,id:"row",label:"row",onChange:function(e){return i((function(t){return Number(e.target.value)||0===e.target.value.length||"0"===e.target.value?Object(o.a)(Object(o.a)({},t),{},{row:{value:e.target.value,isValid:t.row.isValid}}):Object(o.a)({},t)}))},value:c.row.value})}),Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(b.a,{required:!0,color:"primary",error:!c.floor.isValid,id:"floor",label:"Floor",onChange:function(e){return i((function(t){return Number(e.target.value)||0===e.target.value.length||"0"===e.target.value?Object(o.a)(Object(o.a)({},t),{},{floor:{value:e.target.value,isValid:t.floor.isValid}}):Object(o.a)({},t)}))},value:c.floor.value})}),Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(b.a,{required:!0,color:"primary",error:!c.section.isValid,id:"section",label:"Sections",onChange:function(e){return i((function(t){return Number(e.target.value)||0===e.target.value.length||"0"===e.target.value?Object(o.a)(Object(o.a)({},t),{},{section:{value:e.target.value,isValid:t.section.isValid}}):Object(o.a)({},t)}))},value:c.section.value})}),Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(b.a,{required:!0,color:"primary",error:!c.height.isValid,id:"height",label:"Height",onChange:function(e){return i((function(t){return Number(e.target.value)||0===e.target.value.length||"0"===e.target.value?Object(o.a)(Object(o.a)({},t),{},{height:{value:e.target.value,isValid:t.height.isValid}}):Object(o.a)({},t)}))},value:c.height.value})}),Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(b.a,{required:!0,color:"primary",error:!c.width.isValid,id:"width",label:"Width",onChange:function(e){return i((function(t){return Number(e.target.value)||0===e.target.value.length||"0"===e.target.value?Object(o.a)(Object(o.a)({},t),{},{width:{value:e.target.value,isValid:t.width.isValid}}):Object(o.a)({},t)}))},value:c.width.value})})]})]})}),Object(g.jsxs)(d.a,{container:!0,spacing:2,direction:"row",id:"Buttons",children:[Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(j.a,{variant:"contained",color:"secondary",className:l.spacing,onClick:function(){sessionStorage.clear(),localStorage.clear(),window.location.href="/"},sx:{p:2},children:"Logout"})}),Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(j.a,{variant:"contained",color:"secondary",className:l.spacing,onClick:h,children:"Add warehouse"})})]})]})})]})}var Dr=function(){var e=Object(a.useState)(!1),t=Object(s.a)(e,2),n=t[0],r=t[1],c=function(){var e=Object(k.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=oe.a.stringify({employeeID:sessionStorage.getItem("userId")},{skipEmptyString:!0,skipNull:!0}),D.a.get("".concat(O.API_ROOT,"/api/warehouseManager/checkWarehouse").concat(t?"?".concat(t):"")).then((function(e){console.log(e.data),"NOWAREHOUSE"===e.data.status?r(!1):r(!0)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){}),[n]),c(),console.log("valid ".concat(n)),n?Object(g.jsx)(jr,{}):Object(g.jsx)(pr,{})};function Or(e,t,n){return t[n]<e[n]?-1:t[n]>e[n]?1:0}function gr(e,t){return"desc"===e?function(e,n){return Or(e,n,t)}:function(e,n){return-Or(e,n,t)}}function fr(e,t){var n=e.map((function(e,t){return[e,t]}));return n.sort((function(e,n){var a=t(e[0],n[0]);return 0!==a?a:e[1]-n[1]})),n.map((function(e){return e[0]}))}var xr=[{id:"deliver",numeric:!0,disablePadding:!1,label:"deliver"},{id:"shipmentID",numeric:!1,disablePadding:!1,label:"ID"},{id:"currentCity",numeric:!1,disablePadding:!1,label:"Current City"},{id:"location",numeric:!0,disablePadding:!1,label:"Deliver To"},{id:"status",numeric:!0,disablePadding:!1,label:"Status"},{id:"assignedEmployee",numeric:!0,disablePadding:!1,label:"assigned Emp"}];function vr(e){var t=e.classes,n=(e.onSelectAllClick,e.order),a=e.orderBy,r=(e.numSelected,e.rowCount,e.onRequestSort);return Object(g.jsx)(H.a,{children:Object(g.jsxs)(V.a,{children:[Object(g.jsx)(F.a,{align:"center",className:t.tableCell,children:"Details"},"view"),xr.map((function(e){return Object(g.jsx)(F.a,{align:"center",padding:e.disablePadding?"none":"default",sortDirection:a===e.id&&n,children:Object(g.jsxs)(q.a,{active:a===e.id,direction:a===e.id?n:"asc",onClick:(c=e.id,function(e){r(e,c)}),children:[e.label,a===e.id?Object(g.jsx)("span",{className:t.visuallyHidden,children:"desc"===n?"sorted descending":"sorted ascending"}):null]})},e.id);var c}))]})})}var Ar=Object(m.a)((function(e){return{root:{paddingLeft:e.spacing(2),paddingRight:e.spacing(1)},highlight:"light"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(_.f)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},marginL1:{marginLeft:"1rem"},title:{flex:"1 1 100%"}}})),yr=function(e){var t=Ar(),n=e.numSelected,r=e.selectedRows,c=(e.data,e.fetchData,Object(a.useState)(!1)),i=Object(s.a)(c,2);i[0],i[1];var o=function(){var e=Object(k.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("selected rows: ".concat(r)),t=JSON.stringify({shipmentID:r,employeeID:sessionStorage.getItem("userId")}),D.a.post("".concat(O.API_ROOT,"/api/driver/deliverShipments"),t,{headers:{Authorization:"Bearer ".concat(sessionStorage.getItem("token")),"Content-Type":"application/json"}}).then((function(e){"SUCCESS"===e.data.status&&console.log("assigned successfully!!")}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(g.jsxs)(M.a,{className:Object(P.a)(t.root,Object(l.a)({},t.highlight,n>0)),children:[n>0?Object(g.jsxs)(u.a,{className:t.title,color:"inherit",variant:"subtitle1",component:"div",children:[n," selected"]}):Object(g.jsx)(u.a,{className:t.title,variant:"h6",id:"tableTitle",component:"div",children:"Shipments"}),n>0?Object(g.jsx)(Y.a,{title:"",children:Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(d.a,{container:!0,direction:"row",spacing:2,children:Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(j.a,{color:"secondary",onClick:o,className:t.marginL1,variant:"contained",children:"Deliver"})})})})}):Object(g.jsx)(Y.a,{title:"Filter list",children:Object(g.jsx)(z.a,{"aria-label":"filter list",children:Object(g.jsx)(Q.a,{})})})," "]})},wr=Object(m.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:750},ml1:{marginLeft:"1rem"},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}}));function Sr(e){var t=Object(a.useState)([]),n=Object(s.a)(t,2),c=n[0],i=n[1],l=wr(),d=r.a.useState("asc"),u=Object(s.a)(d,2),b=u[0],h=u[1],m=r.a.useState("shipmentID"),p=Object(s.a)(m,2),f=p[0],x=p[1],v=r.a.useState([]),A=Object(s.a)(v,2),y=A[0],w=A[1],S=r.a.useState(0),C=Object(s.a)(S,2),I=C[0],P=C[1],_=r.a.useState(!1),H=Object(s.a)(_,2),q=H[0],M=H[1],z=r.a.useState(200),Y=Object(s.a)(z,2),Z=Y[0],Q=Y[1],J=Object(a.useState)(!1),G=Object(s.a)(J,2),$=(G[0],G[1],Object(a.useState)("NEW")),ee=Object(s.a)($,2),ne=(ee[0],ee[1],e.shipments,e.setShipments),ae=Z-Math.min(Z,c.length-I*Z),re=function(){var e=Object(k.a)(B.a.mark((function e(t,n){var a,r,c;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=sessionStorage.getItem("token"),r=oe.a.stringify({employeeID:sessionStorage.getItem("userId")},{skipEmptyString:!0,skipNull:!0}),c=[],D.a.get("".concat(O.API_ROOT,"/api/driver/viewShipments").concat(r?"?".concat(r):""),{headers:{Authorization:"Bearer ".concat(a)}}).then((function(e){console.log(e.data),c=e.data;var t=[];console.log("is Array"),Array.isArray(c)&&(t=c.map((function(e,t){return Object(o.a)(Object(o.a)({},e),{},{isEditMode:!1})}))),console.log(t),i(Object(N.a)(t))})),console.log(c);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){re()}),[]);var ie=r.a.useState({open:!1,message:""}),se=Object(s.a)(ie,2),le=se[0],de=se[1],ue=function(e,t){"clickaway"!==t&&de({open:!1,message:""})},je=r.a.useState({}),be=Object(s.a)(je,2);be[0],be[1];return Object(a.useEffect)((function(){}),[]),Object(g.jsxs)("div",{className:l.root,children:[Object(g.jsxs)(W.a,{className:l.paper,children:[Object(g.jsx)(yr,{numSelected:y.length,data:c,selectedRows:Object(N.a)(y),setShipments:ne,fetchData:re}),Object(g.jsx)(R.a,{children:Object(g.jsxs)(E.a,{className:l.table,"aria-labelledby":"tableTitle",size:q?"small":"medium","aria-label":"enhanced table",children:[Object(g.jsx)(vr,{classes:l,numSelected:y.length,order:b,orderBy:f,onSelectAllClick:function(e){if(e.target.checked){var t=c.map((function(e){return e.shipmentID}));w(t)}else w([])},onRequestSort:function(e,t){h(f===t&&"asc"===b?"desc":"asc"),x(t)},rowCount:c.length}),Object(g.jsxs)(T.a,{children:[fr(c,gr(b,f)).slice(I*Z,I*Z+Z).map((function(e,t){var n,a=(n=e.shipmentID,-1!==y.indexOf(n)),r="enhanced-table-checkbox-".concat(t);return Object(g.jsxs)(V.a,{hover:!0,role:"checkbox","aria-checked":a,tabIndex:-1,selected:a,children:[Object(g.jsx)(F.a,{align:"center",children:Object(g.jsx)(j.a,{variant:"contained",color:"secondary",className:l.spacing,onClick:function(){},children:"View"})},"view"),Object(g.jsx)(F.a,{padding:"checkbox",children:Object(g.jsx)(U.a,{onChange:function(t){return function(e,t){var n=y.indexOf(t),a=[];-1===n?a=a.concat(y,t):0===n?a=a.concat(y.slice(1)):n===y.length-1?a=a.concat(y.slice(0,-1)):n>0&&(a=a.concat(y.slice(0,n),y.slice(n+1))),w(a)}(0,e.shipmentID)},checked:a,inputProps:{"aria-labelledby":r}})}),Object(g.jsx)(F.a,{component:"th",id:r,scope:"row",padding:"none",align:"center",children:e.shipmentID||"-"}),Object(g.jsx)(F.a,{align:"center",children:e.shipmentName||"-"})," ",Object(g.jsx)(F.a,{align:"center",children:e.shipmentLocation||"-"})," ",Object(g.jsx)(F.a,{align:"center",children:e.deliveryStatus||"-"})," ",Object(g.jsx)(F.a,{align:"center",children:e.assignedEmployee||"-"})," "]},e.shipmentID)})),ae>0&&Object(g.jsx)(V.a,{style:{height:(q?33:53)*ae},children:Object(g.jsx)(F.a,{colSpan:6})})]})]})}),Object(g.jsx)(L.a,{rowsPerPageOptions:[100,200,300],component:"div",count:c.length,rowsPerPage:Z,page:I,onChangePage:function(e,t){P(t)},onChangeRowsPerPage:function(e){Q(parseInt(e.target.value,10)),P(0)}})]}),Object(g.jsx)(te.a,{open:le.open,autoHideDuration:3e3,onClose:ue,children:Object(g.jsx)(ce,{onClose:ue,severity:"error",children:le.message})}),Object(g.jsx)(K.a,{control:Object(g.jsx)(X.a,{checked:q,onChange:function(e){M(e.target.checked)}}),label:"Dense padding"})]})}var Cr=n(180),Nr=n.n(Cr);var kr=function(){return Object(g.jsx)(v.a,{theme:S,children:Object(g.jsxs)(A.a,{children:[Object(g.jsx)(C.a,{routes:[{name:"Shipments",link:"/",activeIndex:0},{name:"my Vehicle",link:"/myVehicle",activeIndex:1}]}),Object(g.jsxs)(y.c,{children:[Object(g.jsx)(y.a,{exact:!0,path:"/",children:Object(g.jsx)(Sr,{})}),Object(g.jsx)(y.a,{exact:!0,path:"/vehicle",children:Object(g.jsx)(Nr.a,{})})]})]})})},Ir={position:"absolute",top:"60%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"#ffffff",padding:"40px",zIndex:1e3,width:"37%",height:"65%",borderRadius:"1em",display:"inline-table"},Br={position:"fixed",display:"flex",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, .7)",zIndex:1e3,height:"100%",width:"100%",overflowY:"auto"},Pr=Object(m.a)({h5:{color:"white"}});function _r(e){var t=e.open,n=e.children,r=e.onClose,c=Object(a.useState)(!0),l=Object(s.a)(c,2),h=(l[0],l[1],Object(a.useState)({firstName:{value:"",isValid:!0},lastName:{value:"",isValid:!0},email:{value:"",isValid:!0},phoneNumber:{value:"",isValid:!0},password:{value:"",isValid:!0},telephone:{value:"",isValid:!0},roomNumber:{value:"",isValid:!0},location:{value:"",isValid:!0}})),m=Object(s.a)(h,2),p=m[0],f=m[1],x=Pr(),v=function(){var e=Object(k.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=JSON.stringify({employeeID:sessionStorage.getItem("userId"),firstName:p.firstName.value,lastName:p.lastName.value,email:p.email.value,password:p.password.value,phoneNumber:p.phoneNumber.value,office:{telephone:p.telephone.value,roomNumber:p.roomNumber.value,location:p.location.value}}),console.log(t),D.a.post("".concat(O.API_ROOT,"/api/dispatcher/addDriver"),t,{headers:{Authorization:"Bearer token","Content-Type":"application/json"}}).then((function(e){console.log(e),"SUCCESS"===e.data.status&&r()})).catch((function(e){Object(pe.a)(!1)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return t?i.a.createPortal(Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("div",{style:Br}),Object(g.jsxs)("div",{style:Ir,children:[Object(g.jsxs)(d.a,{container:!0,spacing:1,style:{minWidth:"35vw",minHeight:"80vh"},direction:"column",children:[Object(g.jsx)(d.a,{container:!0,direction:"row",style:{minHeight:"80vh",minWidth:"35vw"},id:"AdminDetails",children:Object(g.jsxs)(d.a,{container:!0,spacing:3,direction:"column",alignItems:"left",justify:"top",lg:4,xl:3,style:{minHeight:"80vh",minWidth:"40vw"},children:[Object(g.jsx)(d.a,{style:{minHeight:"13vh"},item:!0,id:"AddAdminr",children:Object(g.jsx)(u.a,{color:"secondary",variant:"h3",children:"Add Driver"})}),Object(g.jsx)(d.a,{item:!0,id:"personalLabel",children:Object(g.jsx)(u.a,{color:"primary",variant:"h5",children:"Personal Details:"})}),Object(g.jsx)(d.a,{item:!0,id:"personalDetails",children:Object(g.jsxs)(d.a,{direction:"column",spacing:4,children:[Object(g.jsxs)(d.a,{container:!0,direction:"row",spacing:2,id:"ContactInfo",children:[Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(b.a,{required:!0,color:"primary",error:!p.firstName.isValid,id:"firstName",label:"First Name",onChange:function(e){return f((function(t){return/^[a-zA-Z]+$/.test(e.target.value)||0===e.target.value.length?Object(o.a)(Object(o.a)({},t),{},{firstName:{value:e.target.value,isValid:t.firstName.isValid}}):Object(o.a)({},t)}))},value:p.firstName.value})}),Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(b.a,{required:!0,color:"primary",error:!p.lastName.isValid,id:"lastName",label:"Last Name",onChange:function(e){return f((function(t){return/^[a-zA-Z]+$/.test(e.target.value)||0===e.target.value.length?Object(o.a)(Object(o.a)({},t),{},{lastName:{value:e.target.value,isValid:t.firstName.isValid}}):Object(o.a)({},t)}))},value:p.lastName.value})}),Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(b.a,{required:!0,color:"primary",error:!p.phoneNumber.isValid,id:"phoneNumber",label:"Phone Number",onChange:function(e){return f((function(t){return Number(e.target.value)||0===e.target.value.length||"0"===e.target.value?Object(o.a)(Object(o.a)({},t),{},{phoneNumber:{value:e.target.value,isValid:t.firstName.isValid}}):Object(o.a)({},t)}))},value:p.phoneNumber.value})})]}),Object(g.jsxs)(d.a,{container:!0,direction:"row",spacing:2,id:"credentials",children:[Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(b.a,{required:!0,color:"primary",error:!p.email.isValid,id:"email",label:"Email",onChange:function(e){return f((function(t){return Object(o.a)(Object(o.a)({},t),{},{email:{value:e.target.value,isValid:t.firstName.isValid}})}))},value:p.email.value})}),Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(b.a,{required:!0,color:"primary",error:!p.password.isValid,id:"password",label:"Password",onChange:function(e){return f((function(t){return e.target.value.length>8?Object(o.a)({},t):Object(o.a)(Object(o.a)({},t),{},{password:{value:e.target.value,isValid:t.firstName.isValid}})}))},value:p.password.value})})]})]})}),Object(g.jsx)(d.a,{item:!0,id:"addressLabel",children:Object(g.jsx)(u.a,{color:"primary",variant:"h5",children:"Address:"})}),Object(g.jsxs)(d.a,{container:!0,direction:"row",spacing:2,id:"address",children:[Object(g.jsx)(d.a,{item:!0,id:"",children:Object(g.jsx)(b.a,{required:!0,color:"primary",error:!p.telephone.isValid,id:"firstName",label:"landline",onChange:function(e){return f((function(t){return Number(e.target.value)||0===e.target.value.length||"0"===e.target.value?Object(o.a)(Object(o.a)({},t),{},{telephone:{value:e.target.value,isValid:t.firstName.isValid}}):Object(o.a)({},t)}))},value:p.telephone.value})}),Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(b.a,{required:!0,color:"primary",error:!p.roomNumber.isValid,id:"roomNumber",label:"Room Number",onChange:function(e){return f((function(t){return Number(e.target.value)||0===e.target.value.length||"0"===e.target.value?Object(o.a)(Object(o.a)({},t),{},{roomNumber:{value:e.target.value,isValid:t.firstName.isValid}}):Object(o.a)({},t)}))},value:p.roomNumber.value})})]})]})}),Object(g.jsxs)(d.a,{container:!0,spacing:2,direction:"row",id:"Buttons",children:[Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(j.a,{variant:"contained",color:"secondary",className:x.spacing,onClick:r,sx:{p:2},children:"Cancel"})}),Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(j.a,{variant:"contained",color:"secondary",className:x.spacing,onClick:v,children:"add Driver"})})]})]}),n]})]}),document.getElementById("portal")):null}function Er(e,t,n){return t[n]<e[n]?-1:t[n]>e[n]?1:0}function Tr(e,t){return"desc"===e?function(e,n){return Er(e,n,t)}:function(e,n){return-Er(e,n,t)}}function Fr(e,t){var n=e.map((function(e,t){return[e,t]}));return n.sort((function(e,n){var a=t(e[0],n[0]);return 0!==a?a:e[1]-n[1]})),n.map((function(e){return e[0]}))}function Rr(e,t){var n=".".concat(e),a=new Date,r="routifics_".concat(a.getDate()).concat(a.getMonth()).concat(a.getFullYear(),"_").concat(a.getTime()),c={Sheets:{data:G.a.utils.json_to_sheet(t)},SheetNames:["data"]},i=G.a.write(c,{bookType:"".concat(e),type:"array"}),o=new Blob([i],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});ee.a.saveAs(o,r+n)}var Hr=[{id:"employeeID",numeric:!0,disablePadding:!1,label:"ID"},{id:"firstName",numeric:!1,disablePadding:!1,label:"First Name"},{id:"lastName",numeric:!1,disablePadding:!1,label:"Last Name"},{id:"phoneNumber",numeric:!0,disablePadding:!1,label:"phone Number"},{id:"telephone",numeric:!0,disablePadding:!1,label:"telephone"},{id:"shipmentID",numeric:!0,disablePadding:!1,label:"vehicleID"}];function Lr(e){var t=e.classes,n=(e.onSelectAllClick,e.order),a=e.orderBy,r=(e.numSelected,e.rowCount,e.onRequestSort),c=e.Display;return Object(g.jsx)(H.a,{children:Object(g.jsxs)(V.a,{children:["View"===c?Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(F.a,{align:"center",className:t.tableCell,children:"Details"},"view"),Object(g.jsx)(F.a,{align:"center",className:t.tableCell,children:"Delete"},"action")]}):Object(g.jsxs)(F.a,{align:"center",className:t.tableCell,children:["Action"," "]},"action"),Hr.map((function(e){return Object(g.jsx)(F.a,{align:"center",padding:e.disablePadding?"none":"default",sortDirection:a===e.id&&n,children:Object(g.jsxs)(q.a,{active:a===e.id,direction:a===e.id?n:"asc",onClick:(c=e.id,function(e){r(e,c)}),children:[e.label,a===e.id?Object(g.jsx)("span",{className:t.visuallyHidden,children:"desc"===n?"sorted descending":"sorted ascending"}):null]})},e.id);var c}))]})})}var Vr=Object(m.a)((function(e){return{root:{paddingLeft:e.spacing(2),paddingRight:e.spacing(1)},highlight:"light"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(_.f)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},marginL1:{marginLeft:"1rem"},title:{flex:"1 1 100%"}}})),qr=function(e){var t=[];return Array.isArray(e)&&(t=e.map((function(e){return{reference_number:e.reference_number,coord:e.locations&&e.locations.length>0?e.locations[0].coord:null,from:e.routifics&&e.routifics.length>0?e.routifics[0].from:null,to:e.routifics&&e.routifics.length>0?e.routifics[0].to:null,aging:"7",load:null,destination_phone:e.destination_phone,email:null,service_type:e.service_type,priority:"yes",destination_name:e.destination_name,cod_amount:e.cod_amount,customer_reference_number:e.customer_reference_number,whatsapp_link:"http://wa.me/"+e.destination_phone,whatsapp_location:"http://wa.me/"+e.destination_phone+"?text=%D9%85%D8%B1%D8%AD%D8%A8%D8%A7%20"+e.destination_name.split(" ").slice(0,2).join("%20")+"%20%D9%85%D8%B9%D8%A7%D9%83%20%D9%85%D9%86%D8%AF%D9%88%D8%A8%20%D8%B4%D8%B1%D9%83%D8%A9%20%D9%85%D8%AD%D9%85%D9%88%D9%84%D8%8C%20%D8%A7%D8%B1%D8%AC%D9%88%20%D8%A5%D8%B1%D8%B3%D8%A7%D9%84%20%D8%A7%D9%84%D9%84%D9%88%D9%83%D9%8A%D8%B4%D9%86%20%D9%84%D9%8A%D8%AA%D9%85%20%D8%AA%D9%88%D8%B5%D9%8A%D9%84%20%D8%B4%D8%AD%D9%86%D8%AA%D9%83%20%D8%A8%D8%B1%D9%82%D9%85%20"+e.reference_number,whatsapp_no_answer:"http://wa.me/"+e.destination_phone+"?text=%D9%85%D8%B1%D8%AD%D8%A8%D8%A7%20"+e.destination_name.split(" ").slice(0,2).join("%20")+"%20%D9%85%D8%B9%D8%A7%D9%83%20%D9%85%D9%86%D8%AF%D9%88%D8%A8%20%D8%B4%D8%B1%D9%83%D8%A9%20%D9%85%D8%AD%D9%85%D9%88%D9%84%D8%8C%20%D8%A7%D9%86%D8%A7%20%D9%82%D8%B1%D9%8A%D8%A8%20%D9%85%D9%86%20%D8%A7%D9%84%D9%85%D9%88%D9%82%D8%B9%20%D9%88%D8%AA%D9%85%D8%AA%20%D9%85%D8%AD%D8%A7%D9%88%D9%84%D8%A9%20%D8%A7%D9%84%D8%A7%D8%AA%D8%B5%D8%A7%D9%84%D8%8C%20%D9%86%D8%B1%D8%AC%D9%88%20%D8%A7%D9%84%D8%B1%D8%AF%20%D8%B3%D8%B1%D9%8A%D8%B9%D8%A7%20%D9%84%D9%8A%D8%AA%D9%85%20%D8%AA%D9%88%D8%B5%D9%8A%D9%84%20%D8%B4%D8%AD%D9%86%D8%AA%D9%83%20"+e.reference_number+"%20%D9%81%D9%8A%20%D8%AD%D8%A7%D9%84%20%D9%84%D9%85%20%D9%8A%D8%AA%D9%85%20%D8%A7%D9%84%D8%B1%D8%AF%20%D8%B3%D8%B1%D9%8A%D8%B9%D8%A7%D8%8C%20%D8%B3%D8%AA%D8%AA%D9%85%20%D8%A5%D8%B9%D8%A7%D8%AF%D8%A9%20%D8%A7%D9%84%D8%AC%D8%AF%D9%88%D9%84%D8%A9%20%D9%84%D9%8A%D9%88%D9%85%20%D8%A7%D9%84%D8%B9%D9%85%D9%84%20%D8%A7%D9%84%D9%82%D8%A7%D8%AF%D9%85%D8%8C%20%D9%88%D8%B4%D9%83%D8%B1%D8%A7%D8%8C%0A"}}))),t},Mr=function(e){var t=Vr(),n=e.numSelected,r=e.selectedRows,c=(e.data,Object(a.useState)(!1)),i=Object(s.a)(c,2);i[0],i[1];function o(e){return b.apply(this,arguments)}function b(){return b=Object(k.a)(B.a.mark((function e(t){var n,a,c;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.a.post("".concat(O.API_ROOT,"/rfdexport"),{reference_number:Object(N.a)(r)});case 2:n=e.sent,a=n.data,c=qr(a),Rr(t,c);case 6:case"end":return e.stop()}}),e)}))),b.apply(this,arguments)}return Object(g.jsxs)(M.a,{className:Object(P.a)(t.root,Object(l.a)({},t.highlight,n>0)),children:[n>0?Object(g.jsxs)(u.a,{className:t.title,color:"inherit",variant:"subtitle1",component:"div",children:[n," selected"]}):Object(g.jsx)(u.a,{className:t.title,variant:"h6",id:"tableTitle",component:"div",children:"Drivers"}),n>0?Object(g.jsx)(Y.a,{title:"",children:Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(d.a,{container:!0,children:Object(g.jsx)(j.a,{onClick:Object(k.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o("csv");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),className:t.marginL1,variant:"contained",children:"Export CSV"})})})}):Object(g.jsx)(Y.a,{title:"Filter list",children:Object(g.jsx)(z.a,{"aria-label":"filter list",children:Object(g.jsx)(Q.a,{})})})]})},Wr=Object(m.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:750},ml1:{marginLeft:"1rem"},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}}));function Ur(e){var t=e.Display,n=e.setDispatcher,c=Object(a.useState)([]),i=Object(s.a)(c,2),l=i[0],d=i[1],u=Wr(),b=r.a.useState("asc"),h=Object(s.a)(b,2),m=h[0],p=h[1],f=r.a.useState("employeeID"),x=Object(s.a)(f,2),v=x[0],A=x[1],y=r.a.useState([]),w=Object(s.a)(y,2),S=w[0],C=w[1],I=r.a.useState(0),P=Object(s.a)(I,2),_=P[0],H=P[1],q=r.a.useState(!1),M=Object(s.a)(q,2),U=M[0],Y=M[1],Z=r.a.useState(200),Q=Object(s.a)(Z,2),J=Q[0],G=Q[1],$=Object(a.useState)(!1),ee=Object(s.a)($,2),ne=ee[0],re=ee[1],ie=J-Math.min(J,l.length-_*J),se=function(){var e=Object(k.a)(B.a.mark((function e(n,a){var r,c,i;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=sessionStorage.getItem("token"),c=oe.a.stringify({employeeID:sessionStorage.getItem("userId")},{skipEmptyString:!0,skipNull:!0}),i=[],D.a.get("".concat(O.API_ROOT,"/api/dispatcher/viewDrivers").concat(c?"?".concat(c):""),{headers:{Authorization:"Bearer ".concat(r)}}).then((function(e){console.log(e.data),i=e.data;var n=[];console.log("is Array"),Array.isArray(i)&&(n=i.map((function(e,t){return Object(o.a)(Object(o.a)({},e),{},{isEditMode:!1})}))),console.log(n),"Assign"===t&&(n=n.filter((function(e){return null!==e.vehicleID}))),d(Object(N.a)(n))})),console.log(i);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){se(),console.log(l)}),[]);le=l[0];var le,de,ue,je,be,he,me,pe,De,Oe=r.a.useState({open:!1,message:""}),ge=Object(s.a)(Oe,2),fe=ge[0],xe=ge[1],ve=function(e,t){"clickaway"!==t&&xe({open:!1,message:""})},Ae=r.a.useState({}),ye=Object(s.a)(Ae,2),we=(ye[0],ye[1]),Se=function(){var e=Object(k.a)(B.a.mark((function e(t){var n,a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.a.post("".concat(O.API_ROOT,"/newlocation"),{reference_number:t.reference_number,coord:t.coord});case 2:n=e.sent,200!==(a=n.data).statusCode&&xe({open:!0,message:a.message});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(g.jsxs)("div",{className:u.root,children:["Assign"!==t?Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(j.a,{variant:"contained",color:"secondary",className:u.spacing,onClick:function(){return re(!0)},children:"Add Driver"})}):Object(g.jsx)(g.Fragment,{}),Object(g.jsx)(_r,{open:ne,onClose:function(){return re(!1)}}),Object(g.jsxs)(W.a,{className:u.paper,children:[Object(g.jsx)(Mr,{numSelected:S.length,data:l,selectedRows:Object(N.a)(S)}),Object(g.jsx)(R.a,{children:Object(g.jsxs)(E.a,{className:u.table,"aria-labelledby":"tableTitle",size:U?"small":"medium","aria-label":"enhanced table",children:[Object(g.jsx)(Lr,{classes:u,numSelected:S.length,order:m,orderBy:v,onSelectAllClick:function(e){if(e.target.checked){var t=l.map((function(e){return e.ID}));C(t)}else C([])},onRequestSort:function(e,t){p(v===t&&"asc"===m?"desc":"asc"),A(t)},rowCount:l.length,Display:t}),Object(g.jsxs)(T.a,{children:[Fr(l,Tr(m,v)).slice(_*J,_*J+J).map((function(e,a){var r=function(e){return-1!==S.indexOf(e)}(e.employeeID),c="enhanced-table-checkbox-".concat(a);return Object(g.jsxs)(V.a,{hover:!0,role:"checkbox","aria-checked":r,tabIndex:-1,selected:r,children:["View"===t?Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(F.a,{align:"center",children:Object(g.jsx)(j.a,{variant:"contained",color:"secondary",className:u.spacing,onClick:function(){},children:"View"})},"action"),Object(g.jsx)(F.a,{align:"center",children:Object(g.jsx)(z.a,{"aria-label":"delete",onClick:function(){return function(e,t){var n=l.filter((function(t){return t.id==e}))[0];"Save"!=t||n.coord?(d((function(t){return l.map((function(t){return t.id===e?Object(o.a)(Object(o.a)({},t),{},{isEditMode:!t.isEditMode}):t}))})),"Save"==t&&(Se(Object(o.a)({},n)),we([]))):xe({open:!0,message:"Coord is not allowed to be empty"})}(e.employeeID,"Edit")},children:Object(g.jsx)(ae.a,{})})},"action")]}):Object(g.jsx)(F.a,{align:"center",children:Object(g.jsx)(j.a,{variant:"contained",color:"secondary",className:u.spacing,onClick:function(){console.log("empID: ".concat(e.employeeID)),n(e.employeeID)},children:"Assign"})},"action"),Object(g.jsx)(F.a,{component:"th",id:c,scope:"row",padding:"none",align:"center",children:e.employeeID||"-"}),Object(g.jsx)(F.a,{align:"center",children:e.firstName||"-"})," ",Object(g.jsx)(F.a,{align:"center",children:e.lastName||"-"})," ",Object(g.jsx)(F.a,{align:"center",children:e.phoneNumber||"-"})," ",Object(g.jsx)(F.a,{align:"center",children:e.telephone||"-"})," ",Object(g.jsx)(F.a,{align:"center",children:e.vehicleID||"-"})," "]},e.employeeID)})),ie>0&&Object(g.jsx)(V.a,{style:{height:(U?33:53)*ie},children:Object(g.jsx)(F.a,{colSpan:6})})]})]})}),Object(g.jsx)(L.a,{rowsPerPageOptions:[100,200,300],component:"div",count:l.length,rowsPerPage:J,page:_,onChangePage:function(e,t){H(t)},onChangeRowsPerPage:function(e){G(parseInt(e.target.value,10)),H(0)}})]}),Object(g.jsx)(te.a,{open:fe.open,autoHideDuration:3e3,onClose:ve,children:Object(g.jsx)(ce,{onClose:ve,severity:"error",children:fe.message})}),Object(g.jsx)(K.a,{control:Object(g.jsx)(X.a,{checked:U,onChange:function(e){Y(e.target.checked)}}),label:"Dense padding"})]})}var zr={position:"absolute",top:"60%",left:"50%",alignItems:"center",transform:"translate(-50%, -50%)",backgroundColor:"#ffffff",padding:"40px",zIndex:1e3,width:"37%",height:"65%",borderRadius:"1em",display:"inline-table"},Yr={position:"fixed",display:"flex",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, .7)",zIndex:1e3,height:"100%",width:"100%",overflowY:"auto"},Kr=Object(m.a)({h5:{color:"white"}});function Xr(e){var t=e.open,n=e.children,r=e.onClose,c=Object(a.useState)(!0),l=Object(s.a)(c,2),h=l[0],m=(l[1],Object(a.useState)({model:"",yearOfManufactoring:"",manufacturerCompany:"",color:"",plateNumber:"",weightInTons:"",capacity:""})),p=Object(s.a)(m,2),O=p[0],f=p[1],x=Kr(),v=function(){var e=Object(k.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=JSON.stringify({employeeID:sessionStorage.getItem("userId"),capacity:O.capacity,registration:{plateNumber:O.plateNumber,yearOfManufactoring:O.yearOfManufactoring,model:O.model,color:O.color,manufacturerCompany:O.manufacturerCompany,weightInTons:O.weightInTons}}),console.log(t),D.a.post("http://localhost:5001/api/dispatcher/addVehicle",t,{headers:{Authorization:"Bearer token","Content-Type":"application/json"}}).then((function(e){console.log(e),"SUCCESS"===e.data.status&&r()})).catch((function(e){Object(pe.a)(!1)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return t?i.a.createPortal(Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("div",{style:Yr}),Object(g.jsxs)("div",{style:zr,children:[Object(g.jsxs)(d.a,{container:!0,spacing:1,style:{minWidth:"30vw",minHeight:"60vh"},direction:"column",children:[Object(g.jsx)(d.a,{container:!0,direction:"row",style:{minHeight:"60vh",minWidth:"35vw"},id:"DispatcherDetails",children:Object(g.jsxs)(d.a,{container:!0,spacing:3,direction:"column",alignItems:"left",justify:"top",lg:4,xl:3,style:{minHeight:"20vh",minWidth:"40vw"},children:[Object(g.jsx)(d.a,{style:{minHeight:"13vh"},item:!0,id:"AddDispatcher",children:Object(g.jsx)(u.a,{color:"secondary",variant:"h3",children:"Add Vehicle"})}),Object(g.jsx)(d.a,{item:!0,id:"personalLabel",children:Object(g.jsx)(u.a,{color:"primary",variant:"h5",children:"Vehicle Details:"})}),Object(g.jsx)(d.a,{item:!0,id:"personalDetails",children:Object(g.jsxs)(d.a,{direction:"column",spacing:4,children:[Object(g.jsxs)(d.a,{container:!0,direction:"row",spacing:2,id:"ContactInfo",children:[Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(b.a,{required:!0,color:"primary",error:!h,id:"model",label:"model",onChange:function(e){return f((function(t){return Object(o.a)(Object(o.a)({},t),{},{model:e.target.value})}))},value:O.model})}),Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(b.a,{required:!0,color:"primary",error:!h,id:"yearOfManufactoring",label:"Year",onChange:function(e){return f((function(t){return Object(o.a)(Object(o.a)({},t),{},{yearOfManufactoring:e.target.value})}))},value:O.yearOfManufactoring})}),Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(b.a,{required:!0,color:"primary",error:!h,id:"color",label:"Color",onChange:function(e){f((function(t){return Object(o.a)(Object(o.a)({},t),{},{color:e.target.value})}))},value:O.color})})]}),Object(g.jsxs)(d.a,{container:!0,direction:"row",spacing:2,id:"credentials",children:[Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(b.a,{required:!0,color:"primary",error:!h,id:"manufacturerCompany",label:"man. Company",onChange:function(e){return f((function(t){return Object(o.a)(Object(o.a)({},t),{},{manufacturerCompany:e.target.value})}))},value:O.manufacturerCompany})}),Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(b.a,{required:!0,color:"primary",error:!h,id:"plateNumber",label:"Plate Number",onChange:function(e){return f((function(t){return Object(o.a)(Object(o.a)({},t),{},{plateNumber:e.target.value})}))},value:O.plateNumber})})]})]})}),Object(g.jsx)(d.a,{item:!0,id:"addressLabel",children:Object(g.jsx)(u.a,{color:"primary",variant:"h5",children:"Vehicle Specifications:"})}),Object(g.jsxs)(d.a,{item:!0,container:!0,direction:"row",id:"",spacing:3,style:{minWidth:"35vw"},children:[Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(b.a,{required:!0,color:"primary",error:!h,id:"Weight",label:"Weight",onChange:function(e){return f((function(t){return Object(o.a)(Object(o.a)({},t),{},{weightInTons:e.target.value})}))},value:O.weightInTons})}),Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(b.a,{required:!0,color:"primary",error:!h,id:"capacity",label:"Capacity",onChange:function(e){return f((function(t){return Object(o.a)(Object(o.a)({},t),{},{capacity:e.target.value})}))},value:O.capacity})})]}),Object(g.jsx)(d.a,{item:!0})]})}),Object(g.jsxs)(d.a,{container:!0,spacing:2,direction:"row",id:"Buttons",children:[Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(j.a,{variant:"contained",color:"secondary",className:x.spacing,onClick:r,sx:{p:2},children:"Cancel"})}),Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(j.a,{variant:"contained",color:"secondary",className:x.spacing,onClick:v,children:"add Vehicle"})})]})]}),n]})]}),document.getElementById("portal")):null}function Zr(e,t,n){return t[n]<e[n]?-1:t[n]>e[n]?1:0}function Qr(e,t){return"desc"===e?function(e,n){return Zr(e,n,t)}:function(e,n){return-Zr(e,n,t)}}function Jr(e,t){var n=e.map((function(e,t){return[e,t]}));return n.sort((function(e,n){var a=t(e[0],n[0]);return 0!==a?a:e[1]-n[1]})),n.map((function(e){return e[0]}))}function Gr(e,t){var n=".".concat(e),a=new Date,r="routifics_".concat(a.getDate()).concat(a.getMonth()).concat(a.getFullYear(),"_").concat(a.getTime()),c={Sheets:{data:G.a.utils.json_to_sheet(t)},SheetNames:["data"]},i=G.a.write(c,{bookType:"".concat(e),type:"array"}),o=new Blob([i],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});ee.a.saveAs(o,r+n)}var $r=[{id:"vehicleID",numeric:!0,disablePadding:!1,label:"vehicle ID"},{id:"driverID",numeric:!1,disablePadding:!1,label:"Driver ID"},{id:"model",numeric:!1,disablePadding:!1,label:"Model"},{id:"currentLocation",numeric:!0,disablePadding:!1,label:"Current Location"},{id:"capacity",numeric:!0,disablePadding:!1,label:"Capacity"},{id:"shipmentID",numeric:!0,disablePadding:!1,label:"vehicleID"}];function ec(e){var t=e.classes,n=(e.onSelectAllClick,e.order),a=e.orderBy,r=(e.numSelected,e.rowCount,e.onRequestSort),c=e.Display;return Object(g.jsx)(H.a,{children:Object(g.jsxs)(V.a,{children:["View"===c?Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(F.a,{align:"center",className:t.tableCell,children:"Details"},"view"),Object(g.jsx)(F.a,{align:"center",className:t.tableCell,children:"Delete"},"action")]}):Object(g.jsxs)(F.a,{align:"center",className:t.tableCell,children:["Action"," "]},"action"),$r.map((function(e){return Object(g.jsx)(F.a,{align:"center",padding:e.disablePadding?"none":"default",sortDirection:a===e.id&&n,children:Object(g.jsxs)(q.a,{active:a===e.id,direction:a===e.id?n:"asc",onClick:(c=e.id,function(e){r(e,c)}),children:[e.label,a===e.id?Object(g.jsx)("span",{className:t.visuallyHidden,children:"desc"===n?"sorted descending":"sorted ascending"}):null]})},e.id);var c}))]})})}var tc=Object(m.a)((function(e){return{root:{paddingLeft:e.spacing(2),paddingRight:e.spacing(1)},highlight:"light"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(_.f)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},marginL1:{marginLeft:"1rem"},title:{flex:"1 1 100%"}}})),nc=function(e){var t=[];return Array.isArray(e)&&(t=e.map((function(e){return{reference_number:e.reference_number,coord:e.locations&&e.locations.length>0?e.locations[0].coord:null,from:e.routifics&&e.routifics.length>0?e.routifics[0].from:null,to:e.routifics&&e.routifics.length>0?e.routifics[0].to:null,aging:"7",load:null,destination_phone:e.destination_phone,email:null,service_type:e.service_type,priority:"yes",destination_name:e.destination_name,cod_amount:e.cod_amount,customer_reference_number:e.customer_reference_number,whatsapp_link:"http://wa.me/"+e.destination_phone,whatsapp_location:"http://wa.me/"+e.destination_phone+"?text=%D9%85%D8%B1%D8%AD%D8%A8%D8%A7%20"+e.destination_name.split(" ").slice(0,2).join("%20")+"%20%D9%85%D8%B9%D8%A7%D9%83%20%D9%85%D9%86%D8%AF%D9%88%D8%A8%20%D8%B4%D8%B1%D9%83%D8%A9%20%D9%85%D8%AD%D9%85%D9%88%D9%84%D8%8C%20%D8%A7%D8%B1%D8%AC%D9%88%20%D8%A5%D8%B1%D8%B3%D8%A7%D9%84%20%D8%A7%D9%84%D9%84%D9%88%D9%83%D9%8A%D8%B4%D9%86%20%D9%84%D9%8A%D8%AA%D9%85%20%D8%AA%D9%88%D8%B5%D9%8A%D9%84%20%D8%B4%D8%AD%D9%86%D8%AA%D9%83%20%D8%A8%D8%B1%D9%82%D9%85%20"+e.reference_number,whatsapp_no_answer:"http://wa.me/"+e.destination_phone+"?text=%D9%85%D8%B1%D8%AD%D8%A8%D8%A7%20"+e.destination_name.split(" ").slice(0,2).join("%20")+"%20%D9%85%D8%B9%D8%A7%D9%83%20%D9%85%D9%86%D8%AF%D9%88%D8%A8%20%D8%B4%D8%B1%D9%83%D8%A9%20%D9%85%D8%AD%D9%85%D9%88%D9%84%D8%8C%20%D8%A7%D9%86%D8%A7%20%D9%82%D8%B1%D9%8A%D8%A8%20%D9%85%D9%86%20%D8%A7%D9%84%D9%85%D9%88%D9%82%D8%B9%20%D9%88%D8%AA%D9%85%D8%AA%20%D9%85%D8%AD%D8%A7%D9%88%D9%84%D8%A9%20%D8%A7%D9%84%D8%A7%D8%AA%D8%B5%D8%A7%D9%84%D8%8C%20%D9%86%D8%B1%D8%AC%D9%88%20%D8%A7%D9%84%D8%B1%D8%AF%20%D8%B3%D8%B1%D9%8A%D8%B9%D8%A7%20%D9%84%D9%8A%D8%AA%D9%85%20%D8%AA%D9%88%D8%B5%D9%8A%D9%84%20%D8%B4%D8%AD%D9%86%D8%AA%D9%83%20"+e.reference_number+"%20%D9%81%D9%8A%20%D8%AD%D8%A7%D9%84%20%D9%84%D9%85%20%D9%8A%D8%AA%D9%85%20%D8%A7%D9%84%D8%B1%D8%AF%20%D8%B3%D8%B1%D9%8A%D8%B9%D8%A7%D8%8C%20%D8%B3%D8%AA%D8%AA%D9%85%20%D8%A5%D8%B9%D8%A7%D8%AF%D8%A9%20%D8%A7%D9%84%D8%AC%D8%AF%D9%88%D9%84%D8%A9%20%D9%84%D9%8A%D9%88%D9%85%20%D8%A7%D9%84%D8%B9%D9%85%D9%84%20%D8%A7%D9%84%D9%82%D8%A7%D8%AF%D9%85%D8%8C%20%D9%88%D8%B4%D9%83%D8%B1%D8%A7%D8%8C%0A"}}))),t},ac=function(e){var t=tc(),n=e.numSelected,r=e.selectedRows,c=(e.data,Object(a.useState)(!1)),i=Object(s.a)(c,2);i[0],i[1];function o(e){return b.apply(this,arguments)}function b(){return b=Object(k.a)(B.a.mark((function e(t){var n,a,c;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.a.post("".concat(O.API_ROOT,"/rfdexport"),{reference_number:Object(N.a)(r)});case 2:n=e.sent,a=n.data,c=nc(a),Gr(t,c);case 6:case"end":return e.stop()}}),e)}))),b.apply(this,arguments)}return Object(g.jsxs)(M.a,{className:Object(P.a)(t.root,Object(l.a)({},t.highlight,n>0)),children:[n>0?Object(g.jsxs)(u.a,{className:t.title,color:"inherit",variant:"subtitle1",component:"div",children:[n," selected"]}):Object(g.jsx)(u.a,{className:t.title,variant:"h6",id:"tableTitle",component:"div",children:"Vehicles"}),n>0?Object(g.jsx)(Y.a,{title:"",children:Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(d.a,{container:!0,children:Object(g.jsx)(j.a,{onClick:Object(k.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o("csv");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),className:t.marginL1,variant:"contained",children:"Export CSV"})})})}):Object(g.jsx)(Y.a,{title:"Filter list",children:Object(g.jsx)(z.a,{"aria-label":"filter list",children:Object(g.jsx)(Q.a,{})})})]})},rc=Object(m.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:750},ml1:{marginLeft:"1rem"},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}}));function cc(e){var t=e.Display,n=e.setDispatcher,c=Object(a.useState)([]),i=Object(s.a)(c,2),l=i[0],d=i[1],u=rc(),b=r.a.useState("asc"),h=Object(s.a)(b,2),m=h[0],p=h[1],f=r.a.useState("vehicleID"),x=Object(s.a)(f,2),v=x[0],A=x[1],y=r.a.useState([]),w=Object(s.a)(y,2),S=w[0],C=w[1],I=r.a.useState(0),P=Object(s.a)(I,2),_=P[0],H=P[1],q=r.a.useState(!1),M=Object(s.a)(q,2),U=M[0],Y=M[1],Z=r.a.useState(200),Q=Object(s.a)(Z,2),J=Q[0],G=Q[1],$=Object(a.useState)(!1),ee=Object(s.a)($,2),ne=ee[0],re=ee[1],ie=J-Math.min(J,l.length-_*J),se=function(){var e=Object(k.a)(B.a.mark((function e(n){var a,r,c;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=sessionStorage.getItem("token"),r=oe.a.stringify({employeeID:sessionStorage.getItem("userId")},{skipEmptyString:!0,skipNull:!0}),c=[],D.a.get("".concat(O.API_ROOT,"/api/dispatcher/viewVehicles").concat(r?"?".concat(r):""),{headers:{Authorization:"Bearer ".concat(a)}}).then((function(e){console.log(e.data),c=e.data;var n=[];console.log("is Array"),Array.isArray(c)&&(n=c.map((function(e,t){return Object(o.a)(Object(o.a)({},e),{},{isEditMode:!1})}))),n="View"===t?n.filter((function(e){return e})):n.filter((function(e){return null===e.driverID})),console.log(n),d(Object(N.a)(n))})),console.log(c);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){se("View"===t?"Yes":"No"),console.log(l)}),[]);var le=r.a.useState({open:!1,message:""}),de=Object(s.a)(le,2),ue=de[0],je=de[1],be=function(e,t){"clickaway"!==t&&je({open:!1,message:""})},he=r.a.useState({}),me=Object(s.a)(he,2),pe=(me[0],me[1]),De=function(){var e=Object(k.a)(B.a.mark((function e(t){var n,a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.a.post("".concat(O.API_ROOT,"/newlocation"),{reference_number:t.reference_number,coord:t.coord});case 2:n=e.sent,200!==(a=n.data).statusCode&&je({open:!0,message:a.message});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(g.jsxs)("div",{className:u.root,children:["Assign"!==t?Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(j.a,{variant:"contained",color:"secondary",className:u.spacing,onClick:function(){return re(!0)},children:"Add Vehicle"})}):Object(g.jsx)(g.Fragment,{}),Object(g.jsx)(Xr,{open:ne,onClose:function(){return re(!1)}}),Object(g.jsxs)(W.a,{className:u.paper,children:[Object(g.jsx)(ac,{numSelected:S.length,data:l,selectedRows:Object(N.a)(S)}),Object(g.jsx)(R.a,{children:Object(g.jsxs)(E.a,{className:u.table,"aria-labelledby":"tableTitle",size:U?"small":"medium","aria-label":"enhanced table",children:[Object(g.jsx)(ec,{classes:u,numSelected:S.length,order:m,orderBy:v,onSelectAllClick:function(e){if(e.target.checked){var t=l.map((function(e){return e.ID}));C(t)}else C([])},onRequestSort:function(e,t){p(v===t&&"asc"===m?"desc":"asc"),A(t)},rowCount:l.length,Display:t}),Object(g.jsxs)(T.a,{children:[Jr(l,Qr(m,v)).slice(_*J,_*J+J).map((function(e,a){var r,c=(r=e.vehicleID,-1!==S.indexOf(r)),i="enhanced-table-checkbox-".concat(a);return Object(g.jsxs)(V.a,{hover:!0,role:"checkbox","aria-checked":c,tabIndex:-1,selected:c,children:["View"===t?Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(F.a,{align:"center",children:Object(g.jsx)(j.a,{variant:"contained",color:"secondary",className:u.spacing,onClick:function(){},children:"View"})},"action"),Object(g.jsx)(F.a,{align:"center",children:Object(g.jsx)(z.a,{"aria-label":"delete",onClick:function(){return function(e,t){var n=l.filter((function(t){return t.id==e}))[0];"Save"!=t||n.coord?(d((function(t){return l.map((function(t){return t.id===e?Object(o.a)(Object(o.a)({},t),{},{isEditMode:!t.isEditMode}):t}))})),"Save"==t&&(De(Object(o.a)({},n)),pe([]))):je({open:!0,message:"Coord is not allowed to be empty"})}(e.vehicleID,"Edit")},children:Object(g.jsx)(ae.a,{})})},"action")]}):Object(g.jsx)(F.a,{align:"center",children:Object(g.jsx)(j.a,{variant:"contained",color:"secondary",className:u.spacing,onClick:function(){console.log("vehID: ".concat(e.vehicleID)),n(e.vehicleID)},children:"Assign"})},"action"),Object(g.jsx)(F.a,{component:"th",id:i,scope:"row",padding:"none",align:"center",children:e.vehicleID||"-"}),Object(g.jsx)(F.a,{align:"center",children:e.driverID||"-"})," ",Object(g.jsx)(F.a,{align:"center",children:e.model||"-"})," ",Object(g.jsx)(F.a,{align:"center",children:e.currentLocation||"-"})," ",Object(g.jsx)(F.a,{align:"center",children:e.capacity||"-"})," ",Object(g.jsx)(F.a,{align:"center",children:e.vehicleID||"-"})," "]},e.vehicleID)})),ie>0&&Object(g.jsx)(V.a,{style:{height:(U?33:53)*ie},children:Object(g.jsx)(F.a,{colSpan:6})})]})]})}),Object(g.jsx)(L.a,{rowsPerPageOptions:[100,200,300],component:"div",count:l.length,rowsPerPage:J,page:_,onChangePage:function(e,t){H(t)},onChangeRowsPerPage:function(e){G(parseInt(e.target.value,10)),H(0)}})]}),Object(g.jsx)(te.a,{open:ue.open,autoHideDuration:3e3,onClose:be,children:Object(g.jsx)(ce,{onClose:be,severity:"error",children:ue.message})}),Object(g.jsx)(K.a,{control:Object(g.jsx)(X.a,{checked:U,onChange:function(e){Y(e.target.checked)}}),label:"Dense padding"})]})}var ic=function(){var e=Object(a.useState)(""),t=Object(s.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(null),i=Object(s.a)(c,2),o=i[0],l=i[1],d=Object(a.useState)(null),u=Object(s.a)(d,2),j=u[0],b=u[1],h=Object(a.useState)("Assign"),m=Object(s.a)(h,2),p=(m[0],m[1],function(){var e=Object(k.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("in post request"),t=JSON.stringify({vehicleID:o,driverID:j,employeeID:sessionStorage.getItem("userId")}),D.a.post("".concat(O.API_ROOT,"/api/dispatcher/assignVehicleToDriver"),t,{headers:{Authorization:"Bearer ".concat(sessionStorage.getItem("token")),"Content-Type":"application/json"}}).then((function(e){"SUCCESS"===e.data.status&&(console.log("assigned successfully!!"),b(null),l(null))}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}());return Object(a.useEffect)((function(){console.log("Driver: ".concat(j,", Vehicle: ").concat(o)),null!==o&&null==j?r("View Drivers"):null!==j&&null!==o?p():r("")}),[j,o]),"View Drivers"===n?Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(Ur,{setDispatcher:b,Display:"Assign"})}):Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(cc,{setDispatcher:l,Display:"Assign"})})};function oc(e,t,n){return t[n]<e[n]?-1:t[n]>e[n]?1:0}function sc(e,t){return"desc"===e?function(e,n){return oc(e,n,t)}:function(e,n){return-oc(e,n,t)}}function lc(e,t){var n=e.map((function(e,t){return[e,t]}));return n.sort((function(e,n){var a=t(e[0],n[0]);return 0!==a?a:e[1]-n[1]})),n.map((function(e){return e[0]}))}function dc(e,t){var n=".".concat(e),a=new Date,r="routifics_".concat(a.getDate()).concat(a.getMonth()).concat(a.getFullYear(),"_").concat(a.getTime()),c={Sheets:{data:G.a.utils.json_to_sheet(t)},SheetNames:["data"]},i=G.a.write(c,{bookType:"".concat(e),type:"array"}),o=new Blob([i],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});ee.a.saveAs(o,r+n)}var uc=[{id:"shipmentID",numeric:!0,disablePadding:!1,label:"ID"},{id:"shipmentName",numeric:!1,disablePadding:!1,label:"Name"},{id:"currentCity",numeric:!1,disablePadding:!1,label:"Current City"},{id:"location",numeric:!0,disablePadding:!1,label:"Deliver To"},{id:"status",numeric:!0,disablePadding:!1,label:"Status"},{id:"assignedEmployee",numeric:!0,disablePadding:!1,label:"assigned Emp"}];function jc(e){var t=e.classes,n=e.onSelectAllClick,a=e.order,r=e.orderBy,c=e.numSelected,i=e.rowCount,o=e.onRequestSort;return Object(g.jsx)(H.a,{children:Object(g.jsxs)(V.a,{children:[Object(g.jsx)(F.a,{align:"center",className:t.tableCell,children:"Details"},"view"),Object(g.jsx)(F.a,{padding:"checkbox",children:Object(g.jsx)(U.a,{indeterminate:c>0&&c<i,checked:i>0&&c===i,onChange:n,inputProps:{"aria-label":"select all desserts"}})}),uc.map((function(e){return Object(g.jsx)(F.a,{align:"center",padding:e.disablePadding?"none":"default",sortDirection:r===e.id&&a,children:Object(g.jsxs)(q.a,{active:r===e.id,direction:r===e.id?a:"asc",onClick:(n=e.id,function(e){o(e,n)}),children:[e.label,r===e.id?Object(g.jsx)("span",{className:t.visuallyHidden,children:"desc"===a?"sorted descending":"sorted ascending"}):null]})},e.id);var n}))]})})}var bc=Object(m.a)((function(e){return{root:{paddingLeft:e.spacing(2),paddingRight:e.spacing(1)},highlight:"light"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(_.f)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},marginL1:{marginLeft:"1rem"},title:{flex:"1 1 100%"}}})),hc=function(e){var t=[];return Array.isArray(e)&&(t=e.map((function(e){return{reference_number:e.reference_number,coord:e.locations&&e.locations.length>0?e.locations[0].coord:null,from:e.routifics&&e.routifics.length>0?e.routifics[0].from:null,to:e.routifics&&e.routifics.length>0?e.routifics[0].to:null,aging:"7",load:null,destination_phone:e.destination_phone,email:null,service_type:e.service_type,priority:"yes",destination_name:e.destination_name,cod_amount:e.cod_amount,customer_reference_number:e.customer_reference_number,whatsapp_link:"http://wa.me/"+e.destination_phone,whatsapp_location:"http://wa.me/"+e.destination_phone+"?text=%D9%85%D8%B1%D8%AD%D8%A8%D8%A7%20"+e.destination_name.split(" ").slice(0,2).join("%20")+"%20%D9%85%D8%B9%D8%A7%D9%83%20%D9%85%D9%86%D8%AF%D9%88%D8%A8%20"}}))),t},mc=function(e){var t=bc(),n=e.numSelected,r=e.selectedRows,c=(e.data,e.setShipments),i=Object(a.useState)(!1),o=Object(s.a)(i,2);o[0],o[1];function b(e){return h.apply(this,arguments)}function h(){return h=Object(k.a)(B.a.mark((function e(t){var n,a,c;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.a.post("".concat(O.API_ROOT,"/Accountant/exportOrders"),{reference_number:Object(N.a)(r)});case 2:n=e.sent,a=n.data,c=hc(a),dc(t,c);case 6:case"end":return e.stop()}}),e)}))),h.apply(this,arguments)}return Object(g.jsxs)(M.a,{className:Object(P.a)(t.root,Object(l.a)({},t.highlight,n>0)),children:[n>0?Object(g.jsxs)(u.a,{className:t.title,color:"inherit",variant:"subtitle1",component:"div",children:[n," selected"]}):Object(g.jsx)(u.a,{className:t.title,variant:"h6",id:"tableTitle",component:"div",children:"Shipments"}),n>0?Object(g.jsx)(Y.a,{title:"",children:Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)(d.a,{container:!0,direction:"row",spacing:2,children:[Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(j.a,{color:"secondary",onClick:function(){console.log("selected rows: ".concat(r)),c(Object(N.a)(r))},className:t.marginL1,variant:"contained",children:"Assign"})}),Object(g.jsxs)(d.a,{item:!0,children:[" ",Object(g.jsx)(j.a,{onClick:Object(k.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b("csv");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),className:t.marginL1,variant:"contained",children:"Export CSV"})]})]})})}):Object(g.jsx)(Y.a,{title:"Filter list",children:Object(g.jsx)(z.a,{"aria-label":"filter list",children:Object(g.jsx)(Q.a,{})})})," "]})},pc=Object(m.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:750},ml1:{marginLeft:"1rem"},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}}));function Dc(e){var t=Object(a.useState)([]),n=Object(s.a)(t,2),c=n[0],i=n[1],l=pc(),d=r.a.useState("asc"),u=Object(s.a)(d,2),b=u[0],h=u[1],m=r.a.useState("shipmentID"),p=Object(s.a)(m,2),f=p[0],x=p[1],v=r.a.useState([]),A=Object(s.a)(v,2),y=A[0],w=A[1],S=r.a.useState(0),C=Object(s.a)(S,2),I=C[0],P=C[1],_=r.a.useState(!1),H=Object(s.a)(_,2),q=H[0],M=H[1],z=r.a.useState(200),Y=Object(s.a)(z,2),Z=Y[0],Q=Y[1],J=Object(a.useState)(!1),G=Object(s.a)(J,2),$=(G[0],G[1],Object(a.useState)(e.filters[0])),ee=Object(s.a)($,2),ne=(ee[0],ee[1]),ae=(e.shipments,e.setShipments),re=Z-Math.min(Z,c.length-I*Z),ie=function(){var t=Object(k.a)(B.a.mark((function t(n){var a,r,c,s;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=sessionStorage.getItem("token"),ne(n),r=n,c=JSON.stringify({employeeID:sessionStorage.getItem("userId"),filteredBy:{delivery:{deliveryStatus:r},shipDel:{currentEmployee:sessionStorage.getItem("userId")}}},{skipEmptyString:!0,skipNull:!0}),s=[],D.a.post("".concat(O.API_ROOT,"/api/logisticManager/viewShipments"),c,{headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"}}).then((function(t){console.log(t.data),s=t.data;var n=[];Array.isArray(s)&&(n=s.map((function(e,t){return Object(o.a)(Object(o.a)({},e),{},{employeeID:e.employeeID,isEditMode:!1})})),1===e.filters.length&&(n=n.filter((function(e){return e.currentCity.toUpperCase()===e.shipmentLocation.toUpperCase()})))),i(Object(N.a)(n))}));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();Object(a.useEffect)((function(){ie()}),[]);var oe=r.a.useState({open:!1,message:""}),se=Object(s.a)(oe,2),le=se[0],de=se[1],ue=function(e,t){"clickaway"!==t&&de({open:!1,message:""})},je=r.a.useState({}),be=Object(s.a)(je,2);be[0],be[1];return Object(a.useEffect)((function(){}),[]),Object(g.jsxs)("div",{className:l.root,children:[Object(g.jsx)(Ot,{Filter:{name:"Status",filters:Object(N.a)(e.filters)},handleFilters:function(e){return ie(e)}}),Object(g.jsxs)(W.a,{className:l.paper,children:[Object(g.jsx)(mc,{numSelected:y.length,data:c,selectedRows:Object(N.a)(y),setShipments:ae}),Object(g.jsx)(R.a,{children:Object(g.jsxs)(E.a,{className:l.table,"aria-labelledby":"tableTitle",size:q?"small":"medium","aria-label":"enhanced table",children:[Object(g.jsx)(jc,{classes:l,numSelected:y.length,order:b,orderBy:f,onSelectAllClick:function(e){if(e.target.checked){var t=c.map((function(e){return e.shipmentID}));w(t)}else w([])},onRequestSort:function(e,t){h(f===t&&"asc"===b?"desc":"asc"),x(t)},rowCount:c.length}),Object(g.jsxs)(T.a,{children:[lc(c,sc(b,f)).slice(I*Z,I*Z+Z).map((function(e,t){var n,a=(n=e.shipmentID,-1!==y.indexOf(n)),r="enhanced-table-checkbox-".concat(t);return Object(g.jsxs)(V.a,{hover:!0,role:"checkbox","aria-checked":a,tabIndex:-1,selected:a,children:[Object(g.jsx)(F.a,{align:"center",children:Object(g.jsx)(j.a,{variant:"contained",color:"secondary",className:l.spacing,onClick:function(){},children:"View"})},"view"),Object(g.jsx)(F.a,{padding:"checkbox",children:Object(g.jsx)(U.a,{onChange:function(t){return function(e,t){var n=y.indexOf(t),a=[];-1===n?a=a.concat(y,t):0===n?a=a.concat(y.slice(1)):n===y.length-1?a=a.concat(y.slice(0,-1)):n>0&&(a=a.concat(y.slice(0,n),y.slice(n+1))),w(a)}(0,e.shipmentID)},checked:a,inputProps:{"aria-labelledby":r}})}),Object(g.jsx)(F.a,{component:"th",id:r,scope:"row",padding:"none",align:"center",children:e.shipmentID||"-"}),Object(g.jsx)(F.a,{align:"center",children:e.shipmentName||"-"})," ",Object(g.jsx)(F.a,{align:"center",children:e.currentCity||"-"})," ",Object(g.jsx)(F.a,{align:"center",children:e.shipmentLocation||"-"})," ",Object(g.jsx)(F.a,{align:"center",children:e.deliveryStatus||"-"})," ",Object(g.jsx)(F.a,{align:"center",children:e.assignedEmployee||"-"})," "]},e.shipmentID)})),re>0&&Object(g.jsx)(V.a,{style:{height:(q?33:53)*re},children:Object(g.jsx)(F.a,{colSpan:6})})]})]})}),Object(g.jsx)(L.a,{rowsPerPageOptions:[100,200,300],component:"div",count:c.length,rowsPerPage:Z,page:I,onChangePage:function(e,t){P(t)},onChangeRowsPerPage:function(e){Q(parseInt(e.target.value,10)),P(0)}})]}),Object(g.jsx)(te.a,{open:le.open,autoHideDuration:3e3,onClose:ue,children:Object(g.jsx)(ce,{onClose:ue,severity:"error",children:le.message})}),Object(g.jsx)(K.a,{control:Object(g.jsx)(X.a,{checked:q,onChange:function(e){M(e.target.checked)}}),label:"Dense padding"})]})}var Oc=function(){var e=Object(a.useState)("View Shipments"),t=Object(s.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)([]),i=Object(s.a)(c,2),o=i[0],l=i[1],d=Object(a.useState)(null),u=Object(s.a)(d,2),j=u[0],b=u[1],h=Object(a.useState)(null),m=Object(s.a)(h,2),p=m[0],f=m[1],x=function(){var e=Object(k.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("in post request"),t=JSON.stringify({shipmentID:o,driverID:p,employeeID:sessionStorage.getItem("userId")}),D.a.post("".concat(O.API_ROOT,"/api/dispatcher/assignShipmentsToDriver"),t,{headers:{Authorization:"Bearer ".concat(sessionStorage.getItem("token")),"Content-Type":"application/json"}}).then((function(e){"SUCCESS"===e.data.status&&(console.log("assigned successfully!!"),f(null),b(null),l([]))}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){o.length>0&&null===p?r("View Drivers"):0===o.length?r("View Shipments"):null!==p&&o.length>0&&(console.log(j),x())}),[p,o]),"View Drivers"===n?Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(Ur,{setDispatcher:f,Display:"Assign"})}):Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(Dc,{setShipments:l,filters:["ONDELIVERY","TOSTORE"]})})};var gc=function(){var e=Object(a.useState)("View Shipments"),t=Object(s.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)([]),i=Object(s.a)(c,2),o=i[0],l=i[1],d=Object(a.useState)(null),u=Object(s.a)(d,2),j=u[0],b=u[1],h=Object(a.useState)(null),m=Object(s.a)(h,2),p=m[0],f=m[1],x=function(){var e=Object(k.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("in post request"),t=JSON.stringify({shipmentID:o,driverID:p,employeeID:sessionStorage.getItem("userId")}),D.a.post("".concat(O.API_ROOT,"/api/dispatcher/assignShipmentsToDriver"),t,{headers:{Authorization:"Bearer ".concat(sessionStorage.getItem("token")),"Content-Type":"application/json"}}).then((function(e){"SUCCESS"===e.data.status&&(console.log("assigned successfully!!"),f(null),b(null),l([]))}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){o.length>0&&null===p?r("View Drivers"):0===o.length?r("View Shipments"):null!==p&&o.length>0&&(console.log(j),x())}),[p,o]),"View Drivers"===n?Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(Ur,{setDispatcher:f,Display:"Assign"})}):Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(Dc,{setShipments:l,filters:["TOPICKUP"]})})};var fc=function(){return Object(g.jsx)(v.a,{theme:S,children:Object(g.jsxs)(A.a,{children:[Object(g.jsx)(C.a,{routes:[{name:"To Warehouse",link:"/toWarehouse",activeIndex:0},{name:"To Consignee",link:"/toConsignee",activeIndex:1},{name:"Drivers",link:"/",activeIndex:2},{name:"Assign Vehicles",link:"/assignVehicles",activeIndex:3},{name:"Vehicles",link:"/vehicles",activeIndex:4}]}),Object(g.jsxs)(y.c,{children:[Object(g.jsx)(y.a,{exact:!0,path:"/toWarehouse",children:Object(g.jsx)(Oc,{})}),Object(g.jsx)(y.a,{exact:!0,path:"/toConsignee",children:Object(g.jsx)(gc,{})}),Object(g.jsxs)(y.a,{exact:!0,path:"/",children:[" ",Object(g.jsx)(Ur,{Display:"View"})," "]}),Object(g.jsxs)(y.a,{exact:!0,path:"/vehicles",children:[" ",Object(g.jsx)(cc,{Display:"View"})," "]}),Object(g.jsx)(y.a,{exact:!0,path:"/assignVehicles",children:Object(g.jsx)(ic,{})})]})]})})};function xc(e,t,n){return t[n]<e[n]?-1:t[n]>e[n]?1:0}function vc(e,t){return"desc"===e?function(e,n){return xc(e,n,t)}:function(e,n){return-xc(e,n,t)}}function Ac(e,t){var n=e.map((function(e,t){return[e,t]}));return n.sort((function(e,n){var a=t(e[0],n[0]);return 0!==a?a:e[1]-n[1]})),n.map((function(e){return e[0]}))}var yc=[{id:"shelfNumber",numeric:!0,disablePadding:!1,label:"Number"},{id:"row",numeric:!1,disablePadding:!1,label:"Row"},{id:"section",numeric:!1,disablePadding:!1,label:"Section"},{id:"lane",numeric:!0,disablePadding:!1,label:"Lane"},{id:"floor",numeric:!0,disablePadding:!1,label:"Floor"},{id:"width",numeric:!0,disablePadding:!1,label:"Width"},{id:"height",numeric:!0,disablePadding:!1,label:"Height"},{id:"assignedShipment",numeric:!0,disablePadding:!1,label:"AssignedShipment"}];function wc(e){var t=e.classes,n=(e.onSelectAllClick,e.order),a=e.orderBy,r=(e.numSelected,e.rowCount,e.onRequestSort),c=e.filter;return Object(g.jsx)(H.a,{children:Object(g.jsxs)(V.a,{children:["Assign"===c?Object(g.jsx)(F.a,{align:"center",className:t.tableCell,children:"Action"},"view"):Object(g.jsx)(F.a,{align:"center",className:t.tableCell,children:"Details"},"view"),yc.map((function(e){return Object(g.jsx)(F.a,{align:"center",padding:e.disablePadding?"none":"default",sortDirection:a===e.id&&n,children:Object(g.jsxs)(q.a,{active:a===e.id,direction:a===e.id?n:"asc",onClick:(c=e.id,function(e){r(e,c)}),children:[e.label,a===e.id?Object(g.jsx)("span",{className:t.visuallyHidden,children:"desc"===n?"sorted descending":"sorted ascending"}):null]})},e.id);var c}))]})})}var Sc=Object(m.a)((function(e){return{root:{paddingLeft:e.spacing(2),paddingRight:e.spacing(1)},highlight:"light"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(_.f)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},marginL1:{marginLeft:"1rem"},title:{flex:"1 1 100%"}}})),Cc=function(e){var t=Sc(),n=e.numSelected,r=e.selectedRows,c=(e.data,e.setShipments),i=Object(a.useState)(!1),o=Object(s.a)(i,2);o[0],o[1];return Object(g.jsxs)(M.a,{className:Object(P.a)(t.root,Object(l.a)({},t.highlight,n>0)),children:[n>0?Object(g.jsxs)(u.a,{className:t.title,color:"inherit",variant:"subtitle1",component:"div",children:[n," selected"]}):Object(g.jsx)(u.a,{className:t.title,variant:"h6",id:"tableTitle",component:"div",children:"Shelves"}),n>0?Object(g.jsx)(Y.a,{title:"",children:Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(d.a,{container:!0,direction:"row",spacing:2,children:Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(j.a,{color:"secondary",onClick:function(){console.log("selected rows: ".concat(r)),c(Object(N.a)(r))},className:t.marginL1,variant:"contained",children:"Assign"})})})})}):Object(g.jsx)(Y.a,{title:"Filter list",children:Object(g.jsx)(z.a,{"aria-label":"filter list",children:Object(g.jsx)(Q.a,{})})})," "]})},Nc=Object(m.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:750},ml1:{marginLeft:"1rem"},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}}));function kc(e){var t=Object(a.useState)([]),n=Object(s.a)(t,2),c=n[0],i=n[1],l=Nc(),d=r.a.useState("asc"),u=Object(s.a)(d,2),b=u[0],h=u[1],m=r.a.useState("shelfID"),p=Object(s.a)(m,2),f=p[0],x=p[1],v=r.a.useState([]),A=Object(s.a)(v,2),y=A[0],w=A[1],S=r.a.useState(0),C=Object(s.a)(S,2),I=C[0],P=C[1],_=r.a.useState(!1),H=Object(s.a)(_,2),q=H[0],M=H[1],U=r.a.useState(200),z=Object(s.a)(U,2),Y=z[0],Z=z[1],Q=Object(a.useState)(!1),J=Object(s.a)(Q,2),G=(J[0],J[1],e.setDispatcher),$=Y-Math.min(Y,c.length-I*Y),ee=function(){var t=Object(k.a)(B.a.mark((function t(){var n,a,r;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=sessionStorage.getItem("token"),a=oe.a.stringify({employeeID:sessionStorage.getItem("userId")},{skipEmptyString:!0,skipNull:!0}),r=[],D.a.get("".concat(O.API_ROOT,"/api/warehouseManager/viewShelfs").concat(a?"?".concat(a):""),{headers:{Authorization:"Bearer ".concat(n),"Content-Type":"application/json"}}).then((function(t){console.log(t.data),r=t.data;var n=[];Array.isArray(r)&&(n=r.map((function(e,t){return Object(o.a)(Object(o.a)({},e),{},{employeeID:e.employeeID,isEditMode:!1})}))),"Assign"===e.filters&&(n=n.filter((function(e){return null===e.assignedShipment}))),i(Object(N.a)(n))}));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Object(a.useEffect)((function(){ee()}),[]);var ne=r.a.useState({open:!1,message:""}),ae=Object(s.a)(ne,2),re=ae[0],ie=ae[1],se=function(e,t){"clickaway"!==t&&ie({open:!1,message:""})},le=r.a.useState({}),de=Object(s.a)(le,2);de[0],de[1];return Object(a.useEffect)((function(){}),[]),Object(g.jsxs)("div",{className:l.root,children:[Object(g.jsxs)(W.a,{className:l.paper,children:[Object(g.jsx)(Cc,{numSelected:y.length,data:c,selectedRows:Object(N.a)(y),setShipments:G,filter:e.filters}),Object(g.jsx)(R.a,{children:Object(g.jsxs)(E.a,{className:l.table,"aria-labelledby":"tableTitle",size:q?"small":"medium","aria-label":"enhanced table",children:[Object(g.jsx)(wc,{classes:l,numSelected:y.length,order:b,orderBy:f,onSelectAllClick:function(e){if(e.target.checked){var t=c.map((function(e){return e.shelfID}));w(t)}else w([])},onRequestSort:function(e,t){h(f===t&&"asc"===b?"desc":"asc"),x(t)},rowCount:c.length,filter:e.Display}),Object(g.jsxs)(T.a,{children:[Ac(c,vc(b,f)).slice(I*Y,I*Y+Y).map((function(t,n){var a,r=(a=t.shelfID,-1!==y.indexOf(a)),c="enhanced-table-checkbox-".concat(n);return Object(g.jsxs)(V.a,{hover:!0,role:"checkbox","aria-checked":r,tabIndex:-1,selected:r,children:["Assign"===e.Display?Object(g.jsx)(F.a,{align:"center",children:Object(g.jsx)(j.a,{variant:"contained",color:"secondary",className:l.spacing,onClick:function(){G(t.shelfID)},children:"Store"})},"view"):Object(g.jsx)(F.a,{align:"center",children:Object(g.jsx)(j.a,{variant:"contained",color:"secondary",className:l.spacing,onClick:function(){},children:"View"})},"view"),Object(g.jsx)(F.a,{component:"th",id:c,scope:"row",padding:"none",align:"center",children:t.shelfNumber||"-"}),Object(g.jsx)(F.a,{align:"center",children:t.row||"-"})," ",Object(g.jsx)(F.a,{align:"center",children:t.section||"-"})," ",Object(g.jsx)(F.a,{align:"center",children:t.lane||"-"})," ",Object(g.jsx)(F.a,{align:"center",children:t.floor||"-"})," ",Object(g.jsx)(F.a,{align:"center",children:t.width||"-"})," ",Object(g.jsx)(F.a,{align:"center",children:t.height||"-"})," ",Object(g.jsx)(F.a,{align:"center",children:t.assignedShipment||"-"})," "]},t.shelfID)})),$>0&&Object(g.jsx)(V.a,{style:{height:(q?33:53)*$},children:Object(g.jsx)(F.a,{colSpan:6})})]})]})}),Object(g.jsx)(L.a,{rowsPerPageOptions:[100,200,300],component:"div",count:c.length,rowsPerPage:Y,page:I,onChangePage:function(e,t){P(t)},onChangeRowsPerPage:function(e){Z(parseInt(e.target.value,10)),P(0)}})]}),Object(g.jsx)(te.a,{open:re.open,autoHideDuration:3e3,onClose:se,children:Object(g.jsx)(ce,{onClose:se,severity:"error",children:re.message})}),Object(g.jsx)(K.a,{control:Object(g.jsx)(X.a,{checked:q,onChange:function(e){M(e.target.checked)}}),label:"Dense padding"})]})}function Ic(e,t,n){return t[n]<e[n]?-1:t[n]>e[n]?1:0}function Bc(e,t){return"desc"===e?function(e,n){return Ic(e,n,t)}:function(e,n){return-Ic(e,n,t)}}function Pc(e,t){var n=e.map((function(e,t){return[e,t]}));return n.sort((function(e,n){var a=t(e[0],n[0]);return 0!==a?a:e[1]-n[1]})),n.map((function(e){return e[0]}))}var _c=[{id:"shipmentID",numeric:!0,disablePadding:!1,label:"ID"},{id:"shipmentName",numeric:!1,disablePadding:!1,label:"Name"},{id:"height",numeric:!1,disablePadding:!1,label:"Height"},{id:"length",numeric:!0,disablePadding:!1,label:"Length"},{id:"width",numeric:!0,disablePadding:!1,label:"width"},{id:"assignedEmployee",numeric:!0,disablePadding:!1,label:"assigned Emp"}];function Ec(e){var t=e.classes,n=e.onSelectAllClick,a=e.order,r=e.orderBy,c=e.numSelected,i=e.rowCount,o=e.onRequestSort,s=e.filterz;return Object(g.jsx)(H.a,{children:Object(g.jsxs)(V.a,{children:["TOPICKUP"===s?Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(F.a,{align:"center",className:t.tableCell,children:"Details"},"view"),Object(g.jsx)(F.a,{padding:"checkbox",children:Object(g.jsx)(U.a,{indeterminate:c>0&&c<i,checked:i>0&&c===i,onChange:n,inputProps:{"aria-label":"select all desserts"}})})]}):Object(g.jsx)(F.a,{align:"center",className:t.tableCell,children:"Action"},"view"),_c.map((function(e){return Object(g.jsx)(F.a,{align:"center",padding:e.disablePadding?"none":"default",sortDirection:r===e.id&&a,children:Object(g.jsxs)(q.a,{active:r===e.id,direction:r===e.id?a:"asc",onClick:(n=e.id,function(e){o(e,n)}),children:[e.label,r===e.id?Object(g.jsx)("span",{className:t.visuallyHidden,children:"desc"===a?"sorted descending":"sorted ascending"}):null]})},e.id);var n}))]})})}var Tc=Object(m.a)((function(e){return{root:{paddingLeft:e.spacing(2),paddingRight:e.spacing(1)},highlight:"light"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(_.f)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},marginL1:{marginLeft:"1rem"},title:{flex:"1 1 100%"}}})),Fc=function(e){var t=Tc(),n=e.numSelected,r=e.selectedRows,c=(e.data,e.setShipments),i=Object(a.useState)(!1),o=Object(s.a)(i,2);o[0],o[1];return Object(g.jsxs)(M.a,{className:Object(P.a)(t.root,Object(l.a)({},t.highlight,n>0)),children:[n>0?Object(g.jsxs)(u.a,{className:t.title,color:"inherit",variant:"subtitle1",component:"div",children:[n," selected"]}):Object(g.jsx)(u.a,{className:t.title,variant:"h6",id:"tableTitle",component:"div",children:"Shipments"}),n>0?Object(g.jsx)(Y.a,{title:"",children:Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)(d.a,{container:!0,direction:"row",spacing:2,children:[Object(g.jsx)(d.a,{item:!0,children:Object(g.jsx)(j.a,{color:"secondary",onClick:function(){console.log("selected rows: ".concat(r)),c(Object(N.a)(r))},className:t.marginL1,variant:"contained",children:"Assign"})}),Object(g.jsx)(d.a,{item:!0,children:" "})]})})}):Object(g.jsx)(Y.a,{title:"Filter list",children:Object(g.jsx)(z.a,{"aria-label":"filter list",children:Object(g.jsx)(Q.a,{})})})," "]})},Rc=Object(m.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:750},ml1:{marginLeft:"1rem"},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}}));function Hc(e){var t=Object(a.useState)([]),n=Object(s.a)(t,2),c=n[0],i=n[1],l=Rc(),d=r.a.useState("asc"),u=Object(s.a)(d,2),b=u[0],h=u[1],m=r.a.useState("shipmentID"),p=Object(s.a)(m,2),f=p[0],x=p[1],v=r.a.useState([]),A=Object(s.a)(v,2),y=A[0],w=A[1],S=r.a.useState(0),C=Object(s.a)(S,2),I=C[0],P=C[1],_=r.a.useState(!1),H=Object(s.a)(_,2),q=H[0],M=H[1],z=r.a.useState(200),Y=Object(s.a)(z,2),Z=Y[0],Q=Y[1],J=Object(a.useState)(!1),G=Object(s.a)(J,2),$=(G[0],G[1],Object(a.useState)(e.filters[0])),ee=Object(s.a)($,2),ne=(ee[0],ee[1]),ae=e.setShipments,re=Z-Math.min(Z,c.length-I*Z),ie=function(){var t=Object(k.a)(B.a.mark((function t(n){var a,r,c;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=sessionStorage.getItem("token"),ne(n),n,r=JSON.stringify({employeeID:sessionStorage.getItem("userId")},{skipEmptyString:!0,skipNull:!0}),c=[],D.a.post("".concat(O.API_ROOT,"/api/worker/viewShipments"),r,{headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"}}).then((function(t){console.log(t.data),c=t.data;var n=[];Array.isArray(c)&&(n=c.map((function(e,t){return Object(o.a)(Object(o.a)({},e),{},{employeeID:e.employeeID,isEditMode:!1})}))),n="TOBESTORED"===e.filters[0]?n.filter((function(e){return"TOBESTORED"===e.deliveryStatus})):n.filter((function(e){return"PICKUP"===e.deliveryStatus})),i(Object(N.a)(n))}));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();Object(a.useEffect)((function(){ie(e.filters[0])}),[]);var oe=r.a.useState({open:!1,message:""}),se=Object(s.a)(oe,2),le=se[0],de=se[1],ue=function(e,t){"clickaway"!==t&&de({open:!1,message:""})},je=r.a.useState({}),be=Object(s.a)(je,2);be[0],be[1];return Object(a.useEffect)((function(){}),[]),Object(g.jsxs)("div",{className:l.root,children:[Object(g.jsx)(Ot,{Filter:{name:"Status",filters:Object(N.a)(e.filters)},handleFilters:function(e){return ie(e)}}),Object(g.jsxs)(W.a,{className:l.paper,children:[Object(g.jsx)(Fc,{numSelected:y.length,data:c,selectedRows:Object(N.a)(y),setShipments:ae}),Object(g.jsx)(R.a,{children:Object(g.jsxs)(E.a,{className:l.table,"aria-labelledby":"tableTitle",size:q?"small":"medium","aria-label":"enhanced table",children:[Object(g.jsx)(Ec,{classes:l,numSelected:y.length,order:b,orderBy:f,onSelectAllClick:function(e){if(e.target.checked){var t=c.map((function(e){return e.shipmentID}));w(t)}else w([])},onRequestSort:function(e,t){h(f===t&&"asc"===b?"desc":"asc"),x(t)},rowCount:c.length,filterz:e.filters[0]}),Object(g.jsxs)(T.a,{children:[Pc(c,Bc(b,f)).slice(I*Z,I*Z+Z).map((function(t,n){var a,r=(a=t.shipmentID,-1!==y.indexOf(a)),c="enhanced-table-checkbox-".concat(n);return Object(g.jsxs)(V.a,{hover:!0,role:"checkbox","aria-checked":r,tabIndex:-1,selected:r,children:["PICKUP"===e.filters[0]?Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(F.a,{align:"center",children:Object(g.jsx)(j.a,{variant:"contained",color:"secondary",className:l.spacing,onClick:function(){},children:"View"})},"view"),Object(g.jsx)(F.a,{padding:"checkbox",children:Object(g.jsx)(U.a,{onChange:function(e){return function(e,t){var n=y.indexOf(t),a=[];-1===n?a=a.concat(y,t):0===n?a=a.concat(y.slice(1)):n===y.length-1?a=a.concat(y.slice(0,-1)):n>0&&(a=a.concat(y.slice(0,n),y.slice(n+1))),w(a)}(0,t.shipmentID)},checked:r,inputProps:{"aria-labelledby":c}})})," "]}):Object(g.jsx)(F.a,{align:"center",children:Object(g.jsx)(j.a,{variant:"contained",color:"secondary",className:l.spacing,onClick:function(){return ae([t.shipmentID])},children:"Assign"})},"view"),Object(g.jsx)(F.a,{component:"th",id:c,scope:"row",padding:"none",align:"center",children:t.shipmentID||"-"}),Object(g.jsx)(F.a,{align:"center",children:t.shipmentName||"-"})," ",Object(g.jsx)(F.a,{align:"center",children:t.height||"-"})," ",Object(g.jsx)(F.a,{align:"center",children:t.length||"-"})," ",Object(g.jsx)(F.a,{align:"center",children:t.width||"-"})," ",Object(g.jsx)(F.a,{align:"center",children:t.assignedEmployee||"-"})," "]},t.shipmentID)})),re>0&&Object(g.jsx)(V.a,{style:{height:(q?33:53)*re},children:Object(g.jsx)(F.a,{colSpan:6})})]})]})}),Object(g.jsx)(L.a,{rowsPerPageOptions:[100,200,300],component:"div",count:c.length,rowsPerPage:Z,page:I,onChangePage:function(e,t){P(t)},onChangeRowsPerPage:function(e){Q(parseInt(e.target.value,10)),P(0)}})]}),Object(g.jsx)(te.a,{open:le.open,autoHideDuration:3e3,onClose:ue,children:Object(g.jsx)(ce,{onClose:ue,severity:"error",children:le.message})}),Object(g.jsx)(K.a,{control:Object(g.jsx)(X.a,{checked:q,onChange:function(e){M(e.target.checked)}}),label:"Dense padding"})]})}var Lc=function(){var e=Object(a.useState)("View Shipments"),t=Object(s.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)([]),i=Object(s.a)(c,2),o=i[0],l=i[1],d=Object(a.useState)(null),u=Object(s.a)(d,2),j=(u[0],u[1]),b=Object(a.useState)(null),h=Object(s.a)(b,2),m=h[0],p=h[1],f=function(){var e=Object(k.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("in post request"),console.log("shipments: ".concat(o)),t=JSON.stringify({shelfs:[{shelfID:m,shipmentID:o[0]}],employeeID:sessionStorage.getItem("userId")}),D.a.post("".concat(O.API_ROOT,"/api/worker/moveShipments"),t,{headers:{Authorization:"Bearer ".concat(sessionStorage.getItem("token")),"Content-Type":"application/json"}}).then((function(e){"SUCCESS"===e.data.status&&(console.log("assigned successfully!!"),p(null),j(null),l([]))}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){o.length>0&&null===m?r("View Drivers"):0===o.length?r("View Shipments"):null!==m&&o.length>0&&(console.log(o),f())}),[m,o]),"View Drivers"===n?Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(kc,{setDispatcher:p,Display:"Assign"})}):Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(Hc,{setShipments:l,filters:["TOBESTORED"]})})};var Vc=function(){var e=Object(a.useState)("View Shipments"),t=Object(s.a)(e,2),n=(t[0],t[1],Object(a.useState)([])),r=Object(s.a)(n,2),c=r[0],i=r[1],o=Object(a.useState)(null),l=Object(s.a)(o,2),d=(l[0],l[1]),u=Object(a.useState)(null),j=Object(s.a)(u,2),b=j[0],h=j[1],m=function(){var e=Object(k.a)(B.a.mark((function e(){var t,n;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("in post request"),t=c.map((function(e){return{shelfID:"",shipmentID:e}})),n=JSON.stringify({shelfs:t,assignedEmployeeID:b,employeeID:sessionStorage.getItem("userId")}),D.a.post("".concat(O.API_ROOT,"/api/worker/moveShipments"),n,{headers:{Authorization:"Bearer ".concat(sessionStorage.getItem("token")),"Content-Type":"application/json"}}).then((function(e){"SUCCESS"===e.data.status&&(console.log("assigned successfully!!"),h(null),d(null),i([]))}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){c.length>0&&m()}),[b]),Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(Hc,{setShipments:i,filters:["PICKUP"]})})};var qc=function(){return Object(g.jsx)(v.a,{theme:S,children:Object(g.jsxs)(A.a,{children:[Object(g.jsx)(C.a,{routes:[{name:"To store",link:"/toBeStored",activeIndex:0},{name:"To fetch",link:"/toBePickedUp",activeIndex:1},{name:"My shelves",link:"/",activeIndex:2}]}),Object(g.jsxs)(y.c,{children:[Object(g.jsx)(y.a,{exact:!0,path:"/toBeStored",children:Object(g.jsx)(Lc,{})}),Object(g.jsx)(y.a,{exact:!0,path:"/toBePickedUp",children:Object(g.jsx)(Vc,{})}),Object(g.jsxs)(y.a,{exact:!0,path:"/",children:[Object(g.jsx)(kc,{Display:"View"})," ",Object(g.jsx)(g.Fragment,{})]})]})]})})};var Mc=function(){var e=function(){var e=Object(a.useState)(sessionStorage.getItem("token")),t=Object(s.a)(e,2),n=t[0],r=t[1];return{setToken:function(e){sessionStorage.setItem("token",e),r(e)},token:n}}(),t=e.token,n=e.setToken,c=function(){var e=Object(a.useState)(sessionStorage.getItem("UserId")),t=Object(s.a)(e,2),n=t[0],r=t[1];return{setUserId:function(e){sessionStorage.setItem("userId",e),r(e)},userId:n}}(),i=(c.userId,c.setUserId),o=function(){var e=Object(a.useState)(sessionStorage.getItem("UserType")),t=Object(s.a)(e,2),n=t[0],r=t[1];return{setUserType:function(e){sessionStorage.setItem("UserType",e),r(e)},userType:n}}(),l=o.userType,d=o.setUserType;return t?Object(g.jsxs)(r.a.Fragment,{children:["LM"===l&&Object(g.jsx)(qt,{}),"WM"===l&&Object(g.jsx)(Dr,{}),"AD"===l&&Object(g.jsx)(Zn,{}),"CO"===l&&Object(g.jsx)(Pe,{}),"FB"===l&&Object(g.jsx)(ja,{}),"DI"===l&&Object(g.jsx)(fc,{}),"DR"===l&&Object(g.jsx)(kr,{}),"OW"===l&&Object(g.jsx)(Na,{}),"AC"===l&&Object(g.jsx)(ka,{}),"CS"===l&&Object(g.jsx)(Qn,{}),"WO"===l&&Object(g.jsx)(qc,{})]}):Object(g.jsx)(A.a,{children:Object(g.jsxs)(y.c,{children:[Object(g.jsx)(y.a,{exact:!0,path:"/signup",children:Object(g.jsx)(Te,{})}),Object(g.jsx)(x,{setToken:n,setUserId:i,setUserType:d})]})})};i.a.render(Object(g.jsx)(Mc,{}),document.getElementById("root"))},54:function(e,t,n){"use strict";(function(e){var a=n(2),r=n(11),c=n(3),i=n(1),o=n.n(i),s=n(263),l=n(186),d=n(264),u=n(258),j=n(188),b=n(265),h=n(260),m=n(152),p=n.n(m),D=n(175),O=n(36),g=n(259),f=n(58),x=n(177),v=n.n(x),A=n(266),y=n(187),w=n(257),S=n(154),C=n(262),N=n(56),k=n(0);function I(e){var t=e.children,n=Object(u.a)({disableHysteresis:!0,threshold:0});return o.a.cloneElement(t,{elevation:n?4:0})}var B=Object(j.a)((function(e){var t,n;return{toolbarMargin:Object(c.a)(Object(c.a)({},e.mixins.toolbar),{},(t={marginBottom:"3em"},Object(r.a)(t,e.breakpoints.down("md"),{marginBottom:"2em"}),Object(r.a)(t,e.breakpoints.down("xs"),{marginBottom:"1.25em"}),t)),logo:(n={height:"6em"},Object(r.a)(n,e.breakpoints.down("md"),{height:"5em"}),Object(r.a)(n,e.breakpoints.down("xs"),{height:"4.5em"}),n),tabContainer:{margin:"auto"},tab:{fontFamily:"Raleway",textTransform:"none",fontWeight:"700",fontSize:"1rem",minWidth:10,marginLeft:"25px",color:"white"},button:{fontFamily:"Raleway",textTransform:"none",fontWeight:"700",fontSize:"1rem",marginRight:"25px"},drawerIcon:{height:"50px",width:"50px "},drawerIconContainer:{marginLeft:"auto","&:hover":{backgroundColor:"transparent"}},drawer:Object(r.a)({backgroundColor:e.palette.common.mahmoolBlue,width:"178.9px"},e.breakpoints.down("xs"),{width:"161px"}),drawerItem:Object(c.a)(Object(c.a)({},e.typography.tab),{},{color:"white",opacity:.7}),draweItemSelected:{opacity:1},appbar:{zIndex:e.zIndex.modal+1}}}));t.a=function(t){Object(N.f)(),console.log("props: ".concat(t.routes));var n=Object(i.useState)(!1),r=Object(a.a)(n,2),c=r[0],u=r[1],j=e.browser&&/iPad|iPhone|iPod/.test(navigator.userAgent),m=B(),x=Object(f.a)(),P=Object(g.a)(x.breakpoints.down("md")),_=Object(i.useState)(0),E=Object(a.a)(_,2),T=E[0],F=E[1],R=t.routes;console.log(R),Object(i.useEffect)((function(){R.forEach((function(e){if(window.location.pathname==="".concat(e.link))T!==e.activeIndex&&"Log in"!==e.name&&F(e.activeIndex)}))}),[T,R]);var H=Object(k.jsxs)(o.a.Fragment,{children:[Object(k.jsx)(b.a,{value:T,onChange:function(e,t){F(t)},className:m.tabContainer,indicatorColor:"primary",children:R.map((function(e,t){return Object(k.jsx)(h.a,{className:m.tab,label:e.name,component:O.b,to:e.link},e.activeIndex)}))}),Object(k.jsxs)(l.a,{className:m.button,endIcon:Object(k.jsx)(p.a,{}),color:"inherit",onClick:function(){sessionStorage.clear(),localStorage.clear(),window.location.href="/"},children:[" ","Log out"]})]}),L=Object(k.jsxs)(o.a.Fragment,{children:[Object(k.jsxs)(A.a,{disableBackdropTransition:!j,disableDiscovery:j,open:c,onClose:function(){return u(!1)},onOpen:function(){return u(!0)},classes:{paper:m.drawer},children:[Object(k.jsx)("di",{className:m.toolbarMargin}),Object(k.jsxs)(w.a,{disablePadding:!0,children:[R.map((function(e,t){return Object(k.jsx)(S.a,{className:T===e.activeIndex?[m.drawerItem,m.draweItemSelected]:m.drawerItem,onClick:function(){u(!1),F(e.activeIndex)},divider:!0,button:!0,component:O.b,to:e.link,selected:T===e.activeIndex,children:Object(k.jsx)(C.a,{disableTypography:!0,children:e.name})},e.activeIndex)})),Object(k.jsx)(S.a,{className:m.drawerItem,onClick:function(){return u(!1)},divider:!0,button:!0,component:O.b,to:"/",selected:5===T,children:Object(k.jsxs)(l.a,{className:m.button,endIcon:Object(k.jsx)(p.a,{}),color:"inherit",onClick:function(){sessionStorage.clear(),localStorage.clear(),window.location.href="/"},children:[" ","Log out"]})})]})]}),Object(k.jsx)(y.a,{className:m.drawerIconContainer,onClick:function(){return u(!c)},disableRipple:!0,children:Object(k.jsx)(v.a,{className:m.drawerIcon})})]});return Object(k.jsxs)(o.a.Fragment,{children:[Object(k.jsx)(I,{children:Object(k.jsx)(s.a,{className:m.appbar,children:Object(k.jsxs)(d.a,{disableGutters:!0,children:[Object(k.jsx)("img",{src:D.a,className:m.logo,alt:"mahmool logo"}),P?L:H]})})}),Object(k.jsx)("div",{className:m.toolbarMargin})]})}}).call(this,n(147))}},[[254,1,2]]]);
//# sourceMappingURL=main.697a175c.chunk.js.map